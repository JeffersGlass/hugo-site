<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Advent of Code 2022</title>
	<meta name="description" content="Electronics, Making, Software Development, and Amateur Radio from a Midwest Nerd">
	
	
	
	
	<link rel ="stylesheet" type="text/css" href="../../css/style.css">
	
	<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jeff.glass/post/advent-of-code-2022/python_cover.png"/>
<meta name="twitter:title" content="Advent of Code 2022"/>
<meta name="twitter:description" content="Solutions to the annual holiday coding challenge, in Python and PyScript"/>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css" />	
	<script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />

	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BZTF8S6M1E"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BZTF8S6M1E', { 'anonymize_ip': false });
}
</script>


	<link rel="icon" href="../../favicon.ico?v=2"> 
	
</head>
<body>
	
	<main>
		<header>

<div class="fixed z-20 flex flex-row items-end w-full p-2 bg-green-800 t-0">
    
    <div class="flex-none hidden lg:flex">
        <div class="flex-none px-2">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
        <div class="flex-none menu-item-green ">
            <a href="../../#Introduction" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Home
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../project" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Projects
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../post" class="z-30 clickable-link-box no-style-link"><span></span></a> Blog  
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../oneoff" class="z-30 clickable-link-box no-style-link"><span></span></a>
            One-Offs
        </div>
    </div>
    
    <div class="flex justify-start flex-1 w-auto lg:hidden align-left large-menu">
        <div class="flex-none menu-item-green mobile-menu-button">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </div>
        <div class="flex-none">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
    </div>
    
    
    <div class="hidden text-green-200 transition mobile-menu">
            <div class="w-auto m-auto"><a href="../../"         class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Home</a></div>
            <div class="w-auto m-auto"><a href="../../project"  class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Projects</a></div>
            <div class="w-auto m-auto"><a href="../../post"     class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Blog</a></div>
            <div class="w-auto m-auto"><a href="../../oneoff"   class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">One-Offs</a></div>
    </div>
    
    <div class="justify-end flex-1 hidden w-auto h-auto align-top md:flex social-buttons">
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.youtube.com/channel/UCjgmTMVx2B5_DOB3bCZBq7A" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg class = "z-0" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5 7H19C19.5523 7 20 7.44771 20 8V16C20 16.5523 19.5523 17 19 17H5C4.44772 17 4 16.5523 4 16V8C4 7.44772 4.44772 7 5 7ZM2 8C2 6.34315 3.34315 5 5 5H19C20.6569 5 22 6.34315 22 8V16C22 17.6569 20.6569 19 19 19H5C3.34315 19 2 17.6569 2 16V8ZM10 9L14 12L10 15V9Z" fill="currentColor"/>
            </svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.twitter.com/jeffersglass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" class="ionicon" viewBox="0 0 512 512"><path d="M496 109.5a201.8 201.8 0 01-56.55 15.3 97.51 97.51 0 0043.33-53.6 197.74 197.74 0 01-62.56 23.5A99.14 99.14 0 00348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 002.54 22.1 280.7 280.7 0 01-203-101.3A95.69 95.69 0 0036 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0135.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 01-25.94 3.4 94.38 94.38 0 01-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0139.5 405.6a203 203 0 01-23.5-1.4A278.68 278.68 0 00166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 00496 109.5z" fill="currentColor"/></svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.linkedin.com/in/jeffrey-r-glass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 512 512"><path d="M444.17,32H70.28C49.85,32,32,46.7,32,66.89V441.61C32,461.91,49.85,480,70.28,480H444.06C464.6,480,480,461.79,480,441.61V66.89C480.12,46.7,464.6,32,444.17,32ZM170.87,405.43H106.69V205.88h64.18ZM141,175.54h-.46c-20.54,0-33.84-15.29-33.84-34.43,0-19.49,13.65-34.42,34.65-34.42s33.85,14.82,34.31,34.42C175.65,160.25,162.35,175.54,141,175.54ZM405.43,405.43H341.25V296.32c0-26.14-9.34-44-32.56-44-17.74,0-28.24,12-32.91,23.69-1.75,4.2-2.22,9.92-2.22,15.76V405.43H209.38V205.88h64.18v27.77c9.34-13.3,23.93-32.44,57.88-32.44,42.13,0,74,27.77,74,87.64Z" fill="currentColor"/></svg>
        </div>
    </div>
</div>
</header>
<script>
    const btn = document.querySelector("div.mobile-menu-button")
    const mobileMenu = document.querySelector(".mobile-menu")
    const largeMenu = document.querySelector(".large-menu")
    const socialButtons = document.querySelector(".social-buttons")

    btn.addEventListener("click", () =>{
        openMenu();
    })

    function openMenu() {
        mobileMenu.classList.toggle("hidden");
        largeMenu.classList.toggle("hidden");
        socialButtons.classList.add("hidden");
    }

    
    const smSize = 640;
    const mdSize = 768;
    const largeSize = 1024;
    window.addEventListener('resize', function(event) {
        if (event.target.screen.width > smSize ){
            mobileMenu.classList.add("hidden");
            largeMenu.classList.remove("hidden");
        }
    }, true);
</script>

		<div class="w-full bg-green-800 bg-opacity-10">
			<div class="pt-16"></div>
			<article class="w-full px-16 pt-4 pb-4 m-auto lg:w-11/12 bg-gray-50">
				<h1 class="pb-2 text-4xl">Advent of Code 2022</h1>
				<p>Published November 26, 2022</p>
				
				<div>
					<span>Tags:</span>
					
					<a href="../../tags/codeadvent">codeadvent</a>
					
					<a href="../../tags/python">python</a>
					
					<a href="../../tags/pyscript">pyscript</a>
					
				</div>
				
				
				<hr>
				<div>
					<style>
    /* Code tags not in highlight blocks */
    code:not(.nocode):not(.language-python){
        --tw-text-opacity: 1; 
        color: rgba(5, 120, 85, var(--tw-text-opacity));
    }
</style>
<p class="post-p">Another year, another 25 curious code challenges from <a href="https://adventofcode.com/">Advent of Code!</a> This year, I'll be attempting to make as many solutions as possible something you can run right here in your browser window via <a href="https://pyscript.net">PyScript</a>.</p>
<div id="TOC" class="w-auto pt-2 pb-4 pl-2 mr-2 -ml-2 align-top bg-gray-200">
    <p class="text-2xl relative-anchor" id="toc">Table of Contents</p>
    <div class="ml-8 font-semibold" id="toc-contents">
    </div>
</div>
<py-config class="hidden">
    packages = ['anytree']
    [[fetch]]
    files = ['utils.py']
</py-config>
<py-terminal></py-terminal>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day0'>Day 0 - Testing the Machinery</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">In preparation for this year's AoC, I've set up a Hugo templating system to allow me to quickly write and share each day's code. The setup will look much like this, with a brief explanation here, the code below, and an option to run live demos. The <code>get_input</code> function handles getting input from the textarea or file upload.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day0-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day0-upload-input" name="day0-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day0-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day0-run-btn" py-click="main_day0()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day0-upload-input')
            </py-script>
            <py-script src="day0/main.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day0-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day0="#day0-code" class="active tab code-title">day0.py</li>
         
    </ul>
    <div id="day0-code" data-tab-content-day0 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day0</span>():
    display(<span style="color:#c30">f</span><span style="color:#c30">&#34;Input given: </span><span style="color:#a00">{</span>get_input(<span style="color:#c30">&#39;day0&#39;</span>)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>,
         target<span style="color:#555">=</span><span style="color:#c30">&#34;day0-output&#34;</span>,
         append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)</code></pre></td></tr></table>
</div>
</div></div>
        
    </div>
     

</div>
<script>
    const tabsday0 = document.querySelectorAll('[data-tab-target-day0]')
    const tabContentsday0 = document.querySelectorAll('[data-tab-content-day0]')

    tabsday0.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay0)
            tabContentsday0.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday0.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day1_1'>Day 1: Calorie Counting (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">And we're off! As common for day 1 of AoC, this puzzle is is about making sure you can read input and identify line breaks, and do some very simple parsing.</p>
<p class="post-p">One way to solve this problem would be to calculate the sum of calories in every elf's pack, then find the max of those. Astute coders will notice that you don't need to actually hold all the packs in memory at once; you can calculate them one at a time and retain the highest value seen so far, which avoids undue memory usage. Python more-or-less does this for us if we use generator expressions for everything.</p>

    </div>
    <div>
        <div class="load-pyscript viz"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day1_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day1_1-upload-input" name="day1_1-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day1_1-output"></div>
                <div class="grid grid-cols-1 sm:grid-cols-2 sm:space-x-2">
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day1_1-run-btn" py-click="main_day1_1()">RUN</button></div>
                
                <div>
                    <py-script src="day1/viz_1.py"></py-script>
                    <div class="col-span-1"><button class="w-full py-2 run-vis-button" id="day1_1-run-btn" py-click="viz_day1_1()">RUN VISUALIZATION</button></div>
                </div>
                </div>
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day1_1-upload-input')
            </py-script>
            <py-script src="day1/main_1.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day1_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day1_1="#day1_1-code" class="active tab code-title">day1_1.py</li>
        <li data-tab-target-day1_1="#day1_1-viz-code" class="tab code-title">day1_1-viz.py</li> 
    </ul>
    <div id="day1_1-code" data-tab-content-day1_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day1_1</span>():
    elf_packs <span style="color:#555">=</span> (get_input(<span style="color:#c30">&#39;day1_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#39;</span>))
    elf_calories <span style="color:#555">=</span> (<span style="color:#366">sum</span>(<span style="color:#366">int</span>(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pack<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)) <span style="color:#069;font-weight:bold">for</span> pack <span style="color:#000;font-weight:bold">in</span> elf_packs)
    display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span><span style="color:#366">max</span>(elf_calories)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
         target<span style="color:#555">=</span><span style="color:#c30">&#34;day1_1-output&#34;</span>,
         append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)</code></pre></td></tr></table>
</div>
</div></div>
        
    </div>
    
    
    
    <div id="day1_1-viz-code" data-tab-content-day1_1 class="tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">js</span> <span style="color:#069;font-weight:bold">import</span> Chart, document, Object
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyodide.ffi</span> <span style="color:#069;font-weight:bold">import</span> to_js
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">asyncio</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">j</span>(obj):
    <span style="color:#069;font-weight:bold">return</span> to_js(obj, dict_converter<span style="color:#555">=</span>Object<span style="color:#555">.</span>fromEntries)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">viz_day1_1</span>():
    asyncio<span style="color:#555">.</span>ensure_future(viz_day1_1_coro())

<span style="color:#069;font-weight:bold">async</span> <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">viz_day1_1_coro</span>():
    <span style="color:#069;font-weight:bold">if</span> ctx<span style="color:#555">:=</span> document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day1_1-viz-canvas&#34;</span>) <span style="color:#000;font-weight:bold">is</span> <span style="color:#069;font-weight:bold">None</span>:
        ctx <span style="color:#555">=</span> document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;canvas&#34;</span>)
        ctx<span style="color:#555">.</span>id <span style="color:#555">=</span> <span style="color:#c30">&#34;day1_1-viz-canvas&#34;</span>
        parent <span style="color:#555">=</span> document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day1_1-viz&#34;</span>)
        parent<span style="color:#555">.</span>appendChild(ctx)
        parent<span style="color:#555">.</span>style<span style="color:#555">.</span>width<span style="color:#555">=</span><span style="color:#c30">&#34;48rem&#34;</span>
        parent<span style="color:#555">.</span>style<span style="color:#555">.</span>height<span style="color:#555">=</span><span style="color:#c30">&#34;24rem&#34;</span>
        parent<span style="color:#555">.</span>style<span style="color:#555">.</span>position <span style="color:#555">=</span> <span style="color:#c30">&#39;relative&#39;</span>

    elf_packs <span style="color:#555">=</span> (get_input(<span style="color:#c30">&#39;day1_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#39;</span>))
    elf_calories <span style="color:#555">=</span> [<span style="color:#366">sum</span>(<span style="color:#366">int</span>(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pack<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)) <span style="color:#069;font-weight:bold">for</span> pack <span style="color:#000;font-weight:bold">in</span> elf_packs]
    most <span style="color:#555">=</span> <span style="color:#366">max</span>(elf_calories)
    most_index <span style="color:#555">=</span> elf_calories<span style="color:#555">.</span>index(most)

    display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span><span style="color:#366">max</span>(elf_calories)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
         target<span style="color:#555">=</span><span style="color:#c30">&#34;day1_1-output&#34;</span>,
         append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)

    my_chart <span style="color:#555">=</span> Chart<span style="color:#555">.</span>new(ctx, j({
        <span style="color:#c30">&#34;type&#34;</span>: <span style="color:#c30">&#34;bar&#34;</span>,
        <span style="color:#c30">&#34;data&#34;</span>: j({
            <span style="color:#c30">&#34;labels&#34;</span>: [<span style="color:#c30">f</span><span style="color:#c30">&#34;Elf </span><span style="color:#a00">{</span>i<span style="color:#a00">}</span><span style="color:#c30">&#34;</span> <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(elf_packs))],
            <span style="color:#c30">&#34;datasets&#34;</span>: [j({
                <span style="color:#c30">&#34;label&#34;</span>: <span style="color:#c30">&#34;data&#34;</span>,
                <span style="color:#c30">&#34;data&#34;</span>: elf_calories,
                <span style="color:#c30">&#34;stack&#34;</span>: <span style="color:#f60">1</span>,
                <span style="color:#c30">&#34;backgroundColor&#34;</span>: [<span style="color:#c30">&#39;rgba(75,192,192,0.4)&#39;</span> <span style="color:#069;font-weight:bold">if</span> cal <span style="color:#555">!=</span> most <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#39;red&#39;</span> <span style="color:#069;font-weight:bold">for</span> cal <span style="color:#000;font-weight:bold">in</span> elf_calories ] 
            })]
        }),
        <span style="color:#c30">&#34;options&#34;</span>: j({
            <span style="color:#c30">&#34;animation&#34;</span>: <span style="color:#069;font-weight:bold">False</span>,
            <span style="color:#c30">&#34;responsive&#34;</span>: <span style="color:#069;font-weight:bold">True</span>, 
            <span style="color:#c30">&#34;plugins&#34;</span>: j({
                <span style="color:#c30">&#34;legend&#34;</span>: j({
                    <span style="color:#c30">&#34;display&#34;</span>: <span style="color:#069;font-weight:bold">False</span>
                }),
            }),
            <span style="color:#c30">&#34;scales&#34;</span>: j({
                <span style="color:#c30">&#34;x&#34;</span>: j({
                    <span style="color:#c30">&#34;stacked&#34;</span>: <span style="color:#069;font-weight:bold">True</span>
                }),
                <span style="color:#c30">&#34;y&#34;</span>: j({
                    <span style="color:#c30">&#34;beginAtZero&#34;</span>: <span style="color:#069;font-weight:bold">True</span>
                })
            })
        })
    }))</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday1_1 = document.querySelectorAll('[data-tab-target-day1_1]')
    const tabContentsday1_1 = document.querySelectorAll('[data-tab-content-day1_1]')

    tabsday1_1.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay1_1)
            tabContentsday1_1.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday1_1.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day1_2'>Day 1: Calorie Counting (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Another common theme with Advent of Code - part 2 on a given day will try to subvert the optimizations you may have made in part 1!</p>
<p class="post-p">For a quick-and-dirty solution here, I'll use the <code>sorted</code> function to convert our generator into a sorted list, then sum the last (largest) three elements. If this were a larger list of elements, we could come up with our own generator that injested elements from an Iterable one by one, and retained the largest three.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day1_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day1_2-upload-input" name="day1_2-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day1_2-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day1_2-run-btn" py-click="main_day1_2()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day1_2-upload-input')
            </py-script>
            <py-script src="day1/main_2.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day1_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day1_2="#day1_2-code" class="active tab code-title">day1_2.py</li>
         
    </ul>
    <div id="day1_2-code" data-tab-content-day1_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day1_2</span>():
    elf_packs <span style="color:#555">=</span> (get_input(<span style="color:#c30">&#39;day1_2&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#39;</span>))
    elf_calories <span style="color:#555">=</span> <span style="color:#366">sorted</span>(<span style="color:#366">sum</span>(<span style="color:#366">int</span>(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pack<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)) <span style="color:#069;font-weight:bold">for</span> pack <span style="color:#000;font-weight:bold">in</span> elf_packs)
    display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span><span style="color:#366">sum</span>(elf_calories[<span style="color:#555">-</span><span style="color:#f60">3</span>:])<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
         target<span style="color:#555">=</span><span style="color:#c30">&#34;day1_2-output&#34;</span>,
         append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)</code></pre></td></tr></table>
</div>
</div></div>
        
    </div>
     

</div>
<script>
    const tabsday1_2 = document.querySelectorAll('[data-tab-target-day1_2]')
    const tabContentsday1_2 = document.querySelectorAll('[data-tab-content-day1_2]')

    tabsday1_2.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay1_2)
            tabContentsday1_2.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday1_2.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day2_1'>Day 2: Rock Paper Scissors (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Some slightly more complicated input handling today, with some slightly more involved conditional logic to accumulate a score</p>
<p class="post-p">It's also quite useful to me to be able to run these examples from the terminal, as well as in PyScript. If you look at the end of today's code, you'll see a use of checking whether we're running in pyodide (<code>if 'pyodide' in sys.modules</code>), and chosing where to snag the input from based on that determination.</code></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day2_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day2_1-upload-input" name="day2_1-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day2_1-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day2_1-run-btn" py-click="main_day2_1()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day2_1-upload-input')
            </py-script>
            <py-script src="day2/main_1.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day2_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day2_1="#day2_1-code" class="active tab code-title">day2_1.py</li>
         
    </ul>
    <div id="day2_1-code" data-tab-content-day2_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">translateLine</span>(s):
    <span style="color:#069;font-weight:bold">return</span> s<span style="color:#555">.</span>translate(<span style="color:#366">str</span><span style="color:#555">.</span>maketrans({<span style="color:#c30">&#34;A&#34;</span>: <span style="color:#c30">&#34;X&#34;</span>, <span style="color:#c30">&#34;B&#34;</span>: <span style="color:#c30">&#34;Y&#34;</span>, <span style="color:#c30">&#34;C&#34;</span>: <span style="color:#c30">&#34;Z&#34;</span>}))

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">scoreFromStrategy</span>(theirs, mine):
    selectedShapePoints <span style="color:#555">=</span> {<span style="color:#c30">&#34;X&#34;</span>: <span style="color:#f60">1</span>, <span style="color:#c30">&#34;Y&#34;</span>: <span style="color:#f60">2</span>, <span style="color:#c30">&#34;Z&#34;</span>: <span style="color:#f60">3</span>}
    points <span style="color:#555">=</span> selectedShapePoints[mine]
    <span style="color:#069;font-weight:bold">if</span> theirs <span style="color:#555">==</span> mine: <span style="color:#09f;font-style:italic">#draw</span>
        points <span style="color:#555">+=</span> <span style="color:#f60">3</span>
    <span style="color:#069;font-weight:bold">elif</span>  ((theirs, mine) <span style="color:#555">==</span> (<span style="color:#c30">&#34;X&#34;</span>, <span style="color:#c30">&#34;Y&#34;</span>) <span style="color:#000;font-weight:bold">or</span>
        (theirs, mine) <span style="color:#555">==</span> (<span style="color:#c30">&#34;Y&#34;</span>, <span style="color:#c30">&#34;Z&#34;</span>) <span style="color:#000;font-weight:bold">or</span>
        (theirs, mine) <span style="color:#555">==</span> (<span style="color:#c30">&#34;Z&#34;</span>, <span style="color:#c30">&#34;X&#34;</span>)): <span style="color:#09f;font-style:italic">#win</span>
        points <span style="color:#555">+=</span> <span style="color:#f60">6</span>
    <span style="color:#069;font-weight:bold">return</span> points

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">scoreFromInput</span>(data):
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(scoreFromStrategy(<span style="color:#555">*</span>translateLine(line)<span style="color:#555">.</span>split(<span style="color:#c30">&#34; &#34;</span>)) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day2_1</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day2_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>scoreFromInput(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day2_1-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)

<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">if</span> __name__ <span style="color:#555">==</span> <span style="color:#c30">&#34;__main__&#34;</span>:
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#39;input.txt&#39;</span>, <span style="color:#c30">&#39;r&#39;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
            data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
            <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>scoreFromInput(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>)</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday2_1 = document.querySelectorAll('[data-tab-target-day2_1]')
    const tabContentsday2_1 = document.querySelectorAll('[data-tab-content-day2_1]')

    tabsday2_1.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay2_1)
            tabContentsday2_1.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday2_1.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day2_2'>Day 2: Rock Paper Scissors (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">I fully admit to my solution here trying to be way too clever. The speediest way to solve this problem (both in execution time and in writing) would almost certainly be to create a looking table of the 9 possible input lines with their resultant scores, and just loop over the input and sum according to those scores.</p>
<p class="post-p">That said, this is a good chance to start stirring the brain cells on another common theme in Advnent of Code challenges - using one part of the input to determine how to interpret another part of the input.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day2_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day2_2-upload-input" name="day2_2-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day2_2-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day2_2-run-btn" py-click="main_day2_2()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day2_2-upload-input')
            </py-script>
            <py-script src="day2/main_2.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day2_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day2_2="#day2_2-code" class="active tab code-title">day2_2.py</li>
         
    </ul>
    <div id="day2_2-code" data-tab-content-day2_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> cycle
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">translateLine</span>(s):
    <span style="color:#069;font-weight:bold">return</span> s<span style="color:#555">.</span>translate(<span style="color:#366">str</span><span style="color:#555">.</span>maketrans({<span style="color:#c30">&#34;A&#34;</span>: <span style="color:#c30">&#34;X&#34;</span>, <span style="color:#c30">&#34;B&#34;</span>: <span style="color:#c30">&#34;Y&#34;</span>, <span style="color:#c30">&#34;C&#34;</span>: <span style="color:#c30">&#34;Z&#34;</span>}))

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">scoreFromStrategy</span>(theirs, result):
    theirsIndex <span style="color:#555">=</span> [<span style="color:#c30">&#34;X&#34;</span>, <span style="color:#c30">&#34;Y&#34;</span>, <span style="color:#c30">&#34;Z&#34;</span>]<span style="color:#555">.</span>index(theirs) <span style="color:#09f;font-style:italic"># X,Y,Z =&gt; 0,1,2</span>
    relativeIndex <span style="color:#555">=</span> {<span style="color:#c30">&#34;X&#34;</span>: <span style="color:#f60">2</span>, <span style="color:#c30">&#34;Y&#34;</span>: <span style="color:#f60">0</span>, <span style="color:#c30">&#34;Z&#34;</span>: <span style="color:#f60">1</span>} <span style="color:#09f;font-style:italic">#Offset by whether we lose, win, or draw</span>
    selectedShape <span style="color:#555">=</span> [<span style="color:#c30">&#34;X&#34;</span>, <span style="color:#c30">&#34;Y&#34;</span>, <span style="color:#c30">&#34;Z&#34;</span>][(theirsIndex <span style="color:#555">+</span> relativeIndex[result]) <span style="color:#555">%</span> <span style="color:#f60">3</span>] <span style="color:#09f;font-style:italic">#Find our choice</span>
    selectedShapePoints <span style="color:#555">=</span> {<span style="color:#c30">&#34;X&#34;</span>: <span style="color:#f60">1</span>, <span style="color:#c30">&#34;Y&#34;</span>: <span style="color:#f60">2</span>, <span style="color:#c30">&#34;Z&#34;</span>: <span style="color:#f60">3</span>} <span style="color:#09f;font-style:italic">#Points for our choice</span>

    resultPoints <span style="color:#555">=</span> {<span style="color:#c30">&#34;X&#34;</span>: <span style="color:#f60">0</span>, <span style="color:#c30">&#34;Y&#34;</span>: <span style="color:#f60">3</span>, <span style="color:#c30">&#34;Z&#34;</span>: <span style="color:#f60">6</span>}
    score <span style="color:#555">=</span> selectedShapePoints[selectedShape] <span style="color:#555">+</span> resultPoints[result]
    <span style="color:#069;font-weight:bold">return</span> score 

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">scoreFromInput</span>(data):
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(scoreFromStrategy(<span style="color:#555">*</span>translateLine(line)<span style="color:#555">.</span>split(<span style="color:#c30">&#34; &#34;</span>)) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day2_2</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day2_2&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>scoreFromInput(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day2_2-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)

<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">if</span> __name__ <span style="color:#555">==</span> <span style="color:#c30">&#34;__main__&#34;</span>:
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#39;input.txt&#39;</span>, <span style="color:#c30">&#39;r&#39;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
            data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
            <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>scoreFromInput(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>)</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday2_2 = document.querySelectorAll('[data-tab-target-day2_2]')
    const tabContentsday2_2 = document.querySelectorAll('[data-tab-content-day2_2]')

    tabsday2_2.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay2_2)
            tabContentsday2_2.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday2_2.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day3_1'>Day 3: Rucksack Reorganization (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">This is one of those neat days where one can use a neat feature of Python - set operations - to make finding common elements between two iterables fast and easy.</p>
<p class="post-p">On a whim, I <a href="https://youtu.be/VELprb8t9zg">hopped on a livestream</a> and whipped up a visualization of this part of the solution, which you can check out if you run the live examples on this page.</p>

    </div>
    <div>
        <div class="load-pyscript viz"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day3_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day3_1-upload-input" name="day3_1-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day3_1-output"></div>
                <div class="grid grid-cols-1 sm:grid-cols-2 sm:space-x-2">
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day3_1-run-btn" py-click="main_day3_1()">RUN</button></div>
                
                <div>
                    <py-script src="day3/viz_1.py"></py-script>
                    <div class="col-span-1"><button class="w-full py-2 run-vis-button" id="day3_1-run-btn" py-click="viz_day3_1()">RUN VISUALIZATION</button></div>
                </div>
                </div>
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day3_1-upload-input')
            </py-script>
            <py-script src="day3/main_1.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day3_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day3_1="#day3_1-code" class="active tab code-title">day3_1.py</li>
        <li data-tab-target-day3_1="#day3_1-viz-code" class="tab code-title">day3_1-viz.py</li> 
    </ul>
    <div id="day3_1-code" data-tab-content-day3_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">string</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

charValue <span style="color:#555">=</span> {s: index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">for</span> index, s <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(string<span style="color:#555">.</span>ascii_lowercase)} <span style="color:#555">|</span>\
            {s: index <span style="color:#555">+</span> <span style="color:#f60">27</span> <span style="color:#069;font-weight:bold">for</span> index, s <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(string<span style="color:#555">.</span>ascii_uppercase)}

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">prioritySum</span>(data):
    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>    
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        midpoint <span style="color:#555">=</span> <span style="color:#366">int</span>(<span style="color:#366">len</span>(line)<span style="color:#555">/</span><span style="color:#f60">2</span>)
        first <span style="color:#555">=</span> <span style="color:#366">set</span>(line[:midpoint])
        second <span style="color:#555">=</span> <span style="color:#366">set</span>(line[midpoint:])
        <span style="color:#366">sum</span> <span style="color:#555">+=</span> charValue[(first <span style="color:#555">&amp;</span> second)<span style="color:#555">.</span>pop()]
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day3_1</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day3_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>prioritySum(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day3_1-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)

<span style="color:#069;font-weight:bold">elif</span> __name__ <span style="color:#555">==</span> <span style="color:#c30">&#34;__main__&#34;</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()
    result <span style="color:#555">=</span> prioritySum(data<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>))
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>result<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>)


    </code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
    
    
    
    <div id="day3_1-viz-code" data-tab-content-day3_1 class="tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">string</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

charValue <span style="color:#555">=</span> {s: index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">for</span> index, s <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(string<span style="color:#555">.</span>ascii_lowercase)} <span style="color:#555">|</span>\
            {s: index <span style="color:#555">+</span> <span style="color:#f60">27</span> <span style="color:#069;font-weight:bold">for</span> index, s <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(string<span style="color:#555">.</span>ascii_uppercase)}

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">prioritySum</span>(data):
    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>    
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        midpoint <span style="color:#555">=</span> <span style="color:#366">int</span>(<span style="color:#366">len</span>(line)<span style="color:#555">/</span><span style="color:#f60">2</span>)
        first <span style="color:#555">=</span> <span style="color:#366">set</span>(line[:midpoint])
        second <span style="color:#555">=</span> <span style="color:#366">set</span>(line[midpoint:])
        <span style="color:#366">sum</span> <span style="color:#555">+=</span> charValue[(first <span style="color:#555">&amp;</span> second)<span style="color:#555">.</span>pop()]
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">visualizeProcessing</span>(data, tbody):    
    tbody<span style="color:#555">.</span>style<span style="color:#555">.</span>fontFamily <span style="color:#555">=</span> <span style="color:#c30">&#39;monospace&#39;</span>
    tbody<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#34;unformatted-table&#34;</span>)
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        row <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;tr&#39;</span>)
        scoreElement <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;td&#39;</span>)
        firstElement <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;td&#39;</span>)
        secondElement <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;td&#39;</span>)

        <span style="color:#09f;font-style:italic">#styling</span>
        row<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#34;bg-gray-900&#34;</span>, <span style="color:#c30">&#34;text-gray-300&#34;</span>)
        scoreElement<span style="color:#555">.</span>style<span style="color:#555">.</span>paddingRight <span style="color:#555">=</span> <span style="color:#c30">&#34;2rem&#34;</span>
        firstElement<span style="color:#555">.</span>style<span style="color:#555">.</span>textAlign <span style="color:#555">=</span> <span style="color:#c30">&#34;right&#34;</span>
        firstElement<span style="color:#555">.</span>style<span style="color:#555">.</span>paddingRight <span style="color:#555">=</span> <span style="color:#c30">&#34;0.5rem&#34;</span>

        <span style="color:#09f;font-style:italic">#Actually add the content</span>
        midpoint <span style="color:#555">=</span> <span style="color:#366">int</span>(<span style="color:#366">len</span>(line)<span style="color:#555">/</span><span style="color:#f60">2</span>)
        first <span style="color:#555">=</span> line[:midpoint]
        second <span style="color:#555">=</span> line[midpoint:]
        commonChar <span style="color:#555">=</span> (<span style="color:#366">set</span>(first) <span style="color:#555">&amp;</span> <span style="color:#366">set</span>(second))<span style="color:#555">.</span>pop()
        score <span style="color:#555">=</span> charValue[commonChar]

        first <span style="color:#555">=</span> first<span style="color:#555">.</span>replace(commonChar, <span style="color:#c30">f</span><span style="color:#c30">&#39;&lt;span style=&#34;text-shadow: 0 0 5px #ffffff; color: rgb(255, 255, 255)&#34;&gt;</span><span style="color:#a00">{</span>commonChar<span style="color:#a00">}</span><span style="color:#c30">&lt;/span&gt;&#39;</span>)
        second <span style="color:#555">=</span> second<span style="color:#555">.</span>replace(commonChar, <span style="color:#c30">f</span><span style="color:#c30">&#39;&lt;span style=&#34;text-shadow: 0 0 5px #ffffff; color: rgb(255, 255, 255)&#34;&gt;</span><span style="color:#a00">{</span>commonChar<span style="color:#a00">}</span><span style="color:#c30">&lt;/span&gt;&#39;</span>)

        <span style="color:#09f;font-style:italic">#Format and insert text</span>
        firstElement<span style="color:#555">.</span>innerHTML <span style="color:#555">=</span> <span style="color:#c30">&#34;&lt;span&gt;&#34;</span> <span style="color:#555">+</span> first <span style="color:#555">+</span> <span style="color:#c30">&#34;&lt;/span&gt;&#34;</span>
        secondElement<span style="color:#555">.</span>innerHTML <span style="color:#555">=</span> <span style="color:#c30">&#34;&lt;span&gt;&#34;</span> <span style="color:#555">+</span> second <span style="color:#555">+</span> <span style="color:#c30">&#34;&lt;/span&gt;&#34;</span>
        scoreElement<span style="color:#555">.</span>innerHTML <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;&lt;span&gt;</span><span style="color:#a00">{</span>commonChar<span style="color:#a00">}</span><span style="color:#c30">=</span><span style="color:#a00">{</span>score<span style="color:#a00">}</span><span style="color:#c30">&lt;/span&gt;&#34;</span>

        row<span style="color:#555">.</span>appendChild(scoreElement)
        row<span style="color:#555">.</span>appendChild(firstElement)
        row<span style="color:#555">.</span>appendChild(secondElement)
        tbody<span style="color:#555">.</span>appendChild(row)

    <span style="color:#09f;font-style:italic">#grayRows = js.document.querySelectorAll(&#34;tbody tr:nth-child(2n-1)&#34;)</span>
    grayRows <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>querySelectorAll(<span style="color:#c30">&#34;tr&#34;</span>)
    <span style="color:#069;font-weight:bold">for</span> row <span style="color:#000;font-weight:bold">in</span> grayRows:
        js<span style="color:#555">.</span>console<span style="color:#555">.</span>log(row<span style="color:#555">.</span>style)
        row<span style="color:#555">.</span>style<span style="color:#555">.</span>removeProperty(<span style="color:#c30">&#34;background-color&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">setupTable</span>():
    <span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">js</span>
    table <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;table&#39;</span>)
    table<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#34;w-full&#34;</span>)
    tbody <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;tbody&#39;</span>)
    table<span style="color:#555">.</span>appendChild(tbody)
    vizelem <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day3_1-viz&#34;</span>)
    vizelem<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#34;w-full&#34;</span>)
    vizelem<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#34;h-76&#34;</span>)
    vizelem<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#34;overflow-y-scroll&#34;</span>)
    vizelem<span style="color:#555">.</span>appendChild(table)
    <span style="color:#069;font-weight:bold">return</span> tbody

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">js</span>
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">viz_day3_1</span>():
        tbody <span style="color:#555">=</span> setupTable()
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day3_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        visualizeProcessing(data, tbody)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>prioritySum(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day3_1-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)

<span style="color:#069;font-weight:bold">elif</span> __name__ <span style="color:#555">==</span> <span style="color:#c30">&#34;__main__&#34;</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()
    result <span style="color:#555">=</span> prioritySum(data<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>))
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>result<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>)
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday3_1 = document.querySelectorAll('[data-tab-target-day3_1]')
    const tabContentsday3_1 = document.querySelectorAll('[data-tab-content-day3_1]')

    tabsday3_1.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay3_1)
            tabContentsday3_1.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday3_1.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day3_2'>Day 3: Rucksack Reorganization (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Similar to part 1, part 2 is much easier if you use your chosen language's set operations to quickly narrow down the given elements to only the ones common between each trio of elves. I suppose the "gotcha" in this part is meant to catch out anyone who implemented a nested-for-loop, check-each-element-one-by-one solution to part 1.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day3_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day3_2-upload-input" name="day3_2-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day3_2-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day3_2-run-btn" py-click="main_day3_2()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day3_2-upload-input')
            </py-script>
            <py-script src="day3/main_2.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day3_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day3_2="#day3_2-code" class="active tab code-title">day3_2.py</li>
         
    </ul>
    <div id="day3_2-code" data-tab-content-day3_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">string</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Collection

charValue <span style="color:#555">=</span> {s: index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">for</span> index, s <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(string<span style="color:#555">.</span>ascii_lowercase)} <span style="color:#555">|</span>\
            {s: index <span style="color:#555">+</span> <span style="color:#f60">27</span> <span style="color:#069;font-weight:bold">for</span> index, s <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(string<span style="color:#555">.</span>ascii_uppercase)}
        
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">scoreBy3</span>(data):
    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> index, a <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data[::<span style="color:#f60">3</span>]):
        b <span style="color:#555">=</span> data[index<span style="color:#555">*</span><span style="color:#f60">3</span> <span style="color:#555">+</span> <span style="color:#f60">1</span>]
        c <span style="color:#555">=</span> data[index<span style="color:#555">*</span><span style="color:#f60">3</span> <span style="color:#555">+</span> <span style="color:#f60">2</span>]
        common <span style="color:#555">=</span> (<span style="color:#366">set</span>(a) <span style="color:#555">&amp;</span> <span style="color:#366">set</span>(b) <span style="color:#555">&amp;</span> <span style="color:#366">set</span>(c))
        
        <span style="color:#069;font-weight:bold">assert</span> <span style="color:#366">len</span>(common) <span style="color:#555">==</span> <span style="color:#f60">1</span>
        common <span style="color:#555">=</span> common<span style="color:#555">.</span>pop()

        score <span style="color:#555">=</span> charValue[common]
        <span style="color:#366">sum</span> <span style="color:#555">+=</span> score
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day3_2</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day3_2&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>scoreBy3(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day3_2-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)

<span style="color:#069;font-weight:bold">elif</span> __name__ <span style="color:#555">==</span> <span style="color:#c30">&#34;__main__&#34;</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()
    result <span style="color:#555">=</span> scoreBy3(data<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>))
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>result<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>)

    </code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday3_2 = document.querySelectorAll('[data-tab-target-day3_2]')
    const tabContentsday3_2 = document.querySelectorAll('[data-tab-content-day3_2]')

    tabsday3_2.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay3_2)
            tabContentsday3_2.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday3_2.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day4_1'>Day 4: Camp Cleanup (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Some year, somewhere, I shant be tricked by forgetting to convert input strings to integers.</p>
<p class="post-p">This is not that year apparently. The provided example input works if you only compair the inputs alphanumerically, since it only uses single-digit numbers, but the real input only yields the correct solution if you remember to convert the inputs to integers.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day4_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day4_1-upload-input" name="day4_1-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day4_1-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day4_1-run-btn" py-click="main_day4_1()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day4_1-upload-input')
            </py-script>
            <py-script src="day4/main_1.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day4_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day4_1="#day4_1-code" class="active tab code-title">day4_1.py</li>
         
    </ul>
    <div id="day4_1-code" data-tab-content-day4_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">fullyContains</span>(a: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>] , b: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#069;font-weight:bold">return</span> a[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> b[<span style="color:#f60">0</span>] <span style="color:#000;font-weight:bold">and</span> a[<span style="color:#f60">1</span>] <span style="color:#555">&gt;=</span> b[<span style="color:#f60">1</span>]

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">solutionFromInput</span>(data):
    pairs <span style="color:#555">=</span> (line<span style="color:#555">.</span>split(<span style="color:#c30">&#39;,&#39;</span>) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data)
    pairs <span style="color:#555">=</span> ((p[<span style="color:#f60">0</span>]<span style="color:#555">.</span>split(<span style="color:#c30">&#39;-&#39;</span>), p[<span style="color:#f60">1</span>]<span style="color:#555">.</span>split(<span style="color:#c30">&#39;-&#39;</span>)) <span style="color:#069;font-weight:bold">for</span> p <span style="color:#000;font-weight:bold">in</span> pairs)
    pairs <span style="color:#555">=</span> (((<span style="color:#366">int</span>(p[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>]), <span style="color:#366">int</span>(p[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>])), (<span style="color:#366">int</span>(p[<span style="color:#f60">1</span>][<span style="color:#f60">0</span>]), <span style="color:#366">int</span>(p[<span style="color:#f60">1</span>][<span style="color:#f60">1</span>]))) <span style="color:#069;font-weight:bold">for</span> p <span style="color:#000;font-weight:bold">in</span> pairs)
    matches <span style="color:#555">=</span> (fullyContains(pair[<span style="color:#f60">0</span>], pair[<span style="color:#f60">1</span>]) <span style="color:#000;font-weight:bold">or</span> fullyContains(pair[<span style="color:#f60">1</span>],pair[<span style="color:#f60">0</span>]) <span style="color:#069;font-weight:bold">for</span> pair <span style="color:#000;font-weight:bold">in</span> pairs)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(<span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">if</span> m <span style="color:#069;font-weight:bold">else</span> <span style="color:#f60">0</span> <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> matches)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day4_1</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day4_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>solutionFromInput(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day4_1-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">if</span> __name__ <span style="color:#555">==</span> <span style="color:#c30">&#34;__main__&#34;</span>:
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
            data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
        <span style="color:#366">print</span>(solutionFromInput(data))
       </code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday4_1 = document.querySelectorAll('[data-tab-target-day4_1]')
    const tabContentsday4_1 = document.querySelectorAll('[data-tab-content-day4_1]')

    tabsday4_1.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay4_1)
            tabContentsday4_1.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday4_1.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day4_2'>Day 4: Camp Cleanup (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">I'm certain there's a more clever way to determine whether two ranges overlap; I've used the brute-force method to check if either of the endpoints of each pair lies within (or equals) the endpoints of the other pair. I have a feeling, from the symmetry of the boolean logic, that it could be simplified somehow, but this is functional.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day4_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day4_2-upload-input" name="day4_2-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day4_2-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day4_2-run-btn" py-click="main_day4_2()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day4_2-upload-input')
            </py-script>
            <py-script src="day4/main_2.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day4_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day4_2="#day4_2-code" class="active tab code-title">day4_2.py</li>
         
    </ul>
    <div id="day4_2-code" data-tab-content-day4_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">overlaps</span>(a: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>] , b: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#069;font-weight:bold">return</span> (a[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> b[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> a[<span style="color:#f60">1</span>]) <span style="color:#000;font-weight:bold">or</span> (a[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> b[<span style="color:#f60">1</span>] <span style="color:#555">&lt;=</span> a[<span style="color:#f60">1</span>]) <span style="color:#000;font-weight:bold">or</span> \
           (b[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> a[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> b[<span style="color:#f60">1</span>]) <span style="color:#000;font-weight:bold">or</span> (b[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> a[<span style="color:#f60">1</span>] <span style="color:#555">&lt;=</span> b[<span style="color:#f60">1</span>])

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">solutionFromInput</span>(data):
    pairs <span style="color:#555">=</span> (line<span style="color:#555">.</span>split(<span style="color:#c30">&#39;,&#39;</span>) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data)
    pairs <span style="color:#555">=</span> ((p[<span style="color:#f60">0</span>]<span style="color:#555">.</span>split(<span style="color:#c30">&#39;-&#39;</span>), p[<span style="color:#f60">1</span>]<span style="color:#555">.</span>split(<span style="color:#c30">&#39;-&#39;</span>)) <span style="color:#069;font-weight:bold">for</span> p <span style="color:#000;font-weight:bold">in</span> pairs)
    pairs <span style="color:#555">=</span> (((<span style="color:#366">int</span>(p[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>]), <span style="color:#366">int</span>(p[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>])), (<span style="color:#366">int</span>(p[<span style="color:#f60">1</span>][<span style="color:#f60">0</span>]), <span style="color:#366">int</span>(p[<span style="color:#f60">1</span>][<span style="color:#f60">1</span>]))) <span style="color:#069;font-weight:bold">for</span> p <span style="color:#000;font-weight:bold">in</span> pairs)
    matches <span style="color:#555">=</span> (overlaps(pair[<span style="color:#f60">0</span>], pair[<span style="color:#f60">1</span>]) <span style="color:#069;font-weight:bold">for</span> pair <span style="color:#000;font-weight:bold">in</span> pairs)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(<span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">if</span> m <span style="color:#069;font-weight:bold">else</span> <span style="color:#f60">0</span> <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> matches)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day4_2</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day4_2&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        <span style="color:#366">print</span>(data)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>solutionFromInput(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day4_2-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">if</span> __name__ <span style="color:#555">==</span> <span style="color:#c30">&#34;__main__&#34;</span>:
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
            data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
        <span style="color:#366">print</span>(solutionFromInput(data))
       </code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday4_2 = document.querySelectorAll('[data-tab-target-day4_2]')
    const tabContentsday4_2 = document.querySelectorAll('[data-tab-content-day4_2]')

    tabsday4_2.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay4_2)
            tabContentsday4_2.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday4_2.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day5_1'>Day 5: Supply Stacks (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">As I've experienced in previous years, the process of identifying a strategy or algorithm to solve a problem, and the creating the data structure for that algorithm, go hand in hand.</p><p class="post-p">In today's case, the fact that the input is presented row-by-row, but the data is relevant column-by-column, means that a cerain amount of input processessing is necessary to make the data useful. But once it is, the solution is relatively straightfoward.</p>

    </div>
    <div>
        <div class="load-pyscript viz"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day5_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day5_1-upload-input" name="day5_1-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day5_1-output"></div>
                <div class="grid grid-cols-1 sm:grid-cols-2 sm:space-x-2">
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day5_1-run-btn" py-click="main_day5_1()">RUN</button></div>
                
                <div>
                    <py-script src="day5/viz_1.py"></py-script>
                    <div class="col-span-1"><button class="w-full py-2 run-vis-button" id="day5_1-run-btn" py-click="viz_day5_1()">RUN VISUALIZATION</button></div>
                </div>
                </div>
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day5_1-upload-input')
            </py-script>
            <py-script src="day5/main_1.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day5_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day5_1="#day5_1-code" class="active tab code-title">day5_1.py</li>
        <li data-tab-target-day5_1="#day5_1-viz-code" class="tab code-title">day5_1-viz.py</li> 
    </ul>
    <div id="day5_1-code" data-tab-content-day5_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> NamedTuple
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> NewType

<span style="color:#09f;font-style:italic"># The &#39;yard&#39; is the collection of all the stacks of crates</span>
yardType <span style="color:#555">=</span> NewType(<span style="color:#c30">&#34;yardType&#34;</span>, <span style="color:#366">dict</span>[<span style="color:#366">str</span>:<span style="color:#366">list</span>])

<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Instruction</span>(NamedTuple):
    quantity: <span style="color:#366">int</span>
    from_stack: <span style="color:#366">str</span>
    to_stack: <span style="color:#366">str</span>
    <span style="color:#09f;font-style:italic">#(&#34;Instruction&#34;, (&#39;quantity&#39;, &#39;from_stack&#39;, &#39;to_stack&#39;))</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">solutionFromInput</span>(data: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    data <span style="color:#555">=</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    stacks, instructions <span style="color:#555">=</span> parseInput(data)
    <span style="color:#069;font-weight:bold">for</span> ins <span style="color:#000;font-weight:bold">in</span> instructions:
        stacks <span style="color:#555">=</span> operateOn(stacks, ins)
    <span style="color:#069;font-weight:bold">return</span> topCrates(stacks)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">parseInput</span>(data: <span style="color:#366">list</span>[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">tuple</span>[yardType, <span style="color:#366">list</span>[Instruction]]:
    firstBlankLine <span style="color:#555">=</span> data<span style="color:#555">.</span>index(<span style="color:#c30">&#34;&#34;</span>)
    cratePositions <span style="color:#555">=</span> data[:firstBlankLine]
    cratePositions<span style="color:#555">.</span>reverse() <span style="color:#09f;font-style:italic">#ordered bottom to top</span>
    instructionLines <span style="color:#555">=</span> data[firstBlankLine<span style="color:#555">+</span><span style="color:#f60">1</span>:]

    <span style="color:#09f;font-style:italic"># Create crate data struction</span>
    crateNameLine <span style="color:#555">=</span> cratePositions[<span style="color:#f60">0</span>] <span style="color:#09f;font-style:italic">#get crate labels from line</span>
    crates <span style="color:#555">=</span> {name: [] <span style="color:#069;font-weight:bold">for</span> name <span style="color:#000;font-weight:bold">in</span> crateNameLine<span style="color:#555">.</span>split()} <span style="color:#09f;font-style:italic">#create dicts per line</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> cratePositions[<span style="color:#f60">1</span>:]:
        <span style="color:#069;font-weight:bold">for</span> index, crateName <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line[<span style="color:#f60">1</span>::<span style="color:#f60">4</span>]):
            <span style="color:#069;font-weight:bold">if</span> crateName <span style="color:#555">!=</span> <span style="color:#c30">&#34; &#34;</span>:
                crates[<span style="color:#366">str</span>(crateNameLine[index<span style="color:#555">*</span><span style="color:#f60">4</span> <span style="color:#555">+</span> <span style="color:#f60">1</span>])]<span style="color:#555">.</span>append(crateName) <span style="color:#09f;font-style:italic">#Add crate to list</span>
    
    <span style="color:#09f;font-style:italic"># Parse instructions</span>
    instructions <span style="color:#555">=</span> []
    <span style="color:#069;font-weight:bold">for</span> ins <span style="color:#000;font-weight:bold">in</span> instructionLines:
        match <span style="color:#555">=</span> re<span style="color:#555">.</span>match(<span style="color:#c30">r</span><span style="color:#c30">&#39;move (?P&lt;num&gt;\d+) from (?P&lt;from_stack&gt;\d+) to (?P&lt;to_stack&gt;\d+)&#39;</span>, ins)
        num, from_stack, to_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;num&#39;</span>), match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;from_stack&#39;</span>), match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;to_stack&#39;</span>)

        instructions<span style="color:#555">.</span>append(Instruction(
                quantity <span style="color:#555">=</span> <span style="color:#366">int</span>(match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;num&#39;</span>)),
                from_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;from_stack&#39;</span>),
                to_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;to_stack&#39;</span>)
            ))
    
    <span style="color:#069;font-weight:bold">return</span> (crates, instructions)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">operateOn</span>(crates: yardType, ins: Instruction) <span style="color:#555">-&gt;</span> yardType:
    <span style="color:#09f;font-style:italic">#printCrates(crates)</span>
    <span style="color:#069;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(ins<span style="color:#555">.</span>quantity):
        crates[ins<span style="color:#555">.</span>to_stack]<span style="color:#555">.</span>append(crates[ins<span style="color:#555">.</span>from_stack]<span style="color:#555">.</span>pop())
    <span style="color:#069;font-weight:bold">return</span> crates

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">topCrates</span>(crates: yardType):
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join([stack<span style="color:#555">.</span>pop() <span style="color:#069;font-weight:bold">for</span> stack <span style="color:#000;font-weight:bold">in</span> crates<span style="color:#555">.</span>values()])
    

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day5_1</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day5_1&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>solutionFromInput(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day5_1-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;inputtest.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()
    <span style="color:#366">print</span>(solutionFromInput(data))</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
    
    
    
    <div id="day5_1-viz-code" data-tab-content-day5_1 class="tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">224
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">225
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">226
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">227
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">228
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">229
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">230
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">231
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">232
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">233
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">234
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">235
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">236
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">237
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">238
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">239
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">240
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">241
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">242
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">243
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">244
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">245
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">246
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">247
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">248
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">249
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">250
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">251
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">252
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">253
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">254
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">255
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">256
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">viz_day5_1</span>():
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> NamedTuple
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">functools</span> <span style="color:#069;font-weight:bold">import</span> partial
    <span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

    <span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">js</span>
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">js</span> <span style="color:#069;font-weight:bold">import</span> anime, Object
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyodide.ffi</span> <span style="color:#069;font-weight:bold">import</span> to_js, create_proxy
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyodide.ffi.wrappers</span> <span style="color:#069;font-weight:bold">import</span> add_event_listener

    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> NewType

    <span style="color:#09f;font-style:italic"># The &#39;yard&#39; is the collection of all the stacks of crates</span>
    yardType <span style="color:#555">=</span> NewType(<span style="color:#c30">&#34;yardType&#34;</span>, <span style="color:#366">dict</span>[<span style="color:#366">str</span>:<span style="color:#366">list</span>])

    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Instruction</span>(NamedTuple):
        quantity: <span style="color:#366">int</span>
        from_stack: <span style="color:#366">str</span>
        to_stack: <span style="color:#366">str</span>

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">j</span>(obj):
        <span style="color:#069;font-weight:bold">return</span> to_js(obj, dict_converter<span style="color:#555">=</span>Object<span style="color:#555">.</span>fromEntries)

    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day5_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)        

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">parseInput</span>(data: <span style="color:#366">list</span>[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">tuple</span>[yardType, <span style="color:#366">list</span>[Instruction]]:
        firstBlankLine <span style="color:#555">=</span> data<span style="color:#555">.</span>index(<span style="color:#c30">&#34;&#34;</span>)
        cratePositions <span style="color:#555">=</span> data[:firstBlankLine]
        cratePositions<span style="color:#555">.</span>reverse() <span style="color:#09f;font-style:italic">#ordered bottorstBlankLine = data.index(&#34;&#34;)</span>
        cratePositions <span style="color:#555">=</span> data[:firstBlankLine]
        cratePositions<span style="color:#555">.</span>reverse() <span style="color:#09f;font-style:italic">#ordered bottom to top</span>
        instructionLines <span style="color:#555">=</span> data[firstBlankLine<span style="color:#555">+</span><span style="color:#f60">1</span>:]

        <span style="color:#09f;font-style:italic"># Create crate data struction</span>
        crateNameLine <span style="color:#555">=</span> cratePositions[<span style="color:#f60">0</span>] <span style="color:#09f;font-style:italic">#get crate labels from line</span>
        crates <span style="color:#555">=</span> {name: [] <span style="color:#069;font-weight:bold">for</span> name <span style="color:#000;font-weight:bold">in</span> crateNameLine<span style="color:#555">.</span>split()} <span style="color:#09f;font-style:italic">#create dicts per line</span>
        <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> cratePositions[<span style="color:#f60">1</span>:]:
            <span style="color:#069;font-weight:bold">for</span> index, crateName <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line[<span style="color:#f60">1</span>::<span style="color:#f60">4</span>]):
                <span style="color:#069;font-weight:bold">if</span> crateName <span style="color:#555">!=</span> <span style="color:#c30">&#34; &#34;</span>:
                    crates[<span style="color:#366">str</span>(crateNameLine[index<span style="color:#555">*</span><span style="color:#f60">4</span> <span style="color:#555">+</span> <span style="color:#f60">1</span>])]<span style="color:#555">.</span>append(crateName) <span style="color:#09f;font-style:italic">#Add crate to list</span>
        
        <span style="color:#09f;font-style:italic"># Parse instructions</span>
        instructions <span style="color:#555">=</span> []
        <span style="color:#069;font-weight:bold">for</span> ins <span style="color:#000;font-weight:bold">in</span> instructionLines:
            match <span style="color:#555">=</span> re<span style="color:#555">.</span>match(<span style="color:#c30">r</span><span style="color:#c30">&#39;move (?P&lt;num&gt;\d+) from (?P&lt;from_stack&gt;\d+) to (?P&lt;to_stack&gt;\d+)&#39;</span>, ins)
            num, from_stack, to_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;num&#39;</span>), match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;from_stack&#39;</span>), match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;to_stack&#39;</span>)

            instructions<span style="color:#555">.</span>append(Instruction(
                    quantity <span style="color:#555">=</span> <span style="color:#366">int</span>(match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;num&#39;</span>)),
                    from_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;from_stack&#39;</span>),
                    to_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;to_stack&#39;</span>)
                ))
        
        <span style="color:#069;font-weight:bold">return</span> (crates, instructions)

    yard, instructions <span style="color:#555">=</span> parseInput(data)

    <span style="color:#99f">@dataclass</span>
    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Crate</span>():
        label:<span style="color:#366">str</span>
        element:<span style="color:#366">object</span>

        <span style="color:#069;font-weight:bold">def</span> __str__(self):
            <span style="color:#069;font-weight:bold">return</span> self<span style="color:#555">.</span>label

    <span style="color:#99f">@dataclass</span>
    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Stack</span>():
        crates: <span style="color:#366">list</span>
        x: <span style="color:#366">int</span>

    overall <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day5_1-viz&#34;</span>)
    overall<span style="color:#555">.</span>style<span style="color:#555">.</span>margin <span style="color:#555">=</span> <span style="color:#c30">&#34;50px 50px 50px 50px&#34;</span>
    overall<span style="color:#555">.</span>style<span style="color:#555">.</span>position <span style="color:#555">=</span> <span style="color:#c30">&#34;relative&#34;</span>
    div <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;div&#39;</span>)
    overall<span style="color:#555">.</span>appendChild(div)

    divHeight <span style="color:#555">=</span> <span style="color:#f60">800</span>
    divWidth <span style="color:#555">=</span> <span style="color:#f60">600</span>

    startColor <span style="color:#555">=</span> <span style="color:#c30">&#34;Aquamarine&#34;</span>
    endColor <span style="color:#555">=</span> <span style="color:#c30">&#34;green&#34;</span>

    div<span style="color:#555">.</span>style<span style="color:#555">.</span>height <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>divHeight<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
    div<span style="color:#555">.</span>style<span style="color:#555">.</span>width <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>divWidth<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
    div<span style="color:#555">.</span>style<span style="color:#555">.</span>backgroundColor <span style="color:#555">=</span> <span style="color:#c30">&#34;#eee&#34;</span>

    floorY <span style="color:#555">=</span> divHeight <span style="color:#555">-</span> <span style="color:#f60">100</span>

    floor <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;div&#39;</span>)
    floor<span style="color:#555">.</span>id <span style="color:#555">=</span> <span style="color:#c30">&#34;floor&#34;</span>
    floor<span style="color:#555">.</span>style<span style="color:#555">.</span>backgroundColor <span style="color:#555">=</span> <span style="color:#c30">&#34;#777&#34;</span>
    floor<span style="color:#555">.</span>style<span style="color:#555">.</span>position <span style="color:#555">=</span> <span style="color:#c30">&#34;absolute&#34;</span>
    floor<span style="color:#555">.</span>style<span style="color:#555">.</span>height <span style="color:#555">=</span> <span style="color:#c30">&#34;10px&#34;</span>
    floor<span style="color:#555">.</span>style<span style="color:#555">.</span>width <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>divWidth<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
    floor<span style="color:#555">.</span>style<span style="color:#555">.</span>bottom <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>divHeight<span style="color:#555">-</span>floorY<span style="color:#555">-</span><span style="color:#f60">10</span><span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
    floor<span style="color:#555">.</span>style<span style="color:#555">.</span>left <span style="color:#555">=</span> <span style="color:#c30">&#34;0px&#34;</span>
    overall<span style="color:#555">.</span>appendChild(floor)

    textOutput <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;div&#34;</span>)
    textOutput<span style="color:#555">.</span>id <span style="color:#555">=</span> <span style="color:#c30">&#34;day5_1_text_output&#34;</span>
    overall<span style="color:#555">.</span>parentNode<span style="color:#555">.</span>insertBefore(textOutput, overall<span style="color:#555">.</span>nextSibling)

    <span style="color:#09f;font-style:italic">#&lt;button onclick=&#34;startAnimation()&#34;&gt;Play&lt;/button&gt;</span>
    <span style="color:#09f;font-style:italic">#js.startAnimation = myTimeline.play</span>
    playButton <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;button&#34;</span>)
    playButton<span style="color:#555">.</span>innerText <span style="color:#555">=</span> <span style="color:#c30">&#34;Play&#34;</span>
    playButton<span style="color:#555">.</span>style<span style="color:#555">.</span>padding <span style="color:#555">=</span> <span style="color:#c30">&#34;.5rem 1rem .5rem 1rem&#34;</span>
    playButton<span style="color:#555">.</span>style<span style="color:#555">.</span>border <span style="color:#555">=</span> <span style="color:#c30">&#34;2px solid #2c2e34&#34;</span>
    playButton<span style="color:#555">.</span>style<span style="color:#555">.</span>backgroundColor <span style="color:#555">=</span> <span style="color:#c30">&#34;#bbf7d0&#34;</span>
    

    <span style="color:#09f;font-style:italic">#&lt;button onclick=&#34;stopAnimation()&#34;&gt;Pause&lt;/button&gt;</span>
    <span style="color:#09f;font-style:italic">#js.stopAnimation = myTimeline.pause</span>
    pauseButton <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;button&#34;</span>)
    pauseButton<span style="color:#555">.</span>innerText <span style="color:#555">=</span> <span style="color:#c30">&#34;Pause&#34;</span>
    pauseButton<span style="color:#555">.</span>style<span style="color:#555">.</span>padding <span style="color:#555">=</span> <span style="color:#c30">&#34;.5rem 1rem .5rem 1rem&#34;</span>
    pauseButton<span style="color:#555">.</span>style<span style="color:#555">.</span>border <span style="color:#555">=</span> <span style="color:#c30">&#34;2px solid #2c2e34&#34;</span>
    pauseButton<span style="color:#555">.</span>style<span style="color:#555">.</span>backgroundColor <span style="color:#555">=</span> <span style="color:#c30">&#34;#fef08a&#34;</span>

    <span style="color:#09f;font-style:italic">#&lt;input type=&#34;range&#34; id=&#34;seekbar&#34; min=&#34;0&#34; max=&#34;100&#34; value=&#34;0&#34; oninput=&#34;myTimeline.pause();myTimeline.seek(myTimeline.duration * (this.value/100))&#34; style=&#34;width: 100%&#34;&gt;&lt;/progress&gt;</span>
    seekbar <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;input&#34;</span>)
    seekbar<span style="color:#555">.</span>type <span style="color:#555">=</span> <span style="color:#c30">&#34;range&#34;</span>
    seekbar<span style="color:#555">.</span>id <span style="color:#555">=</span> <span style="color:#c30">&#34;seekbar&#34;</span>
    seekbar<span style="color:#555">.</span>min <span style="color:#555">=</span> <span style="color:#c30">&#34;0&#34;</span>
    seekbar<span style="color:#555">.</span>max <span style="color:#555">=</span> <span style="color:#c30">&#34;100&#34;</span>
    seekbar<span style="color:#555">.</span>value <span style="color:#555">=</span> <span style="color:#c30">&#34;0&#34;</span>
    seekbar<span style="color:#555">.</span>style<span style="color:#555">.</span>width <span style="color:#555">=</span> <span style="color:#c30">&#34;400px&#34;</span>

    controlHolder <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;div&#34;</span>)
    controlHolder<span style="color:#555">.</span>id <span style="color:#555">=</span> <span style="color:#c30">&#34;day5_2_controls&#34;</span>
    controlHolder<span style="color:#555">.</span>appendChild(playButton)
    controlHolder<span style="color:#555">.</span>appendChild(pauseButton)
    controlHolder<span style="color:#555">.</span>appendChild(seekbar)
    controlHolder<span style="color:#555">.</span>style<span style="color:#555">.</span>position <span style="color:#555">=</span> <span style="color:#c30">&#34;absolute&#34;</span>
    controlHolder<span style="color:#555">.</span>style<span style="color:#555">.</span>bottom <span style="color:#555">=</span> <span style="color:#c30">&#34;10px&#34;</span>
    controlHolder<span style="color:#555">.</span>style<span style="color:#555">.</span>left <span style="color:#555">=</span> <span style="color:#c30">&#34;20px&#34;</span>
    controlHolder<span style="color:#555">.</span>style<span style="color:#555">.</span>width <span style="color:#555">=</span> <span style="color:#c30">&#34;100%&#34;</span>
    div<span style="color:#555">.</span>appendChild(controlHolder)

    crateSize <span style="color:#555">=</span> <span style="color:#f60">25</span>

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">indexToBottom</span>(index):
        <span style="color:#069;font-weight:bold">return</span> divHeight <span style="color:#555">-</span> floorY <span style="color:#555">+</span> (crateSize<span style="color:#555">+</span><span style="color:#f60">5</span>) <span style="color:#555">*</span> index

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">makeDisplay</span>(yard):
        <span style="color:#069;font-weight:bold">for</span> index, stack <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(yard):
            newStackList <span style="color:#555">=</span> []
            leftEdge <span style="color:#555">=</span> index <span style="color:#555">*</span> (crateSize <span style="color:#555">*</span> <span style="color:#f60">2</span>) <span style="color:#555">+</span> <span style="color:#f60">25</span>

            stackLabel <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;div&#39;</span>)
            stackLabel<span style="color:#555">.</span>style<span style="color:#555">.</span>width <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>crateSize<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
            stackLabel<span style="color:#555">.</span>style<span style="color:#555">.</span>height <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>crateSize<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
            stackLabel<span style="color:#555">.</span>style<span style="color:#555">.</span>position <span style="color:#555">=</span> <span style="color:#c30">&#34;absolute&#34;</span>
            stackLabel<span style="color:#555">.</span>style<span style="color:#555">.</span>left <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>leftEdge<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
            stackLabel<span style="color:#555">.</span>style<span style="color:#555">.</span>top <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>floorY <span style="color:#555">+</span> <span style="color:#f60">15</span><span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
            stackLabel<span style="color:#555">.</span>style<span style="color:#555">.</span>textAlign <span style="color:#555">=</span> <span style="color:#c30">&#34;center&#34;</span>
            label <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;span&#34;</span>)
            label<span style="color:#555">.</span>innerText <span style="color:#555">=</span> stack
            stackLabel<span style="color:#555">.</span>appendChild(label)
            div<span style="color:#555">.</span>appendChild(stackLabel)

            <span style="color:#069;font-weight:bold">for</span> stackLevel, crate <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(yard[stack]):
                bottom <span style="color:#555">=</span> indexToBottom(stackLevel)
                container <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#39;div&#39;</span>)
                container<span style="color:#555">.</span>style<span style="color:#555">.</span>backgroundColor <span style="color:#555">=</span> startColor
                container<span style="color:#555">.</span>style<span style="color:#555">.</span>width <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>crateSize<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
                container<span style="color:#555">.</span>style<span style="color:#555">.</span>border <span style="color:#555">=</span> <span style="color:#c30">&#34;2px solid #2c2e34&#34;</span>
                container<span style="color:#555">.</span>style<span style="color:#555">.</span>position <span style="color:#555">=</span> <span style="color:#c30">&#34;absolute&#34;</span>
                container<span style="color:#555">.</span>style<span style="color:#555">.</span>bottom <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>bottom<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
                container<span style="color:#555">.</span>style<span style="color:#555">.</span>left <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>leftEdge<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>
                container<span style="color:#555">.</span>style<span style="color:#555">.</span>textAlign <span style="color:#555">=</span> <span style="color:#c30">&#34;center&#34;</span>

                label <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;span&#34;</span>)
                label<span style="color:#555">.</span>innerText <span style="color:#555">=</span> <span style="color:#366">str</span>(crate)
                container<span style="color:#555">.</span>appendChild(label)

                newStackList<span style="color:#555">.</span>append(Crate(crate, container))
                div<span style="color:#555">.</span>appendChild(container)
            yard[stack] <span style="color:#555">=</span> Stack(crates<span style="color:#555">=</span> newStackList, x <span style="color:#555">=</span> leftEdge)

    makeDisplay(yard)

    myTimeline <span style="color:#555">=</span> anime<span style="color:#555">.</span>timeline(j({
        <span style="color:#c30">&#34;duration&#34;</span>: <span style="color:#f60">500</span>,
        <span style="color:#c30">&#34;easing&#34;</span>: <span style="color:#c30">&#34;easeInOutSine&#34;</span>,
        <span style="color:#c30">&#34;autoplay&#34;</span>: <span style="color:#069;font-weight:bold">True</span>
    }))

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">seekbar_input</span>(evt):
        myTimeline<span style="color:#555">.</span>pause()
        myTimeline<span style="color:#555">.</span>seek(myTimeline<span style="color:#555">.</span>duration <span style="color:#555">*</span> (<span style="color:#366">float</span>(evt<span style="color:#555">.</span>srcElement<span style="color:#555">.</span>value)<span style="color:#555">/</span><span style="color:#f60">100</span>))

    add_event_listener(seekbar, <span style="color:#c30">&#39;input&#39;</span>, seekbar_input)
    add_event_listener(playButton, <span style="color:#c30">&#39;click&#39;</span>, <span style="color:#069;font-weight:bold">lambda</span> _: myTimeline<span style="color:#555">.</span>play())
    add_event_listener(pauseButton, <span style="color:#c30">&#39;click&#39;</span>, <span style="color:#069;font-weight:bold">lambda</span> _: myTimeline<span style="color:#555">.</span>pause())

    progressElement <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;seekbar&#34;</span>)
    prevProgress <span style="color:#555">=</span> <span style="color:#f60">0</span>

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">updateSeekbar</span>(yard, <span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">nonlocal</span> prevProgress
        progressElement<span style="color:#555">.</span>value <span style="color:#555">=</span> myTimeline<span style="color:#555">.</span>progress
        <span style="color:#069;font-weight:bold">if</span> myTimeline<span style="color:#555">.</span>progress <span style="color:#555">==</span> <span style="color:#f60">100</span>:
            <span style="color:#069;font-weight:bold">for</span> stack <span style="color:#000;font-weight:bold">in</span> yard:
                <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">len</span>(yard[stack]<span style="color:#555">.</span>crates):
                    topCrate <span style="color:#555">=</span> yard[stack]<span style="color:#555">.</span>crates[<span style="color:#555">-</span><span style="color:#f60">1</span>]
                    topCrate<span style="color:#555">.</span>element<span style="color:#555">.</span>style<span style="color:#555">.</span>backgroundColor <span style="color:#555">=</span> endColor
        <span style="color:#069;font-weight:bold">elif</span> prevProgress <span style="color:#555">==</span> <span style="color:#f60">100</span>:
            <span style="color:#069;font-weight:bold">for</span> stack <span style="color:#000;font-weight:bold">in</span> yard:
                <span style="color:#069;font-weight:bold">for</span> crate <span style="color:#000;font-weight:bold">in</span> yard[stack]<span style="color:#555">.</span>crates:
                    crate<span style="color:#555">.</span>element<span style="color:#555">.</span>style<span style="color:#555">.</span>backgroundColor <span style="color:#555">=</span> startColor

        prevProgress <span style="color:#555">=</span> myTimeline<span style="color:#555">.</span>progress


    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">displayOnMove</span>(from_stack, to_stack, quantity, instructionCount, instructionIndex, <span style="color:#555">*</span>args):
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;Instruction </span><span style="color:#a00">{</span>instructionIndex<span style="color:#a00">}</span><span style="color:#c30">: Move </span><span style="color:#a00">{</span>quantity<span style="color:#a00">}</span><span style="color:#c30"> crate</span><span style="color:#a00">{</span><span style="color:#c30">&#39;s&#39;</span> <span style="color:#069;font-weight:bold">if</span> quantity <span style="color:#555">&gt;</span> <span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#39;&#39;</span><span style="color:#a00">}</span><span style="color:#c30"> from stack </span><span style="color:#a00">{</span>from_stack<span style="color:#a00">}</span><span style="color:#c30"> to stack </span><span style="color:#a00">{</span>to_stack<span style="color:#a00">}</span><span style="color:#c30">. </span><span style="color:#a00">{</span>instructionCount<span style="color:#555">+</span><span style="color:#f60">1</span><span style="color:#a00">}</span><span style="color:#c30"> of </span><span style="color:#a00">{</span>quantity<span style="color:#a00">}</span><span style="color:#c30"> complete&#34;</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day5_1_text_output&#34;</span>, append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">doFinalOutput</span>(yard, <span style="color:#555">*</span>args):
        solution <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>
        <span style="color:#069;font-weight:bold">for</span> stack <span style="color:#000;font-weight:bold">in</span> yard:
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">len</span>(yard[stack]<span style="color:#555">.</span>crates):
                topCrate <span style="color:#555">=</span> yard[stack]<span style="color:#555">.</span>crates[<span style="color:#555">-</span><span style="color:#f60">1</span>]
                topCrate<span style="color:#555">.</span>element<span style="color:#555">.</span>style<span style="color:#555">.</span>backgroundColor <span style="color:#555">=</span> <span style="color:#c30">&#34;green&#34;</span>
                solution <span style="color:#555">+=</span> topCrate<span style="color:#555">.</span>label
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;SOLUTION: </span><span style="color:#a00">{</span>solution<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day5_1_text_output&#34;</span>, append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">moveOneCrate</span>(yard: yardType, from_stack: <span style="color:#366">str</span>, to_stack: <span style="color:#366">str</span>, quantity: <span style="color:#366">int</span>, timeline, instructionCount, instructionIndex, final):
        js<span style="color:#555">.</span>console<span style="color:#555">.</span>log(<span style="color:#c30">&#34;moveOneCrate&#34;</span>)
        crate <span style="color:#555">=</span> yard[from_stack]<span style="color:#555">.</span>crates<span style="color:#555">.</span>pop()
        yard[to_stack]<span style="color:#555">.</span>crates<span style="color:#555">.</span>append(crate)
        newBottom <span style="color:#555">=</span> indexToBottom(yard[to_stack]<span style="color:#555">.</span>crates<span style="color:#555">.</span>index(crate))
        timeline<span style="color:#555">.</span>add(j({
            <span style="color:#c30">&#34;targets&#34;</span>: crate<span style="color:#555">.</span>element,
            <span style="color:#c30">&#34;keyframes&#34;</span>: [
                j({<span style="color:#c30">&#34;bottom&#34;</span>: <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>divHeight <span style="color:#555">-</span> <span style="color:#f60">20</span> <span style="color:#555">-</span> crateSize<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>}),
                j({<span style="color:#c30">&#34;left&#34;</span>: yard[to_stack]<span style="color:#555">.</span>x}),
                j({<span style="color:#c30">&#34;bottom&#34;</span>: <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>newBottom<span style="color:#a00">}</span><span style="color:#c30">px&#34;</span>})
            ],
            <span style="color:#c30">&#34;begin&#34;</span>: partial(displayOnMove, from_stack, to_stack, quantity, instructionCount, instructionIndex),
            <span style="color:#c30">&#34;update&#34;</span>: partial(updateSeekbar, yard),
            <span style="color:#c30">&#34;complete&#34;</span>: partial(doFinalOutput, yard) <span style="color:#069;font-weight:bold">if</span> final <span style="color:#069;font-weight:bold">else</span> (<span style="color:#069;font-weight:bold">lambda</span> _: <span style="color:#069;font-weight:bold">None</span>)
        }))

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">operateOn</span>(yard: yardType, ins: Instruction, instructionIndex: <span style="color:#366">int</span>, final:<span style="color:#366">bool</span>) <span style="color:#555">-&gt;</span> yard:
        <span style="color:#069;font-weight:bold">for</span> instructionCount <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(ins<span style="color:#555">.</span>quantity):
            moveOneCrate(yard, ins<span style="color:#555">.</span>from_stack, ins<span style="color:#555">.</span>to_stack, ins<span style="color:#555">.</span>quantity, myTimeline, instructionCount, instructionIndex, final <span style="color:#555">=</span> final <span style="color:#000;font-weight:bold">and</span> instructionCount <span style="color:#555">==</span> ins<span style="color:#555">.</span>quantity <span style="color:#555">-</span> <span style="color:#f60">1</span>)

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">doAllInstructions</span>(instructions):
        <span style="color:#069;font-weight:bold">for</span> instructionIndex, ins <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(instructions):
            operateOn(yard, ins, instructionIndex, final <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span> <span style="color:#069;font-weight:bold">if</span> instructionIndex <span style="color:#555">==</span> <span style="color:#366">len</span>(instructions) <span style="color:#555">-</span> <span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">False</span>)

    doAllInstructions(instructions)

    js<span style="color:#555">.</span>console<span style="color:#555">.</span>log(js<span style="color:#555">.</span>window)</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday5_1 = document.querySelectorAll('[data-tab-target-day5_1]')
    const tabContentsday5_1 = document.querySelectorAll('[data-tab-content-day5_1]')

    tabsday5_1.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay5_1)
            tabContentsday5_1.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday5_1.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day5_2'>Day 5: Supply Stacks (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">I was wondering when I would get bit by one of PyScript's core limitations (currently) - all <code>&lt;py-script&gt;</code> tags are executed in the same global namespace. Meaning if you have two functions with the same name in two separate files/script tags, any objects whos names overlap previous tags <span class="italic">overwrite those objects</span>. Hence names like <code>operateOn5_2()</code> to ensure the functions are unique to this day/part.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day5_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day5_2-upload-input" name="day5_2-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day5_2-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day5_2-run-btn" py-click="main_day5_2()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day5_2-upload-input')
            </py-script>
            <py-script src="day5/main_2.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day5_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day5_2="#day5_2-code" class="active tab code-title">day5_2.py</li>
         
    </ul>
    <div id="day5_2-code" data-tab-content-day5_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> NamedTuple
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> NewType

<span style="color:#09f;font-style:italic"># The &#39;yard&#39; is the collection of all the stacks of crates</span>
yardType <span style="color:#555">=</span> NewType(<span style="color:#c30">&#34;yardType&#34;</span>, <span style="color:#366">dict</span>[<span style="color:#366">str</span>:<span style="color:#366">list</span>])

<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Instruction</span>(NamedTuple):
    quantity: <span style="color:#366">int</span>
    from_stack: <span style="color:#366">str</span>
    to_stack: <span style="color:#366">str</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">solutionWithClumpedStacks</span>(data: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    data <span style="color:#555">=</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    stacks, instructions <span style="color:#555">=</span> parseInput5_2(data)
    <span style="color:#069;font-weight:bold">for</span> ins <span style="color:#000;font-weight:bold">in</span> instructions:
        stacks <span style="color:#555">=</span> operateOn5_2(stacks, ins)
    <span style="color:#069;font-weight:bold">return</span> topCrates5_2(stacks)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">parseInput5_2</span>(data: <span style="color:#366">list</span>[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">tuple</span>[yardType, <span style="color:#366">list</span>[Instruction]]:
    firstBlankLine <span style="color:#555">=</span> data<span style="color:#555">.</span>index(<span style="color:#c30">&#34;&#34;</span>)
    cratePositions <span style="color:#555">=</span> data[:firstBlankLine]
    cratePositions<span style="color:#555">.</span>reverse() <span style="color:#09f;font-style:italic">#ordered bottom to top</span>
    instructionLines <span style="color:#555">=</span> data[firstBlankLine<span style="color:#555">+</span><span style="color:#f60">1</span>:]

    <span style="color:#09f;font-style:italic"># Create crate data struction</span>
    crateNameLine <span style="color:#555">=</span> cratePositions[<span style="color:#f60">0</span>] <span style="color:#09f;font-style:italic">#get crate labels from line</span>
    crates <span style="color:#555">=</span> {name: [] <span style="color:#069;font-weight:bold">for</span> name <span style="color:#000;font-weight:bold">in</span> crateNameLine<span style="color:#555">.</span>split()} <span style="color:#09f;font-style:italic">#create dicts per line</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> cratePositions[<span style="color:#f60">1</span>:]:
        <span style="color:#069;font-weight:bold">for</span> index, crateName <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line[<span style="color:#f60">1</span>::<span style="color:#f60">4</span>]):
            <span style="color:#069;font-weight:bold">if</span> crateName <span style="color:#555">!=</span> <span style="color:#c30">&#34; &#34;</span>:
                crates[<span style="color:#366">str</span>(crateNameLine[index<span style="color:#555">*</span><span style="color:#f60">4</span> <span style="color:#555">+</span> <span style="color:#f60">1</span>])]<span style="color:#555">.</span>append(crateName) <span style="color:#09f;font-style:italic">#Add crate to list</span>
    
    <span style="color:#09f;font-style:italic"># Parse instructions</span>
    instructions <span style="color:#555">=</span> []
    <span style="color:#069;font-weight:bold">for</span> ins <span style="color:#000;font-weight:bold">in</span> instructionLines:
        match <span style="color:#555">=</span> re<span style="color:#555">.</span>match(<span style="color:#c30">r</span><span style="color:#c30">&#39;move (?P&lt;num&gt;\d+) from (?P&lt;from_stack&gt;\d+) to (?P&lt;to_stack&gt;\d+)&#39;</span>, ins)
        num, from_stack, to_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;num&#39;</span>), match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;from_stack&#39;</span>), match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;to_stack&#39;</span>)

        instructions<span style="color:#555">.</span>append(Instruction(
                quantity <span style="color:#555">=</span> <span style="color:#366">int</span>(match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;num&#39;</span>)),
                from_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;from_stack&#39;</span>),
                to_stack <span style="color:#555">=</span> match<span style="color:#555">.</span>group(<span style="color:#c30">&#39;to_stack&#39;</span>)
            ))
    
    <span style="color:#069;font-weight:bold">return</span> (crates, instructions)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">operateOn5_2</span>(crates: yardType, ins: Instruction) <span style="color:#555">-&gt;</span> yardType:
    to_move <span style="color:#555">=</span> crates[ins<span style="color:#555">.</span>from_stack][<span style="color:#555">-</span>ins<span style="color:#555">.</span>quantity:]
    crates[ins<span style="color:#555">.</span>from_stack] <span style="color:#555">=</span> crates[ins<span style="color:#555">.</span>from_stack][:<span style="color:#555">-</span>ins<span style="color:#555">.</span>quantity]
    crates[ins<span style="color:#555">.</span>to_stack]<span style="color:#555">.</span>extend(to_move)
    <span style="color:#069;font-weight:bold">return</span> crates

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">topCrates5_2</span>(crates: yardType):
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join([stack<span style="color:#555">.</span>pop() <span style="color:#069;font-weight:bold">for</span> stack <span style="color:#000;font-weight:bold">in</span> crates<span style="color:#555">.</span>values()])
    

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day5_2</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day5_2&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>solutionWithClumpedStacks(data)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day5_2-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()
    <span style="color:#366">print</span>(solutionWithClumpedStacks(data))</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday5_2 = document.querySelectorAll('[data-tab-target-day5_2]')
    const tabContentsday5_2 = document.querySelectorAll('[data-tab-content-day5_2]')

    tabsday5_2.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay5_2)
            tabContentsday5_2.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday5_2.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day6_1'>Day 6: Tuning Trouble (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Part of the fun of Advent of Code is trying to guess what things in Part 1 of each day are going to get turned topsy-turvy in Part 2. Today's question, involving finding when elements in a sliding window are unique, lead me to a few guesses. Would there be some other criteria for determining success? Only one duplicated letter perhaps? Perhaps the window would need to ignore only its center element, or the window would jump by twos, or something.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day6_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day6_1-upload-input" name="day6_1-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day6_1-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day6_1-run-btn" py-click="main_day6_1()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day6_1-upload-input')
            </py-script>
            <py-script src="day6/main_1.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day6_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day6_1="#day6_1-code" class="active tab code-title">day6_1.py</li>
         
    </ul>
    <div id="day6_1-code" data-tab-content-day6_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> deque
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">findIndexAllDifferent</span>(input_stream, n):
    window <span style="color:#555">=</span> deque(maxlen<span style="color:#555">=</span>n)
    <span style="color:#069;font-weight:bold">for</span> index, token <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(input_stream):
        window<span style="color:#555">.</span>append(token)
        <span style="color:#069;font-weight:bold">if</span> index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#555">&gt;=</span> n <span style="color:#000;font-weight:bold">and</span> <span style="color:#366">len</span>(<span style="color:#366">set</span>(window)) <span style="color:#555">&gt;=</span> n:
            <span style="color:#069;font-weight:bold">return</span> index <span style="color:#555">+</span> <span style="color:#f60">1</span>
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#555">-</span><span style="color:#f60">1</span>

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day6_1</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day6_1&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>findIndexAllDifferent(data, <span style="color:#f60">4</span>)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day6_1-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()<span style="color:#555">.</span>strip(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
    <span style="color:#366">print</span>(findIndexAllDifferent(data, <span style="color:#f60">4</span>))
    </code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday6_1 = document.querySelectorAll('[data-tab-target-day6_1]')
    const tabContentsday6_1 = document.querySelectorAll('[data-tab-content-day6_1]')

    tabsday6_1.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay6_1)
            tabContentsday6_1.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday6_1.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day6_2'>Day 6: Tuning Trouble (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Thankfully, it turned out part 2 made the simplest possible adjustment - the length of the window. Hence, the code for the two parts looks almost identical. I suppose the objective was to catch out anyone who "manually" checked each element of the sliding window for uniqueness against the other three.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day6_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day6_2-upload-input" name="day6_2-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day6_2-output"></div>
                
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day6_2-run-btn" py-click="main_day6_2()">RUN</button></div>
                
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day6_2-upload-input')
            </py-script>
            <py-script src="day6/main_2.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day6_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day6_2="#day6_2-code" class="active tab code-title">day6_2.py</li>
         
    </ul>
    <div id="day6_2-code" data-tab-content-day6_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> deque
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">findIndexAllDifferent_6_2</span>(input_stream, n):
    window <span style="color:#555">=</span> deque(maxlen<span style="color:#555">=</span>n)
    <span style="color:#069;font-weight:bold">for</span> index, token <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(input_stream):
        window<span style="color:#555">.</span>append(token)
        <span style="color:#069;font-weight:bold">if</span> index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#555">&gt;=</span> n <span style="color:#000;font-weight:bold">and</span> <span style="color:#366">len</span>(<span style="color:#366">set</span>(window)) <span style="color:#555">&gt;=</span> n:
            <span style="color:#069;font-weight:bold">return</span> index <span style="color:#555">+</span> <span style="color:#f60">1</span>
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#555">-</span><span style="color:#f60">1</span>

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day6_2</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day6_2&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>findIndexAllDifferent_6_2(data, <span style="color:#f60">14</span>)<span style="color:#a00">= }</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day6_2-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()<span style="color:#555">.</span>strip(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
    <span style="color:#366">print</span>(findIndexAllDifferent_6_2(data, <span style="color:#f60">14</span>))</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday6_2 = document.querySelectorAll('[data-tab-target-day6_2]')
    const tabContentsday6_2 = document.querySelectorAll('[data-tab-content-day6_2]')

    tabsday6_2.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay6_2)
            tabContentsday6_2.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday6_2.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day7_1'>Day 7: No Space Left on Device (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">When running into a challenge like today's, the question is always: "Should I implement my own data structure, or make use of a built-in/pre-existing module?" Today I opted for the later, and discovered the <a href="https://github.com/c0fec0de/anytree">anytree package</a> for the first time. It has all the functionality I could way - children/parent tracking, arbitrary attributes on Nodes, provision for walking/tranversing/searching the tree, importing/exporting dictionaries/JSON, symlinks... I suspect I'm going to get a lot of use out of this.</p>

    </div>
    <div>
        <div class="load-pyscript viz"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day7_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day7_1-upload-input" name="day7_1-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day7_1-output"></div>
                <div class="grid grid-cols-1 sm:grid-cols-2 sm:space-x-2">
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day7_1-run-btn" py-click="main_day7_1()">RUN</button></div>
                
                <div>
                    <py-script src="day7/viz_1.py"></py-script>
                    <div class="col-span-1"><button class="w-full py-2 run-vis-button" id="day7_1-run-btn" py-click="viz_day7_1()">RUN VISUALIZATION</button></div>
                </div>
                </div>
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day7_1-upload-input')
            </py-script>
            <py-script src="day7/main_1.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day7_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day7_1="#day7_1-code" class="active tab code-title">day7_1.py</li>
        <li data-tab-target-day7_1="#day7_1-viz-code" class="tab code-title">day7_1-viz.py</li> 
    </ul>
    <div id="day7_1-code" data-tab-content-day7_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree</span> <span style="color:#069;font-weight:bold">import</span> Node, RenderTree, PreOrderIter
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree.search</span> <span style="color:#069;font-weight:bold">import</span> findall

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">solution_7_1</span>(data):
    <span style="color:#069;font-weight:bold">if</span> (root_cmd <span style="color:#555">:=</span> data[<span style="color:#f60">0</span>]) <span style="color:#555">==</span> <span style="color:#c30">&#34;$ cd /&#34;</span>:
        root <span style="color:#555">=</span> Node(<span style="color:#c30">&#39;/&#39;</span>)
        data <span style="color:#555">=</span> data[<span style="color:#f60">1</span>:]
    <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;First command something other than cd / : </span><span style="color:#a00">{</span>root_cmd<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

    currentNode <span style="color:#555">=</span> root

    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        currentNode <span style="color:#555">=</span> processLine_7_1(line, root, currentNode)

    <span style="color:#09f;font-style:italic"># After constructing tree, pre-calculate folder sizes.</span>
    <span style="color:#09f;font-style:italic"># A bit inefficient, but fine</span>
    <span style="color:#069;font-weight:bold">for</span> node <span style="color:#000;font-weight:bold">in</span> PreOrderIter(root):
        <span style="color:#069;font-weight:bold">if</span> isFolder_7_1(node) <span style="color:#000;font-weight:bold">and</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#34;folder_size&#34;</span>):
            node<span style="color:#555">.</span>folder_size <span style="color:#555">=</span> containedFileSize_7_1(node)

    small_folders <span style="color:#555">=</span> findall(root, <span style="color:#069;font-weight:bold">lambda</span> n: <span style="color:#366">hasattr</span>(n, <span style="color:#c30">&#34;folder_size&#34;</span>) <span style="color:#000;font-weight:bold">and</span> n<span style="color:#555">.</span>folder_size <span style="color:#555">&lt;=</span> <span style="color:#f60">100_000</span>)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(f<span style="color:#555">.</span>folder_size <span style="color:#069;font-weight:bold">for</span> f <span style="color:#000;font-weight:bold">in</span> small_folders)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">processLine_7_1</span>(line: <span style="color:#366">str</span>, rootNode: Node, currentNode: Node) <span style="color:#555">-&gt;</span> Node:
    <span style="color:#c30">&#34;&#34;&#34;
</span><span style="color:#c30">    Processes one line of input; mutates the tree pointed to by rootNode,
</span><span style="color:#c30">    returns the new currentNode
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    nextCurrentNode <span style="color:#555">=</span> currentNode
    match line<span style="color:#555">.</span>split():
        case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#c30">&#34;/&#34;</span>]:
            <span style="color:#09f;font-style:italic"># Move out to root</span>
            nextCurrentNode <span style="color:#555">=</span> rootNode
        case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#c30">&#34;..&#34;</span>]:
            <span style="color:#09f;font-style:italic"># Move out one level</span>
            nextCurrentNode <span style="color:#555">=</span> currentNode<span style="color:#555">.</span>parent
        case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#366">dir</span>]:
            <span style="color:#09f;font-style:italic"># Move to directory {dir}</span>
            nextCurrentNode <span style="color:#555">=</span> [child <span style="color:#069;font-weight:bold">for</span> child <span style="color:#000;font-weight:bold">in</span> currentNode<span style="color:#555">.</span>children <span style="color:#069;font-weight:bold">if</span> child<span style="color:#555">.</span>name <span style="color:#555">==</span> <span style="color:#366">dir</span>][<span style="color:#f60">0</span>]
        case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;ls&#34;</span>]:
            <span style="color:#09f;font-style:italic">#list files</span>
            <span style="color:#069;font-weight:bold">pass</span>
        case [<span style="color:#c30">&#34;dir&#34;</span>, dirname]:
            <span style="color:#09f;font-style:italic"># New directory {dirname}</span>
            newDir <span style="color:#555">=</span> Node(name<span style="color:#555">=</span>dirname, parent <span style="color:#555">=</span> currentNode)
        case [size, filename]:
            <span style="color:#09f;font-style:italic"># New file {filename}</span>
            newFile <span style="color:#555">=</span> Node(name<span style="color:#555">=</span>filename, parent<span style="color:#555">=</span>currentNode, size<span style="color:#555">=</span><span style="color:#366">int</span>(size))
        case _:
            <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Somehow unmatched??&#34;</span>)

    <span style="color:#069;font-weight:bold">return</span> nextCurrentNode

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">printTree_7_1</span>(root:Node) <span style="color:#555">-&gt;</span> <span style="color:#069;font-weight:bold">None</span>:
    <span style="color:#069;font-weight:bold">for</span> pre, fill, node <span style="color:#000;font-weight:bold">in</span> RenderTree(root):
        <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>pre<span style="color:#a00">}{</span>node<span style="color:#555">.</span>name<span style="color:#a00">}{</span><span style="color:#c30">&#39; - &#39;</span> <span style="color:#555">+</span> <span style="color:#366">str</span>(node<span style="color:#555">.</span>size) <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#39;size&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#39;&#39;</span><span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">isFile_7_1</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(node<span style="color:#555">.</span>children) <span style="color:#555">==</span> <span style="color:#f60">0</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">isFolder_7_1</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(node<span style="color:#555">.</span>children) <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">containedFileSize_7_1</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#069;font-weight:bold">if</span> isFile_7_1(node):
        <span style="color:#069;font-weight:bold">return</span> node<span style="color:#555">.</span>size
    
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(containedFileSize_7_1(n) <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> node<span style="color:#555">.</span>children)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day7_1</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day7_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>solution_7_1(data)<span style="color:#a00">=}</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day7_1-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)

    <span style="color:#366">print</span>(solution_7_1(data))</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
    
    
    
    <div id="day7_1-viz-code" data-tab-content-day7_1 class="tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">contextlib</span> <span style="color:#069;font-weight:bold">import</span> redirect_stdout
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">io</span> <span style="color:#069;font-weight:bold">import</span> StringIO
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree</span> <span style="color:#069;font-weight:bold">import</span> Node, RenderTree, PreOrderIter
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree.search</span> <span style="color:#069;font-weight:bold">import</span> findall
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree.render</span> <span style="color:#069;font-weight:bold">import</span> ContStyle

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">viz_day7_1</span>():    
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">local_main</span>(data):
        <span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">js</span> 

        <span style="color:#069;font-weight:bold">if</span> (root_cmd <span style="color:#555">:=</span> data[<span style="color:#f60">0</span>]) <span style="color:#555">==</span> <span style="color:#c30">&#34;$ cd /&#34;</span>:
            root <span style="color:#555">=</span> Node(<span style="color:#c30">&#39;/&#39;</span>)
            data <span style="color:#555">=</span> data[<span style="color:#f60">1</span>:]
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;First command something other than cd / : </span><span style="color:#a00">{</span>root_cmd<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

        currentNode <span style="color:#555">=</span> root

        <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
            currentNode <span style="color:#555">=</span> processLine_7_1(line, root, currentNode)

        <span style="color:#09f;font-style:italic"># After constructing tree, pre-calculate folder sizes.</span>
        <span style="color:#09f;font-style:italic"># A bit inefficient, but fine</span>
        <span style="color:#069;font-weight:bold">for</span> node <span style="color:#000;font-weight:bold">in</span> PreOrderIter(root):
            <span style="color:#069;font-weight:bold">if</span> isFolder_7_1(node) <span style="color:#000;font-weight:bold">and</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#34;folder_size&#34;</span>):
                node<span style="color:#555">.</span>folder_size <span style="color:#555">=</span> containedFileSize_7_1(node)

        small_folders <span style="color:#555">=</span> findall(root, <span style="color:#069;font-weight:bold">lambda</span> n: <span style="color:#366">hasattr</span>(n, <span style="color:#c30">&#34;folder_size&#34;</span>) <span style="color:#000;font-weight:bold">and</span> n<span style="color:#555">.</span>folder_size <span style="color:#555">&lt;=</span> <span style="color:#f60">100_000</span>)
        display(<span style="color:#366">sum</span>(f<span style="color:#555">.</span>folder_size <span style="color:#069;font-weight:bold">for</span> f <span style="color:#000;font-weight:bold">in</span> small_folders),
                target <span style="color:#555">=</span> <span style="color:#c30">&#34;day7_1-output&#34;</span>, append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
        

        <span style="color:#069;font-weight:bold">if</span> (pre<span style="color:#555">:=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day7_1-pre&#34;</span>)) <span style="color:#000;font-weight:bold">is</span> <span style="color:#069;font-weight:bold">None</span>:
            <span style="color:#09f;font-style:italic"># Make pre tag for output</span>
            pre <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;pre&#34;</span>)
            pre<span style="color:#555">.</span>id <span style="color:#555">=</span> <span style="color:#c30">&#34;day7_1-pre&#34;</span>
            pre<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#34;bg-gray-900&#34;</span>, <span style="color:#c30">&#34;text-gray-300&#34;</span>)
            pre<span style="color:#555">.</span>style<span style="color:#555">.</span>lineHeight <span style="color:#555">=</span> <span style="color:#c30">&#39;1.1&#39;</span>
            container <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day7_1-viz&#34;</span>)
            container<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#39;max-h-124&#39;</span>, <span style="color:#c30">&#39;overflow-y-auto&#39;</span>, <span style="color:#c30">&#39;my-4&#39;</span>)
            container<span style="color:#555">.</span>appendChild(pre)
        <span style="color:#069;font-weight:bold">else</span>:
            pre<span style="color:#555">.</span>innerHTML <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span> <span style="color:#09f;font-style:italic">#clear existing output</span>

        <span style="color:#069;font-weight:bold">for</span> pre, fill, node <span style="color:#000;font-weight:bold">in</span> RenderTree(root, style<span style="color:#555">=</span>ContStyle()):
            <span style="color:#09f;font-style:italic">#if node in small_folders:</span>
            nameSegment <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>pre<span style="color:#a00">}{</span>node<span style="color:#555">.</span>name<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#39;size&#39;</span>): displaySize <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span><span style="color:#c30">&#39;size:&#39;</span><span style="color:#a00">:</span><span style="color:#c30"> &gt;</span><span style="color:#a00">{</span><span style="color:#366">len</span>(<span style="color:#c30">&#39;folder size:&#39;</span>)<span style="color:#a00">}}</span><span style="color:#c30"> </span><span style="color:#a00">{</span><span style="color:#366">str</span>(node<span style="color:#555">.</span>size)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>
            <span style="color:#069;font-weight:bold">elif</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#39;folder_size&#39;</span>): displaySize <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span><span style="color:#c30">&#39;folder size:&#39;</span><span style="color:#a00">}</span><span style="color:#c30"> </span><span style="color:#a00">{</span><span style="color:#366">str</span>(node<span style="color:#555">.</span>folder_size)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>
            <span style="color:#069;font-weight:bold">else</span>: displaySize <span style="color:#555">=</span> <span style="color:#c30">&#39;&#39;</span>

            contents <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>nameSegment<span style="color:#a00">:</span><span style="color:#c30"> &lt;60</span><span style="color:#a00">}{</span>displaySize<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>

            <span style="color:#09f;font-style:italic">#Highlight solution lines</span>
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#34;folder_size&#34;</span>) <span style="color:#000;font-weight:bold">and</span> node<span style="color:#555">.</span>folder_size <span style="color:#555">&lt;=</span> <span style="color:#f60">100_000</span>:
                contents <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#39;&lt;span style=&#34;text-shadow: 0 0 8px #ffffff; color: rgb(255, 255, 255)&#34;&gt;</span><span style="color:#a00">{</span>contents<span style="color:#a00">}</span><span style="color:#c30">&lt;/span&gt;&#39;</span>
            <span style="color:#069;font-weight:bold">else</span>:
                contents <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#39;&lt;span&gt;</span><span style="color:#a00">{</span>contents<span style="color:#a00">}</span><span style="color:#c30">&lt;/span&gt;&#39;</span>
            
            display(HTML(contents),
                    target <span style="color:#555">=</span> <span style="color:#c30">&#34;day7_1-pre&#34;</span>)
      

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">processLine_7_1</span>(line: <span style="color:#366">str</span>, rootNode: Node, currentNode: Node) <span style="color:#555">-&gt;</span> Node:
        <span style="color:#c30">&#34;&#34;&#34;
</span><span style="color:#c30">        Processes one line of input; mutates the tree pointed to by rootNode,
</span><span style="color:#c30">        returns the new currentNode
</span><span style="color:#c30">        &#34;&#34;&#34;</span>
        nextCurrentNode <span style="color:#555">=</span> currentNode
        match line<span style="color:#555">.</span>split():
            case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#c30">&#34;/&#34;</span>]:
                <span style="color:#09f;font-style:italic"># Move out to root</span>
                nextCurrentNode <span style="color:#555">=</span> rootNode
            case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#c30">&#34;..&#34;</span>]:
                <span style="color:#09f;font-style:italic"># Move out one level</span>
                nextCurrentNode <span style="color:#555">=</span> currentNode<span style="color:#555">.</span>parent
            case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#366">dir</span>]:
                <span style="color:#09f;font-style:italic"># Move to directory {dir}</span>
                nextCurrentNode <span style="color:#555">=</span> [child <span style="color:#069;font-weight:bold">for</span> child <span style="color:#000;font-weight:bold">in</span> currentNode<span style="color:#555">.</span>children <span style="color:#069;font-weight:bold">if</span> child<span style="color:#555">.</span>name <span style="color:#555">==</span> <span style="color:#366">dir</span>][<span style="color:#f60">0</span>]
            case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;ls&#34;</span>]:
                <span style="color:#09f;font-style:italic">#list files</span>
                <span style="color:#069;font-weight:bold">pass</span>
            case [<span style="color:#c30">&#34;dir&#34;</span>, dirname]:
                <span style="color:#09f;font-style:italic"># New directory {dirname}</span>
                newDir <span style="color:#555">=</span> Node(name<span style="color:#555">=</span>dirname, parent <span style="color:#555">=</span> currentNode)
            case [size, filename]:
                <span style="color:#09f;font-style:italic"># New file {filename}</span>
                newFile <span style="color:#555">=</span> Node(name<span style="color:#555">=</span>filename, parent<span style="color:#555">=</span>currentNode, size<span style="color:#555">=</span><span style="color:#366">int</span>(size))
            case _:
                <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Somehow unmatched??&#34;</span>)

        <span style="color:#069;font-weight:bold">return</span> nextCurrentNode

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">printTree_7_1</span>(root:Node) <span style="color:#555">-&gt;</span> <span style="color:#069;font-weight:bold">None</span>:
        <span style="color:#069;font-weight:bold">for</span> pre, fill, node <span style="color:#000;font-weight:bold">in</span> RenderTree(root):
            <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>pre<span style="color:#a00">}{</span>node<span style="color:#555">.</span>name<span style="color:#a00">}{</span><span style="color:#c30">&#39; - &#39;</span> <span style="color:#555">+</span> <span style="color:#366">str</span>(node<span style="color:#555">.</span>size) <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#39;size&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#39;&#39;</span><span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">isFile_7_1</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(node<span style="color:#555">.</span>children) <span style="color:#555">==</span> <span style="color:#f60">0</span>

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">isFolder_7_1</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(node<span style="color:#555">.</span>children) <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">containedFileSize_7_1</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
        <span style="color:#069;font-weight:bold">if</span> isFile_7_1(node):
            <span style="color:#069;font-weight:bold">return</span> node<span style="color:#555">.</span>size
        
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(containedFileSize_7_1(n) <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> node<span style="color:#555">.</span>children)

    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day7_1&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
    local_main(data)</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday7_1 = document.querySelectorAll('[data-tab-target-day7_1]')
    const tabContentsday7_1 = document.querySelectorAll('[data-tab-content-day7_1]')

    tabsday7_1.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay7_1)
            tabContentsday7_1.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday7_1.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day7_2'>Day 7: No Space Left on Device (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Another part-2 problem which requires taking the data discovered in part 1, sorting it (by some key), and finding the smallest (largest) value, possibly beyond some threshhold. Using <code>anytree.search.findall</code> makes it easy to find the folders, and <code>sorted(key = lamabda node: node.folder_size)</code> allows us to sort by the relevant key.</p>

    </div>
    <div>
        <div class="load-pyscript viz"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day7_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day7_2-upload-input" name="day7_2-upload">
                </div>
                <div class="font-mono bg-gray-200" id="day7_2-output"></div>
                <div class="grid grid-cols-1 sm:grid-cols-2 sm:space-x-2">
                <div class="col-span-1"><button class="w-full py-2 load-pyscript-button" id="day7_2-run-btn" py-click="main_day7_2()">RUN</button></div>
                
                <div>
                    <py-script src="day7/viz_2.py"></py-script>
                    <div class="col-span-1"><button class="w-full py-2 run-vis-button" id="day7_2-run-btn" py-click="viz_day7_2()">RUN VISUALIZATION</button></div>
                </div>
                </div>
            </div>
            <py-script>
                from utils import attach_upload_listener
                attach_upload_listener('day7_2-upload-input')
            </py-script>
            <py-script src="day7/main_2.py"></py-script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day7_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day7_2="#day7_2-code" class="active tab code-title">day7_2.py</li>
        <li data-tab-target-day7_2="#day7_2-viz-code" class="tab code-title">day7_2-viz.py</li> 
    </ul>
    <div id="day7_2-code" data-tab-content-day7_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree</span> <span style="color:#069;font-weight:bold">import</span> Node, RenderTree, PreOrderIter
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree.search</span> <span style="color:#069;font-weight:bold">import</span> findall

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">solution_7_2</span>(data):
    <span style="color:#069;font-weight:bold">if</span> (root_cmd <span style="color:#555">:=</span> data[<span style="color:#f60">0</span>]) <span style="color:#555">==</span> <span style="color:#c30">&#34;$ cd /&#34;</span>:
        root <span style="color:#555">=</span> Node(<span style="color:#c30">&#39;/&#39;</span>)
        data <span style="color:#555">=</span> data[<span style="color:#f60">1</span>:]
    <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;First command something other than cd / : </span><span style="color:#a00">{</span>root_cmd<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

    currentNode <span style="color:#555">=</span> root

    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        currentNode <span style="color:#555">=</span> processLine_7_2(line, root, currentNode)

    <span style="color:#069;font-weight:bold">for</span> node <span style="color:#000;font-weight:bold">in</span> PreOrderIter(root):
        <span style="color:#069;font-weight:bold">if</span> isFolder_7_2(node) <span style="color:#000;font-weight:bold">and</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#34;folder_size&#34;</span>):
            node<span style="color:#555">.</span>folder_size <span style="color:#555">=</span> containedFileSize_7_2(node)

    size_used <span style="color:#555">=</span> root<span style="color:#555">.</span>folder_size
    total_size <span style="color:#555">=</span> <span style="color:#f60">70_000_000</span>
    size_available <span style="color:#555">=</span> total_size <span style="color:#555">-</span> size_used

    size_needed_for_update <span style="color:#555">=</span> <span style="color:#f60">30_000_000</span>
    minimum_delete <span style="color:#555">=</span> size_needed_for_update <span style="color:#555">-</span> size_available

    <span style="color:#09f;font-style:italic"># Sort folders by size, find the smallest one larger than the needed size</span>
    <span style="color:#069;font-weight:bold">for</span> folder <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">sorted</span>(findall(root, <span style="color:#069;font-weight:bold">lambda</span> n: <span style="color:#366">hasattr</span>(n, <span style="color:#c30">&#34;folder_size&#34;</span>)), key<span style="color:#555">=</span> <span style="color:#069;font-weight:bold">lambda</span> n: n<span style="color:#555">.</span>folder_size):
        <span style="color:#069;font-weight:bold">if</span> folder<span style="color:#555">.</span>folder_size <span style="color:#555">&gt;</span> minimum_delete:
            <span style="color:#069;font-weight:bold">return</span> folder<span style="color:#555">.</span>folder_size

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">processLine_7_2</span>(line: <span style="color:#366">str</span>, rootNode: Node, currentNode: Node) <span style="color:#555">-&gt;</span> Node:
    <span style="color:#c30">&#34;&#34;&#34;
</span><span style="color:#c30">    Processes one line of input; mutates the tree pointed to by rootNode,
</span><span style="color:#c30">    returns the new currentNode
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    nextCurrentNode <span style="color:#555">=</span> currentNode
    match line<span style="color:#555">.</span>split():
        case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#c30">&#34;/&#34;</span>]:
            <span style="color:#09f;font-style:italic"># Move out to root</span>
            nextCurrentNode <span style="color:#555">=</span> rootNode
        case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#c30">&#34;..&#34;</span>]:
            <span style="color:#09f;font-style:italic"># Move out one level</span>
            nextCurrentNode <span style="color:#555">=</span> currentNode<span style="color:#555">.</span>parent
        case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#366">dir</span>]:
            <span style="color:#09f;font-style:italic"># Move to directory {dir}</span>
            nextCurrentNode <span style="color:#555">=</span> [child <span style="color:#069;font-weight:bold">for</span> child <span style="color:#000;font-weight:bold">in</span> currentNode<span style="color:#555">.</span>children <span style="color:#069;font-weight:bold">if</span> child<span style="color:#555">.</span>name <span style="color:#555">==</span> <span style="color:#366">dir</span>][<span style="color:#f60">0</span>]
        case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;ls&#34;</span>]:
            <span style="color:#09f;font-style:italic"># List Files</span>
            <span style="color:#069;font-weight:bold">pass</span>
        case [<span style="color:#c30">&#34;dir&#34;</span>, dirname]:
            <span style="color:#09f;font-style:italic"># New directory {dirname}</span>
            newDir <span style="color:#555">=</span> Node(name<span style="color:#555">=</span>dirname, parent <span style="color:#555">=</span> currentNode)
        case [size, filename]:
            <span style="color:#09f;font-style:italic"># New file {filename}</span>
            newFile <span style="color:#555">=</span> Node(name<span style="color:#555">=</span>filename, parent<span style="color:#555">=</span>currentNode, size<span style="color:#555">=</span><span style="color:#366">int</span>(size))
        case _:
            <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Somehow unmatched??&#34;</span>)
            <span style="color:#09f;font-style:italic"># Somehow unmatched??</span>

    <span style="color:#069;font-weight:bold">return</span> nextCurrentNode

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">printTree_7_2</span>(root:Node) <span style="color:#555">-&gt;</span> <span style="color:#069;font-weight:bold">None</span>:
    <span style="color:#069;font-weight:bold">for</span> pre, fill, node <span style="color:#000;font-weight:bold">in</span> RenderTree(root):
        <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>pre<span style="color:#a00">}{</span>node<span style="color:#555">.</span>name<span style="color:#a00">}{</span><span style="color:#c30">&#39; - &#39;</span> <span style="color:#555">+</span> <span style="color:#366">str</span>(node<span style="color:#555">.</span>size) <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#39;size&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#39;&#39;</span><span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">isFile_7_2</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(node<span style="color:#555">.</span>children) <span style="color:#555">==</span> <span style="color:#f60">0</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">isFolder_7_2</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(node<span style="color:#555">.</span>children) <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">containedFileSize_7_2</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#069;font-weight:bold">if</span> isFile_7_2(node):
        <span style="color:#069;font-weight:bold">return</span> node<span style="color:#555">.</span>size
    
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(containedFileSize_7_2(n) <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> node<span style="color:#555">.</span>children)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;pyodide&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day7_2</span>():
        data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day7_2&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
        display(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>solution_7_2(data)<span style="color:#a00">=}</span><span style="color:#c30">&#34;</span>,
            target<span style="color:#555">=</span><span style="color:#c30">&#34;day7_2-output&#34;</span>,
            append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>, <span style="color:#c30">&#34;r&#34;</span>) <span style="color:#069;font-weight:bold">as</span> fp:
        data <span style="color:#555">=</span> fp<span style="color:#555">.</span>read()<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)

    <span style="color:#366">print</span>(solution_7_2(data))</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
    
    
    
    <div id="day7_2-viz-code" data-tab-content-day7_2 class="tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">contextlib</span> <span style="color:#069;font-weight:bold">import</span> redirect_stdout
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">io</span> <span style="color:#069;font-weight:bold">import</span> StringIO
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree</span> <span style="color:#069;font-weight:bold">import</span> Node, RenderTree, PreOrderIter
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree.search</span> <span style="color:#069;font-weight:bold">import</span> findall
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">anytree.render</span> <span style="color:#069;font-weight:bold">import</span> ContStyle

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">viz_day7_2</span>():    
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">local_main</span>(data):
        <span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">js</span> 

        <span style="color:#069;font-weight:bold">if</span> (root_cmd <span style="color:#555">:=</span> data[<span style="color:#f60">0</span>]) <span style="color:#555">==</span> <span style="color:#c30">&#34;$ cd /&#34;</span>:
            root <span style="color:#555">=</span> Node(<span style="color:#c30">&#39;/&#39;</span>)
            data <span style="color:#555">=</span> data[<span style="color:#f60">1</span>:]
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;First command something other than cd / : </span><span style="color:#a00">{</span>root_cmd<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

        currentNode <span style="color:#555">=</span> root

        <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
            currentNode <span style="color:#555">=</span> processLine_7_2(line, root, currentNode)

        <span style="color:#09f;font-style:italic"># After constructing tree, pre-calculate folder sizes.</span>
        <span style="color:#09f;font-style:italic"># A bit inefficient, but fine</span>
        <span style="color:#069;font-weight:bold">for</span> node <span style="color:#000;font-weight:bold">in</span> PreOrderIter(root):
            <span style="color:#069;font-weight:bold">if</span> isFolder_7_2(node) <span style="color:#000;font-weight:bold">and</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#34;folder_size&#34;</span>):
                node<span style="color:#555">.</span>folder_size <span style="color:#555">=</span> containedFileSize_7_2(node)

        size_used <span style="color:#555">=</span> root<span style="color:#555">.</span>folder_size
        total_size <span style="color:#555">=</span> <span style="color:#f60">70_000_000</span>
        size_available <span style="color:#555">=</span> total_size <span style="color:#555">-</span> size_used

        size_needed_for_update <span style="color:#555">=</span> <span style="color:#f60">30_000_000</span>
        minimum_delete <span style="color:#555">=</span> size_needed_for_update <span style="color:#555">-</span> size_available

        <span style="color:#09f;font-style:italic"># Sort folders by size, find the smallest one larger than the needed size</span>
        <span style="color:#069;font-weight:bold">for</span> folder <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">sorted</span>(findall(root, <span style="color:#069;font-weight:bold">lambda</span> n: <span style="color:#366">hasattr</span>(n, <span style="color:#c30">&#34;folder_size&#34;</span>)), key<span style="color:#555">=</span> <span style="color:#069;font-weight:bold">lambda</span> n: n<span style="color:#555">.</span>folder_size):
            <span style="color:#069;font-weight:bold">if</span> folder<span style="color:#555">.</span>folder_size <span style="color:#555">&gt;</span> minimum_delete:
                selectedFolder <span style="color:#555">=</span> folder
                display(folder<span style="color:#555">.</span>folder_size, target<span style="color:#555">=</span><span style="color:#c30">&#34;day7_2-output&#34;</span>, append<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>)
                <span style="color:#069;font-weight:bold">break</span>        

        <span style="color:#069;font-weight:bold">if</span> (pre<span style="color:#555">:=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day7_2-pre&#34;</span>)) <span style="color:#000;font-weight:bold">is</span> <span style="color:#069;font-weight:bold">None</span>:
            <span style="color:#09f;font-style:italic"># Make pre tag for output</span>
            pre <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>createElement(<span style="color:#c30">&#34;pre&#34;</span>)
            pre<span style="color:#555">.</span>id <span style="color:#555">=</span> <span style="color:#c30">&#34;day7_2-pre&#34;</span>
            pre<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#34;bg-gray-900&#34;</span>, <span style="color:#c30">&#34;text-gray-300&#34;</span>)
            pre<span style="color:#555">.</span>style<span style="color:#555">.</span>lineHeight <span style="color:#555">=</span> <span style="color:#c30">&#39;1.1&#39;</span>
            container <span style="color:#555">=</span> js<span style="color:#555">.</span>document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day7_2-viz&#34;</span>)
            container<span style="color:#555">.</span>classList<span style="color:#555">.</span>add(<span style="color:#c30">&#39;max-h-124&#39;</span>, <span style="color:#c30">&#39;overflow-y-auto&#39;</span>, <span style="color:#c30">&#39;my-4&#39;</span>)
            container<span style="color:#555">.</span>appendChild(pre)
        <span style="color:#069;font-weight:bold">else</span>:
            pre<span style="color:#555">.</span>innerHTML <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span> <span style="color:#09f;font-style:italic">#clear existing output</span>

        runningTotal <span style="color:#555">=</span> <span style="color:#f60">0</span>
        <span style="color:#069;font-weight:bold">for</span> pre, fill, node <span style="color:#000;font-weight:bold">in</span> RenderTree(root, style<span style="color:#555">=</span>ContStyle()):
            <span style="color:#09f;font-style:italic">#if node in small_folders:</span>
            nameSegment <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>pre<span style="color:#a00">}{</span>node<span style="color:#555">.</span>name<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#39;size&#39;</span>): displaySize <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span><span style="color:#c30">&#39;size:&#39;</span><span style="color:#a00">:</span><span style="color:#c30"> &gt;</span><span style="color:#a00">{</span><span style="color:#366">len</span>(<span style="color:#c30">&#39;folder size:&#39;</span>)<span style="color:#a00">}}</span><span style="color:#c30"> </span><span style="color:#a00">{</span><span style="color:#366">str</span>(node<span style="color:#555">.</span>size)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>
            <span style="color:#069;font-weight:bold">elif</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#39;folder_size&#39;</span>): displaySize <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span><span style="color:#c30">&#39;folder size:&#39;</span><span style="color:#a00">}</span><span style="color:#c30"> </span><span style="color:#a00">{</span><span style="color:#366">str</span>(node<span style="color:#555">.</span>folder_size)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>
            <span style="color:#069;font-weight:bold">else</span>: displaySize <span style="color:#555">=</span> <span style="color:#c30">&#39;&#39;</span>

            contents <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>nameSegment<span style="color:#a00">:</span><span style="color:#c30"> &lt;60</span><span style="color:#a00">}{</span>displaySize<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>

            <span style="color:#09f;font-style:italic">#Highlight solution lines</span>
            <span style="color:#069;font-weight:bold">if</span> node <span style="color:#555">==</span> selectedFolder <span style="color:#000;font-weight:bold">or</span> (node <span style="color:#000;font-weight:bold">in</span> selectedFolder<span style="color:#555">.</span>descendants <span style="color:#000;font-weight:bold">and</span> isFile_7_2(node)):
                <span style="color:#069;font-weight:bold">if</span> node <span style="color:#555">==</span> selectedFolder: contents <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>contents<span style="color:#a00">:</span><span style="color:#c30"> &lt;85</span><span style="color:#a00">}</span><span style="color:#c30"> &lt;&lt;&lt;&lt;&lt; SOLUTION&#34;</span>
                <span style="color:#069;font-weight:bold">if</span> isFile_7_2(node):
                    runningTotal <span style="color:#555">+=</span> node<span style="color:#555">.</span>size
                    contents <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>contents<span style="color:#a00">:</span><span style="color:#c30"> &lt;85</span><span style="color:#a00">}</span><span style="color:#c30"> Running Total: </span><span style="color:#a00">{</span>runningTotal<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>
                contents <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#39;&lt;span style=&#34;text-shadow: 0 0 8px #ffffff; color: rgb(255, 255, 255)&#34;&gt;</span><span style="color:#a00">{</span>contents<span style="color:#a00">}</span><span style="color:#c30">&lt;/span&gt;&#39;</span>
            <span style="color:#069;font-weight:bold">else</span>:
                contents <span style="color:#555">=</span> <span style="color:#c30">f</span><span style="color:#c30">&#39;&lt;span&gt;</span><span style="color:#a00">{</span>contents<span style="color:#a00">}</span><span style="color:#c30">&lt;/span&gt;&#39;</span>
            
            display(HTML(contents),
                    target <span style="color:#555">=</span> <span style="color:#c30">&#34;day7_2-pre&#34;</span>)
      

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">processLine_7_2</span>(line: <span style="color:#366">str</span>, rootNode: Node, currentNode: Node) <span style="color:#555">-&gt;</span> Node:
        <span style="color:#c30">&#34;&#34;&#34;
</span><span style="color:#c30">        Processes one line of input; mutates the tree pointed to by rootNode,
</span><span style="color:#c30">        returns the new currentNode
</span><span style="color:#c30">        &#34;&#34;&#34;</span>
        nextCurrentNode <span style="color:#555">=</span> currentNode
        match line<span style="color:#555">.</span>split():
            case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#c30">&#34;/&#34;</span>]:
                <span style="color:#09f;font-style:italic"># Move out to root</span>
                nextCurrentNode <span style="color:#555">=</span> rootNode
            case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#c30">&#34;..&#34;</span>]:
                <span style="color:#09f;font-style:italic"># Move out one level</span>
                nextCurrentNode <span style="color:#555">=</span> currentNode<span style="color:#555">.</span>parent
            case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;cd&#34;</span>, <span style="color:#366">dir</span>]:
                <span style="color:#09f;font-style:italic"># Move to directory {dir}</span>
                nextCurrentNode <span style="color:#555">=</span> [child <span style="color:#069;font-weight:bold">for</span> child <span style="color:#000;font-weight:bold">in</span> currentNode<span style="color:#555">.</span>children <span style="color:#069;font-weight:bold">if</span> child<span style="color:#555">.</span>name <span style="color:#555">==</span> <span style="color:#366">dir</span>][<span style="color:#f60">0</span>]
            case [<span style="color:#c30">&#34;$&#34;</span>, <span style="color:#c30">&#34;ls&#34;</span>]:
                <span style="color:#09f;font-style:italic">#list files</span>
                <span style="color:#069;font-weight:bold">pass</span>
            case [<span style="color:#c30">&#34;dir&#34;</span>, dirname]:
                <span style="color:#09f;font-style:italic"># New directory {dirname}</span>
                newDir <span style="color:#555">=</span> Node(name<span style="color:#555">=</span>dirname, parent <span style="color:#555">=</span> currentNode)
            case [size, filename]:
                <span style="color:#09f;font-style:italic"># New file {filename}</span>
                newFile <span style="color:#555">=</span> Node(name<span style="color:#555">=</span>filename, parent<span style="color:#555">=</span>currentNode, size<span style="color:#555">=</span><span style="color:#366">int</span>(size))
            case _:
                <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Somehow unmatched??&#34;</span>)

        <span style="color:#069;font-weight:bold">return</span> nextCurrentNode

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">printTree_7_2</span>(root:Node) <span style="color:#555">-&gt;</span> <span style="color:#069;font-weight:bold">None</span>:
        <span style="color:#069;font-weight:bold">for</span> pre, fill, node <span style="color:#000;font-weight:bold">in</span> RenderTree(root):
            <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>pre<span style="color:#a00">}{</span>node<span style="color:#555">.</span>name<span style="color:#a00">}{</span><span style="color:#c30">&#39; - &#39;</span> <span style="color:#555">+</span> <span style="color:#366">str</span>(node<span style="color:#555">.</span>size) <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">hasattr</span>(node, <span style="color:#c30">&#39;size&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#39;&#39;</span><span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">isFile_7_2</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(node<span style="color:#555">.</span>children) <span style="color:#555">==</span> <span style="color:#f60">0</span>

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">isFolder_7_2</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(node<span style="color:#555">.</span>children) <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">containedFileSize_7_2</span>(node:Node) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
        <span style="color:#069;font-weight:bold">if</span> isFile_7_2(node):
            <span style="color:#069;font-weight:bold">return</span> node<span style="color:#555">.</span>size
        
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(containedFileSize_7_2(n) <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> node<span style="color:#555">.</span>children)

    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#39;day7_2&#39;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
    local_main(data)</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

</div>
<script>
    const tabsday7_2 = document.querySelectorAll('[data-tab-target-day7_2]')
    const tabContentsday7_2 = document.querySelectorAll('[data-tab-content-day7_2]')

    tabsday7_2.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTargetDay7_2)
            tabContentsday7_2.forEach(tabContent => {
                tabContent.classList.remove('active')
            })
            tabsday7_2.forEach(tab => {
                tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
        })
    })
</script>



<py-script class="hidden">
    import js
    loaded_event = js.Event.new('pyscript_ready')
    js.document.dispatchEvent(loaded_event)
</py-script>

<style>
    .code-container {n
        border-width: 2px;
    }
</style>
<span class="text-green"></span>
<script>    
    //Create Load PyScript buttons:
    document.addEventListener('DOMContentLoaded', () => {
        btn_locations = document.getElementsByClassName('load-pyscript')
        Array.from(btn_locations).forEach(div => {
            div.classList.add('my-2', 'md:mx-4', 'border-2', 'border-blue-200', 'p-2', 'grid', 'grid-cols-1', 'rounded-xl', 'flex', 'flex-row', 'justify-center', 'w-auto', "py-1", 'h-auto', 'md:h-full')
            let p = document.createElement('p')
            p.classList.add('my-auto', 'mr-4', 'italic')
            p.innerHTML = "Want to run these examples live in your browser?"
            if (div.classList.contains("viz")){
                p.innerHTML += ' <p class="font-semibold text-green-600">This example includes a visualization.</p>'
            }
            div.appendChild(p)
            //button
            let btn = document.createElement('button')
            btn.innerText = "Load PyScript"
            btn.classList.add('load-pyscript-button', 'h-12')
            btn.onclick = loadPyScript
            div.appendChild(btn)
        });
    })

    document.addEventListener('DOMContentLoaded', () => {
        headings = document.getElementsByClassName('post-h2')
        tocContents = document.getElementById('toc-contents')
        Array.from(headings).forEach(header => {
            //<p><a class = "text-gray-500" href="#day1">Day 1</a></p>
            const line = document.createElement('p')
            const link = document.createElement('a')
            link.href = `#${header.id}`
            link.innerText = header.innerText
            line.appendChild(link)
            tocContents.appendChild(line)
        })
    })

    function loadPyScript() {
        //load chartjs
        chartlink = document.createElement('script')
        chartlink.src = "https://cdn.jsdelivr.net/npm/chart.js"
        document.body.append(chartlink)

        //load animejs
        animejslink = document.createElement('script')
        animejslink.src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"
        document.body.append(animejslink)
        
        //load css
        css_link = document.createElement("link")
        css_link.rel = "stylesheet"
        css_link.type = "text/css"
        css_link.href = "https://pyscript.net/unstable/pyscript.css"
        //css_link.href = "http://127.0.0.1:5501/pyscriptjs/build/pyscript.css"
        document.getElementsByTagName('head')[0].appendChild(css_link)

        //load cs
        script_tag = document.createElement('script')
        script_tag.src = "https://pyscript.net/unstable/pyscript.js"
        //script_tag.src = "http://127.0.0.1:5501/pyscriptjs/build/pyscript.js"
        document.body.append(script_tag)        
    }
    document.addEventListener('pyscript_ready', () => {
        static = document.getElementsByClassName('static-example')
        live = document.getElementsByClassName('live-example')
        Array.from(static).forEach(div => {
            div.classList.add('hidden')
        })
        Array.from(live).forEach(div => {
            div.classList.remove('hidden')
        })
        load_buttons = document.getElementsByClassName('load-pyscript')
        Array.from(load_buttons).forEach(elem => {
            elem.classList.add('hidden')
        })
    })
</script>
<link rel="stylesheet" href="tabs.css">
<!-- <script src="tabs.js"></script> -->
				</div>
				
			</article>
			<footer>
    <div class = "pt-4 pb-6 text-center text-gray-500" id="Footer">
        <p class="">All contents  Jeff Glass 2022. All rights reserved.</p>
        <p>See <a href="../../cloud-resume-challenge" class="underline">how this site was built</a>.</p>
    </div>
</footer>
		</div>
	</main>


	
</body>
</html>
