<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>py.space</title>
	<meta name="description" content="Electronics, Making, Software Development, and Amateur Radio from a Midwest Nerd">
	
	
	
	
	<link rel ="stylesheet" type="text/css" href="../../css/style.css">
	
	<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jeff.glass/post/pyspace/pyspace_featured.png"/>
<meta name="twitter:title" content="py.space"/>
<meta name="twitter:description" content="Trying out Anvil&#39;s py.space product"/>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css" />	
	<script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />

	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BZTF8S6M1E"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BZTF8S6M1E', { 'anonymize_ip': false });
}
</script>


	<link rel="icon" href="../../favicon.ico?v=2"> 
	
</head>
<body>
	
	<main>
		<header>

<div class="fixed z-20 flex flex-row items-end w-full p-2 bg-green-800 t-0">
    
    <div class="flex-none hidden lg:flex">
        <div class="flex-none px-2">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
        <div class="flex-none menu-item-green ">
            <a href="../../#Introduction" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Home
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../project" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Projects
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../post" class="z-30 clickable-link-box no-style-link"><span></span></a> Blog  
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../oneoff" class="z-30 clickable-link-box no-style-link"><span></span></a>
            One-Offs
        </div>
    </div>
    
    <div class="flex justify-start flex-1 w-auto lg:hidden align-left large-menu">
        <div class="flex-none menu-item-green mobile-menu-button">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </div>
        <div class="flex-none">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
    </div>
    
    
    <div class="hidden text-green-200 transition mobile-menu">
            <div class="w-auto m-auto"><a href="../../"         class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Home</a></div>
            <div class="w-auto m-auto"><a href="../../project"  class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Projects</a></div>
            <div class="w-auto m-auto"><a href="../../post"     class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Blog</a></div>
            <div class="w-auto m-auto"><a href="../../oneoff"   class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">One-Offs</a></div>
    </div>
    
    <div class="justify-end flex-1 hidden w-auto h-auto align-top md:flex social-buttons">
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.youtube.com/channel/UCjgmTMVx2B5_DOB3bCZBq7A" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg class = "z-0" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5 7H19C19.5523 7 20 7.44771 20 8V16C20 16.5523 19.5523 17 19 17H5C4.44772 17 4 16.5523 4 16V8C4 7.44772 4.44772 7 5 7ZM2 8C2 6.34315 3.34315 5 5 5H19C20.6569 5 22 6.34315 22 8V16C22 17.6569 20.6569 19 19 19H5C3.34315 19 2 17.6569 2 16V8ZM10 9L14 12L10 15V9Z" fill="currentColor"/>
            </svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.twitter.com/jeffersglass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" class="ionicon" viewBox="0 0 512 512"><path d="M496 109.5a201.8 201.8 0 01-56.55 15.3 97.51 97.51 0 0043.33-53.6 197.74 197.74 0 01-62.56 23.5A99.14 99.14 0 00348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 002.54 22.1 280.7 280.7 0 01-203-101.3A95.69 95.69 0 0036 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0135.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 01-25.94 3.4 94.38 94.38 0 01-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0139.5 405.6a203 203 0 01-23.5-1.4A278.68 278.68 0 00166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 00496 109.5z" fill="currentColor"/></svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.linkedin.com/in/jeffrey-r-glass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 512 512"><path d="M444.17,32H70.28C49.85,32,32,46.7,32,66.89V441.61C32,461.91,49.85,480,70.28,480H444.06C464.6,480,480,461.79,480,441.61V66.89C480.12,46.7,464.6,32,444.17,32ZM170.87,405.43H106.69V205.88h64.18ZM141,175.54h-.46c-20.54,0-33.84-15.29-33.84-34.43,0-19.49,13.65-34.42,34.65-34.42s33.85,14.82,34.31,34.42C175.65,160.25,162.35,175.54,141,175.54ZM405.43,405.43H341.25V296.32c0-26.14-9.34-44-32.56-44-17.74,0-28.24,12-32.91,23.69-1.75,4.2-2.22,9.92-2.22,15.76V405.43H209.38V205.88h64.18v27.77c9.34-13.3,23.93-32.44,57.88-32.44,42.13,0,74,27.77,74,87.64Z" fill="currentColor"/></svg>
        </div>
    </div>
</div>
</header>
<script>
    const btn = document.querySelector("div.mobile-menu-button")
    const mobileMenu = document.querySelector(".mobile-menu")
    const largeMenu = document.querySelector(".large-menu")
    const socialButtons = document.querySelector(".social-buttons")

    btn.addEventListener("click", () =>{
        openMenu();
    })

    function openMenu() {
        mobileMenu.classList.toggle("hidden");
        largeMenu.classList.toggle("hidden");
        socialButtons.classList.add("hidden");
    }

    
    const smSize = 640;
    const mdSize = 768;
    const largeSize = 1024;
    window.addEventListener('resize', function(event) {
        if (event.target.screen.width > smSize ){
            mobileMenu.classList.add("hidden");
            largeMenu.classList.remove("hidden");
        }
    }, true);
</script>

		<div class="w-full bg-green-800 bg-opacity-10">
			<div class="pt-16"></div>
			<article class="w-full px-16 pt-4 pb-4 m-auto lg:w-11/12 bg-gray-50">
				<h1 class="pb-2 text-4xl">py.space</h1>
				<p>Published May 18, 2024</p>
				
				
				<div>
					<span>Tags:</span>
					
					<a href="../../tags/py.space">py.space</a>
					
					<a href="../../tags/anvil">anvil</a>
					
					<a href="../../tags/python">python</a>
					
					<a href="../../tags/pycon">pycon</a>
					
				</div>
				
				
				<hr>
				<div>
					<p class="post-p">I had a lovely chat at on the floor at PyCon US with Ian Davies at <a href="https://anvil.works/">Anvil</a>, and specifically their newly launch <a href="https://py.space">py.space</a> product. In short - it's a stripped down/streamlined version of Anvil that's being offered free to users to write online Python applications.</p>
<p class="post-p">This is going to be just my lab notebook as a stumble through the product for 45 minutes before the next talks. Ian demo'd a bunch of their features to embed Python inside webpages, and as you can imagine, that's something I value! So let's see how it works in the wild</p>
<p class="post-p">This isn't an ad, and I hope it doesn't come off as one. I'm just flush with PyCon exciting and looking to try things out. So many of us have identified both web and Python as the most popular platforms of the future, and I'm always game to try out another one.</p>
<h2 class="post-h2">Getting Started</h2>
<p class="post-p">A welcome page with a 'get started' button is always welcome:</p>
<img class="post-img" src="intro.png" alt="A screenshot of the py.space homepage showing a 'get started' button">
<p class="post-p">On the login page, py.space describes itself as "An online space for writing, running and deploying Python scripts and APIs." The API's note is curious, and not sometime I think I've seen made available in other web-python-IDE's of this type.</p>
<p class="post-p">On registering via GitHub, you're asked to choose a username. I'll be <code>@JeffGlass</code>, I suppose.</p>
<p class="post-p">The first thing that pops up is a section asking "What do you Want to Build?", and offers Script, API, and GUI as options. There's also some featured examples.</p>
<img class="post-img" src="whatdoyouwanttobuild.png" alt="A screenshot of py.space showing the section 'What do you Want to Build' and offering three options.">
<h2 class="post-h2">Scripts</h2>
<p class="post-p">Let's try making a Script. Clicking that button brings up a pop-up code editor - looks like it's <a href="https://codemirror.net/">CodeMirror</a> under the hood, which <a href="https://docs.pyscript.net/2024.5.2/user-guide/editor/">PyScript also loves</a>.  The rest of the user interface is quite minimal - Run and Schedule buttons, packages and secrets tabs, a private/public togger, sharing, settings, and help.</p>
<img class="post-img" src="helloworld.png" alt="The anvil code editor showing 'print(Hello, world!').">
<p class="post-p">Let's try running the provided <code>print("Hello, world!")</code> code:</p>
<img class="post-img" src="output.png" alt="">
<p class="post-p">After taking 8-10 seconds with the run button saying "Launching", we see the output in a new pane at the bottom of the editor. A second execution took about a quarter of a second - so something special must be initializing the first time you run a project.</p>
<p class="post-p">Let's try importing some packages. I know very little about Anvil and it's packaging model, so let's see what we can learn.</p>
<img class="post-img" src="packages.png" alt="">
<p class="post-p">The packages pane has fields for <code>package</code> and <code>version</code>, or <span class="italic">edit requirements.txt directly</span>, which is an interesting option. I wonder if can point to dev packages on test.pypi.org? Typing in my favorite testing packages, <a href="https://github.com/Textualize/rich">rich</a>, Anvil brings up a list of versions which seems up to date - so either it's really querying PyPI or its internal mirroring/compatibility is handling it well. Let's use the latest version.</p>
<img class="post-img" src="richversions.png" alt="">
<p class="post-p">It took about 45 seconds of "Building" before the installation process was complete - and in the middle of it, an interesting security warning popped up. Not sure if that's something generated on the Anvil side or from PyPI or what, but it's an interesting touch.</p>
<img src="security.png" alt="" class="post-img">
<p class="post-p">The code does indeed run! Looks like there's not support for terminal formmatting commands, but I that's very reasonable - something like a fully <a href="https://xtermjs.org/">xterm.js</a> is a bit heavy for this application. It does seem like the packages pane visually bleeds into the input pane - I've pinged the py.space forum about that, assuming its an ok place to report bugs.</p>
<p class="post-p">One of the things Ian showed off as we were chatting this morning is the embedding feature... so let's try that out! Here's the code above embedded in my site:</p>
<script src="https://py.space/embed/g/HQD5BNPM6C5Q4L7Z.js"></script>
<p class="post-p">I'm hoping that will appear for most people, but in case it doesn't (or as a historical record in case it changes later), here's what I see:</p>
<img src="embedded.png" alt="" class="post-img w-1/2">
<p class="post-p">Ah, so what appears is the full code snippet, with a similar nice UI and such. The action is Fork to Run, which is interesting... so there's not a way for viewers of this block to actually <span class="italic">run</span> this code directly on my site - they'd need to fork it to their own (free) Anvil account in order to run it. This takes me back to a lot of the conversations that were had around <a href="https://pyscript.com">PyScript.com</a> (PSDC) - I'm not a part of that team, but naturally I know a bunch of the players. Where PSDC offers an option for <span class="italic">any</span> user to run your code and then fork it if they want, in this context forking is required. Not that either is better or worse, just different models of what code sharing means.</p>
<h2 class="post-h2">API</h2>
<p class="post-p">Let's go back to the start page and try building an API</p>
<img src="apistart.png" alt="" class="post-img">
<p class="post-p">We get a very similar editor, this time pre-populated with what I assume is boilerplate Anvil server code. I also see there's a URL at the bottom: <a href="https://clumsy-nervous-handle.anvil.app/hello">https://clumsy-nervous-handle.anvil.app/hello</a>, which looks like an auto-generated prefix. Just hitting that URL in my browser at this point does give me a <code>{"hello":"world"}</code> response - so they API is live from the time of creation! That's pretty slick.</p>
<p class="post-p">Let's try adding another endpoint that doubles the number we feed it. It's not obvious from the <a href="https://py.space/docs/tutorials/api">py.space docs</a> how we do this, but my understanding from Ian is that all of these are full Anvil apps under the hood, so let's see if the <a href="https://anvil.works/docs/server">Anvil Docs</a> answer that question. And yes! Not too complicated:</p>
<p class="post-p">Now, hitting <a href="https://clumsy-nervous-handle.anvil.app/double/10"><code>https://clumsy-nervous-handle.anvil.app/double/10</code></a> gives me back <code>{"result":20}</code> as desired. Instant API online... very very cool.</p>
<script src="https://py.space/embed/g/6ACLXGXUEHSZYL5F.js"></script>
<h2 class="post-h2">GUI?</h2>
<img src="gui.png" alt="" class="post-img">
<p class="post-p">The GUI editor looks very exciting... and from Ian's demo, has more features than I can explored before the next open space at the con. So that'll have to wait till another time.</p>
<p class="post-p">Here ends the stream of consciousness. Hope all are having a great pycon!</p>
				</div>
				
			</article>
			<footer>
    <div class = "pt-4 pb-6 text-center text-gray-500" id="Footer">
        <p class="">All contents © Jeff Glass 2024. All rights reserved.</p>
        <p>See <a href="../../cloud-resume-challenge" class="underline">how this site was built</a>.</p>
    </div>
</footer>
		</div>
	</main>


	
</body>
</html>
