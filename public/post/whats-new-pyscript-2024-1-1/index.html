<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>What&#39;s New in PyScript 2024.1.1</title>
	<meta name="description" content="Electronics, Making, Software Development, and Amateur Radio from a Midwest Nerd">
	
	
	
	
	<link rel ="stylesheet" type="text/css" href="../../css/style.css">
	
	<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jeff.glass/post/whats-new-pyscript-2024-1-1/py_2024_1_1_featured.png"/>
<meta name="twitter:title" content="What&#39;s New in PyScript 2024.1.1"/>
<meta name="twitter:description" content="What&#39;s new and what&#39;s changed in PyScript 2024.1.1"/>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css" />	
	<script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />

	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BZTF8S6M1E"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BZTF8S6M1E', { 'anonymize_ip': false });
}
</script>


	<link rel="icon" href="../../favicon.ico?v=2"> 
	
</head>
<body>
	
	<main>
		<header>

<div class="fixed z-20 flex flex-row items-end w-full p-2 bg-green-800 t-0">
    
    <div class="flex-none hidden lg:flex">
        <div class="flex-none px-2">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
        <div class="flex-none menu-item-green ">
            <a href="../../#Introduction" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Home
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../project" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Projects
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../post" class="z-30 clickable-link-box no-style-link"><span></span></a> Blog  
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../oneoff" class="z-30 clickable-link-box no-style-link"><span></span></a>
            One-Offs
        </div>
    </div>
    
    <div class="flex justify-start flex-1 w-auto lg:hidden align-left large-menu">
        <div class="flex-none menu-item-green mobile-menu-button">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </div>
        <div class="flex-none">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
    </div>
    
    
    <div class="hidden text-green-200 transition mobile-menu">
            <div class="w-auto m-auto"><a href="../../"         class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Home</a></div>
            <div class="w-auto m-auto"><a href="../../project"  class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Projects</a></div>
            <div class="w-auto m-auto"><a href="../../post"     class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Blog</a></div>
            <div class="w-auto m-auto"><a href="../../oneoff"   class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">One-Offs</a></div>
    </div>
    
    <div class="justify-end flex-1 hidden w-auto h-auto align-top md:flex social-buttons">
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.youtube.com/channel/UCjgmTMVx2B5_DOB3bCZBq7A" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg class = "z-0" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5 7H19C19.5523 7 20 7.44771 20 8V16C20 16.5523 19.5523 17 19 17H5C4.44772 17 4 16.5523 4 16V8C4 7.44772 4.44772 7 5 7ZM2 8C2 6.34315 3.34315 5 5 5H19C20.6569 5 22 6.34315 22 8V16C22 17.6569 20.6569 19 19 19H5C3.34315 19 2 17.6569 2 16V8ZM10 9L14 12L10 15V9Z" fill="currentColor"/>
            </svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.twitter.com/jeffersglass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" class="ionicon" viewBox="0 0 512 512"><path d="M496 109.5a201.8 201.8 0 01-56.55 15.3 97.51 97.51 0 0043.33-53.6 197.74 197.74 0 01-62.56 23.5A99.14 99.14 0 00348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 002.54 22.1 280.7 280.7 0 01-203-101.3A95.69 95.69 0 0036 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0135.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 01-25.94 3.4 94.38 94.38 0 01-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0139.5 405.6a203 203 0 01-23.5-1.4A278.68 278.68 0 00166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 00496 109.5z" fill="currentColor"/></svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.linkedin.com/in/jeffrey-r-glass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 512 512"><path d="M444.17,32H70.28C49.85,32,32,46.7,32,66.89V441.61C32,461.91,49.85,480,70.28,480H444.06C464.6,480,480,461.79,480,441.61V66.89C480.12,46.7,464.6,32,444.17,32ZM170.87,405.43H106.69V205.88h64.18ZM141,175.54h-.46c-20.54,0-33.84-15.29-33.84-34.43,0-19.49,13.65-34.42,34.65-34.42s33.85,14.82,34.31,34.42C175.65,160.25,162.35,175.54,141,175.54ZM405.43,405.43H341.25V296.32c0-26.14-9.34-44-32.56-44-17.74,0-28.24,12-32.91,23.69-1.75,4.2-2.22,9.92-2.22,15.76V405.43H209.38V205.88h64.18v27.77c9.34-13.3,23.93-32.44,57.88-32.44,42.13,0,74,27.77,74,87.64Z" fill="currentColor"/></svg>
        </div>
    </div>
</div>
</header>
<script>
    const btn = document.querySelector("div.mobile-menu-button")
    const mobileMenu = document.querySelector(".mobile-menu")
    const largeMenu = document.querySelector(".large-menu")
    const socialButtons = document.querySelector(".social-buttons")

    btn.addEventListener("click", () =>{
        openMenu();
    })

    function openMenu() {
        mobileMenu.classList.toggle("hidden");
        largeMenu.classList.toggle("hidden");
        socialButtons.classList.add("hidden");
    }

    
    const smSize = 640;
    const mdSize = 768;
    const largeSize = 1024;
    window.addEventListener('resize', function(event) {
        if (event.target.screen.width > smSize ){
            mobileMenu.classList.add("hidden");
            largeMenu.classList.remove("hidden");
        }
    }, true);
</script>

		<div class="w-full bg-green-800 bg-opacity-10">
			<div class="pt-16"></div>
			<article class="w-full px-16 pt-4 pb-4 m-auto lg:w-11/12 bg-gray-50">
				<h1 class="pb-2 text-4xl">What&#39;s New in PyScript 2024.1.1</h1>
				<p>Published January 4, 2024</p>
				
				
				<div>
					<span>Tags:</span>
					
					<a href="../../tags/pyscript">pyscript</a>
					
					<a href="../../tags/python">python</a>
					
				</div>
				
				
				<hr>
				<div>
					<p class="post-p">New Year, New Features! PyScript had it's first release in 2024 today with the <a href="">release of PyScript 2024.1.1</a>. A few banner new features have been added, including:
    <ul class="post-ul">
        <li>The <code>mip</code> package manager is now available for Micropython</li>
        <li><code>pyscript.js_modules</code> now acts like a module</li>
        <li>The internal <a href="https://xtermjs.org/">xterm.js</a> terminal of scripts with a <code>terminal</code> attribute is exposed.</li>
    </ul>
</p>
<p class="post">With four releases in under three months, PyScript is really hitting its release stride. As always, if you have feature requests, bug reports, or questions, please let us know <a href="https://github.com/pyscript/pyscipt">on GitHub</a> or <a href="https://discord.gg/u7Wcvza9Tx">on Discord</a>.</p>

<div id="TOC" class="grid justify-center p-1 m-auto my-4 bg-gray-200">
    <span>Jump To: <span>
    <a href="#mip"><code>MicroPython Package Management</code></a> • 
    <a href="#js-modules">js_modules as a module</a> • 
    <a href="#xterm">Exposed XTerm.js</a> • 
    <a href="#community">Community</a> • 
</div>

<h2 class="post-h2" id="mip">MicroPython Packages</h2>
<p class="post-p">PyScript has long had a <code>py-config</code> tag which allows users to, among other things, <a href="https://pyscript.github.io/docs/2023.12.1/user-guide/configuration/#packages">install packages from PyPI or from local wheels</a> when PyScript loads. It also smartly loads <a href="https://pyodide.org/en/stable/usage/packages-in-pyodide.html">Pyodide-specific versions of some packages</a>, with their C/Rust/Fortran extensions pre-compiled to work with Pyodide/WebAssembly.</p>
<p class="post-p">But <a href="https://micropython.org/">MicroPython</a>, which was introduced as an additional engine for PyScript in <a href="https://jeff.glass/post/whats-new-pyscript-2023-11-1/">version 2023.11.1</a>, has an entirely different concept of package management. Rather than PyPI, most packages are installed from a resource called <a href="https://github.com/micropython/micropython-lib">MicroPython-Lib</a> using a tool called <a href="https://docs.micropython.org/en/latest/reference/packages.html"><code>mip</code></a>. <span class="font-semibold">Today's release brings <code>mip</code> to PyScript, allow users to install 3rd-party MicroPython packages in their PyScript pages</span>.</p>
<p class="post-p">The added <code>packages</code> key in <code>&lt;mpy-config&gt;</code> takes a list of strings; PyScript then calls <a href="https://docs.micropython.org/en/latest/reference/packages.html#installing-packages-with-mip"><code>mip.install()</code> with each of those strings</a>. All basic package names are looked-up on MicroPython-Lib - here's how to install, for instance, the <a href="https://github.com/micropython/micropython-lib/blob/master/python-stdlib/curses.ascii/curses/ascii.py"><code>curses.ascii</code> package</a> for inspecting the properties of specific characters:</p>

<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#309;font-weight:bold">script</span> <span style="color:#309">type</span><span style="color:#555">=</span><span style="color:#c30">&#34;module&#34;</span> <span style="color:#309">src</span><span style="color:#555">=</span><span style="color:#c30">&#34;https://pyscript.net/releases/2024.1.1/core.js&#34;</span>&gt;&lt;/<span style="color:#309;font-weight:bold">script</span>&gt;
&lt;<span style="color:#309;font-weight:bold">mpy-config</span>&gt;
    packages = [&#39;curses.ascii&#39;]
&lt;/<span style="color:#309;font-weight:bold">mpy-config</span>&gt;
&lt;<span style="color:#309;font-weight:bold">script</span> <span style="color:#309">type</span><span style="color:#555">=</span><span style="color:#c30">&#34;mpy&#34;</span>&gt;
    from curses <span style="color:#069;font-weight:bold">import</span> ascii
    print(f<span style="color:#c30">&#34;{ascii.isalpha(&#34;</span>A<span style="color:#c30">&#34;)=})&#34;</span>)
    print(f<span style="color:#c30">&#34;{ascii.isalpha(&#34;</span><span style="color:#f60">3</span><span style="color:#c30">&#34;)=})&#34;</span>)
&lt;/<span style="color:#309;font-weight:bold">script</span>&gt;</code></pre></td></tr></table>
</div>
</div>

<p class="post-p"><code>mip</code> can do a lot more than just install from MicroPython-lib - it call also install files directly from a URL, from GitHub using some shorthand syntax, or a whole package specified with <code>package.json</code>:</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python3" data-lang="python3"><span style="color:#555">&lt;</span>mpy<span style="color:#555">-</span>config<span style="color:#555">&gt;</span>
    packages <span style="color:#555">=</span> [<span style="color:#c30">&#39;https://raw.githubusercontent.com/micropython/micropython-lib/master/python-stdlib/bisect/bisect.py&#39;</span>,
                <span style="color:#c30">&#39;github:jeffersglass/some-project/foo.py&#39;</span>,]
<span style="color:#555">&lt;/</span>mpy<span style="color:#555">-</span>config<span style="color:#555">&gt;</span></code></pre></td></tr></table>
</div>
</div>

<p class="post-p"><code>mip</code> is now also available programmatically within Micropython via the <code>mip</code> package, if you need to programmatically fetch and install packages:</p>

<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python3" data-lang="python3"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">mip</span>

<span style="color:#09f;font-style:italic"># Install default version from micropython-lib</span>
mip<span style="color:#555">.</span>install(<span style="color:#c30">&#39;keyword&#39;</span>)

<span style="color:#09f;font-style:italic"># Install from raw URL</span>
mip<span style="color:#555">.</span>install(<span style="color:#c30">&#39;https://raw.githubusercontent.com/micropython/micropython-lib/master/python-stdlib/bisect/bisect.py&#39;</span>)

<span style="color:#09f;font-style:italic"># Install from GitHub shortcut</span>
mip<span style="color:#555">.</span>install(<span style="color:#c30">&#34;github:jeffersglass/some-project/foo.py&#34;</span>)</code></pre></td></tr></table>
</div>
</div>

<p class="post-p"><a href="https://github.com/dpgeorge/micropython/blob/webassembly-add-modjs/ports/webassembly/pyscript/manifest.py">A number of MicroPython packages are pre-installed in PyScript</a> by default. Now, with <code>mip</code> integrated, <a href="https://awesome-micropython.com/">the wide universe of MicroPython packages</a> is available in the browser.</p>

<h2 class="post-h2" id="js-modules"><code>js_modules</code> as modules</h2>
<p class="post-p">The concept of a <a href="https://docs.python.org/3/tutorial/modules.html">Python Package or Module</a> doesn't map exactly to the idea of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">Modules</a> in the JavaScript world. As such, there are interesting decisions to be made when it comes to the places where these two ideas intersect.</p>
<p class="post-p">One of these places is the <code>js_modules</code> key in <code>&lt;py-config&gt;</code> that was <a href="post/whats-new-pyscript-2023-12-1/#js-module-import">introduced in PyScript 2023.12.1</a>. As a reminder, <code>js_modules</code> instructs PyScript to install a JavaScript (ECMAScript) module in the browser, and make it available to Python by a given name:</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#309;font-weight:bold">canvas</span> <span style="color:#309">id</span><span style="color:#555">=</span><span style="color:#c30">&#34;fw&#34;</span>&gt;&lt;/<span style="color:#309;font-weight:bold">canvas</span>&gt;
&lt;<span style="color:#309;font-weight:bold">mpy-config</span>&gt;
    [js_modules.main]
    &#34;https://cdn.jsdelivr.net/npm/fireworks-js@2.10.7/+esm&#34; = &#34;Fireworks_Module&#34;
&lt;/<span style="color:#309;font-weight:bold">mpy-config</span>&gt;
&lt;<span style="color:#309;font-weight:bold">script</span> <span style="color:#309">type</span><span style="color:#555">=</span><span style="color:#c30">&#34;mpy&#34;</span>&gt;
    from pyscript <span style="color:#069;font-weight:bold">import</span> <span style="color:#366">document</span>
    from pyscript.js_modules <span style="color:#069;font-weight:bold">import</span> Fireworks_Module
    container <span style="color:#555">=</span> <span style="color:#366">document</span>.querySelector(<span style="color:#c30">&#39;#fw&#39;</span>)
    fireworks <span style="color:#555">=</span> Fireworks_Module.Fireworks.<span style="color:#069;font-weight:bold">new</span>(container)
    fireworks.start()
&lt;/<span style="color:#309;font-weight:bold">script</span>&gt;</code></pre></td></tr></table>
</div>
</div>

<div class="m-4 border-2 border-blue-800">
    <center>
        <canvas id="fw" style="width:80%"></canvas>
    </center>
</div>
<mpy-config>
    [js_modules.main]
    "https://cdn.jsdelivr.net/npm/fireworks-js@2.10.7/+esm" = "Fireworks"
</mpy-config>
<script type="mpy">
    from pyscript import document
    from pyscript.js_modules import Fireworks
    container = document.querySelector('#fw')
    fireworks = Fireworks.Fireworks.new(container)
    fireworks.start()
</script>
<p class="post-img-caption">Enjoy some fireworks!</p> 

<p class="post-p">That <code>Fireworks_Module.Fireworks.new...</code> is a little bit awkward though. In Python, we might find it more comfortable to import the "Fireworks object" directly from the "Fireworks Module" (big ole air quotes there). <span class="font-semibold">Now, in PyScript 2024.1.1, you can:</span></p>

<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="display:block;width:100%;background-color:#d8dada"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="display:block;width:100%;background-color:#d8dada"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python3" data-lang="python3"><span style="color:#555">&lt;</span>canvas <span style="color:#366">id</span><span style="color:#555">=</span><span style="color:#c30">&#34;fw&#34;</span><span style="color:#555">&gt;&lt;/</span>canvas<span style="color:#555">&gt;</span>
<span style="color:#555">&lt;</span>mpy<span style="color:#555">-</span>config<span style="color:#555">&gt;</span>
    [js_modules<span style="color:#555">.</span>main]
    <span style="color:#c30">&#34;https://cdn.jsdelivr.net/npm/fireworks-js@2.10.7/+esm&#34;</span> <span style="color:#555">=</span> <span style="color:#c30">&#34;Fireworks_Module&#34;</span>
<span style="color:#555">&lt;/</span>mpy<span style="color:#555">-</span>config<span style="color:#555">&gt;</span>
<span style="color:#555">&lt;</span>script <span style="color:#366">type</span><span style="color:#555">=</span><span style="color:#c30">&#34;mpy&#34;</span><span style="color:#555">&gt;</span>
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
<span style="display:block;width:100%;background-color:#d8dada">    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript.js_modules.Fireworks_Module</span> <span style="color:#069;font-weight:bold">import</span> Fireworks
</span>    container <span style="color:#555">=</span> document<span style="color:#555">.</span>querySelector(<span style="color:#c30">&#39;#fw&#39;</span>)
<span style="display:block;width:100%;background-color:#d8dada">    fireworks <span style="color:#555">=</span> Fireworks<span style="color:#555">.</span>new(container)
</span>    fireworks<span style="color:#555">.</span>start()
<span style="color:#555">&lt;/</span>script<span style="color:#555">&gt;</span></code></pre></td></tr></table>
</div>
</div>

<p class="post-p">In fact, <span class="italic">any attribute of a JavaScript object can now be imported as if it was a submodule using this syntax</span>. Hopefully, this make working with JavaScript modules feel more intuitive for Python users. See <a href="https://github.com/pyodide/pyodide/discussions/4346">this discussion on the Pyodide GitHub</a> for more info.</p>

<h2 class="post-h2" id="xterm">Exposed XTerm Object</h2>
<p class="post-p">When using the <a href="https://pyscript.github.io/docs/2023.12.1/user-guide/terminal/"><code>terminal</code></a> attribute of a <code>&lt;script type="py"&gt;</code> tag, several users have reported wanting to take more direct control over the <a href="https://xtermjs.org/docs/api/terminal/classes/terminal/#resize">xterm.js Terminal</a> object that's used for the output. That Terminal is now present as the <code>terminal</code> property of the script tag itself.</p>
<p class="post-p">When running code in the main thread, the <code>document.currentScript</code> helper can be used to quickly grab the current script tag. Here's an example which resizes the terminal to 40 columns by 6 rows, then prints a long string to demonstrate the new size:</p>

<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python3" data-lang="python3"><span style="color:#555">&lt;</span>script <span style="color:#366">type</span><span style="color:#555">=</span><span style="color:#c30">&#34;py&#34;</span> terminal<span style="color:#555">&gt;</span>
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    document<span style="color:#555">.</span>currentScript<span style="color:#555">.</span>terminal<span style="color:#555">.</span>resize(<span style="color:#f60">40</span>, <span style="color:#f60">6</span>)
    <span style="color:#366">print</span>(<span style="color:#c30">&#34;Lorem ipsum dolor sit amet consectetur, adipisicing elit. Repellat alias atque quae ad voluptatem officia delectus voluptatum autem possimus ut libero, neque ipsum nam non totam iusto ratione quibusdam esse.&#34;</span>) 
<span style="color:#555">&lt;/</span>script<span style="color:#555">&gt;</span></code></pre></td></tr></table>
</div>
</div>

<p class="post-p">Code running in workers does not update <code>document.currentScript</code>, since there could indeed be multiple scripts running at the same time. So a different method must be used to select the appropriate script tag. Since only a single PyScript tag may have a terminal attached (currently), the following should consistently work (the example code achieves the same effect as the one above, then opens a REPL).</p>

<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python3" data-lang="python3"><span style="color:#555">&lt;</span>script <span style="color:#366">type</span><span style="color:#555">=</span><span style="color:#c30">&#34;py&#34;</span> terminal worker<span style="color:#555">&gt;</span>
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    term <span style="color:#555">=</span> document<span style="color:#555">.</span>querySelector(<span style="color:#c30">&#39;script[terminal]&#39;</span>)<span style="color:#555">.</span>terminal
    term<span style="color:#555">.</span>resize(<span style="color:#f60">40</span>, <span style="color:#f60">6</span>)
    <span style="color:#366">print</span>(<span style="color:#c30">&#34;Lorem ipsum dolor sit amet consectetur, adipisicing elit. Repellat alias atque quae ad voluptatem officia delectus voluptatum autem possimus ut libero, neque ipsum nam non totam iusto ratione quibusdam esse.&#34;</span>) 

    <span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">code</span>
    code<span style="color:#555">.</span>interact(local<span style="color:#555">=</span><span style="color:#366">globals</span>())
<span style="color:#555">&lt;/</span>script<span style="color:#555">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p class="post-p">Here's a live-running example of the above code. Try running <code>dir(term)</code> to inspect the Terminal object.</p>
<div class="p-1 m-4 border-2 border-blue-800 rounded-md">
    <script type="py" terminal worker>
        from pyscript import document
        term = document.querySelector('script[terminal]').terminal
        term.resize(40, 6)
        print("Lorem ipsum dolor sit amet consectetur, adipisicing elit. Repellat alias atque quae ad voluptatem officia delectus voluptatum autem possimus ut libero, neque ipsum nam non totam iusto ratione quibusdam esse.")
    
        import code
        code.interact(local=globals())
    </script>
</div>

<style>
    code:not(.nocode):not(.language-python):not(.language-python3):not(.language-html):not(.language-js){
        --tw-text-opacity: 1;
        color: rgba(5, 120, 85, var(--tw-text-opacity));
    }
</style>
<script src="mini-coi.js"></script>
<script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
<link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">

<h2 class="post-h2" id="community">Community Updates</h2>
<p class="post-p">PyScript Maintainer Nicholas Tollervey has been hard at work improving PyScript's visibility and community presence. To that end, the every-other-week PyScript FUN meetings - which showcase cool demos and experiments from the PyScript devs and community - have <a href="https://discord.gg/mhZ3XRZs?event=1191794268348633151">moved to Discord!</a> Come join us every-other-thursday to see what's been cooked up with PyScript - and share something of your own!</p>
<p class="post-p">Speaking personally, I find these calls to be a ton of fun - the demos span the gamut from deeply technical to quirky to fun and festive. If you're interested in getting to know PyScript a little better, come check them out!</p>
				</div>
				
			</article>
			<footer>
    <div class = "pt-4 pb-6 text-center text-gray-500" id="Footer">
        <p class="">All contents © Jeff Glass 2022. All rights reserved.</p>
        <p>See <a href="../../cloud-resume-challenge" class="underline">how this site was built</a>.</p>
    </div>
</footer>
		</div>
	</main>


	
</body>
</html>
