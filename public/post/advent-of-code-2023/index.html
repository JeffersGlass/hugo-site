<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Advent of Code 2023</title>
	<meta name="description" content="Electronics, Making, Software Development, and Amateur Radio from a Midwest Nerd">
	
	
	
	
	<link rel ="stylesheet" type="text/css" href="../../css/style.css">
	
	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advent of Code 2023"/>
<meta name="twitter:description" content="Solutions to the annual holiday coding challenge, in Python and PyScript"/>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css" />	
	<script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />

	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BZTF8S6M1E"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BZTF8S6M1E', { 'anonymize_ip': false });
}
</script>


	<link rel="icon" href="../../favicon.ico?v=2"> 
	
</head>
<body>
	
	<main>
		<header>

<div class="fixed z-20 flex flex-row items-end w-full p-2 bg-green-800 t-0">
    
    <div class="flex-none hidden lg:flex">
        <div class="flex-none px-2">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
        <div class="flex-none menu-item-green ">
            <a href="../../#Introduction" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Home
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../project" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Projects
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../post" class="z-30 clickable-link-box no-style-link"><span></span></a> Blog  
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../oneoff" class="z-30 clickable-link-box no-style-link"><span></span></a>
            One-Offs
        </div>
    </div>
    
    <div class="flex justify-start flex-1 w-auto lg:hidden align-left large-menu">
        <div class="flex-none menu-item-green mobile-menu-button">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </div>
        <div class="flex-none">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
    </div>
    
    
    <div class="hidden text-green-200 transition mobile-menu">
            <div class="w-auto m-auto"><a href="../../"         class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Home</a></div>
            <div class="w-auto m-auto"><a href="../../project"  class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Projects</a></div>
            <div class="w-auto m-auto"><a href="../../post"     class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Blog</a></div>
            <div class="w-auto m-auto"><a href="../../oneoff"   class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">One-Offs</a></div>
    </div>
    
    <div class="justify-end flex-1 hidden w-auto h-auto align-top md:flex social-buttons">
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.youtube.com/channel/UCjgmTMVx2B5_DOB3bCZBq7A" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg class = "z-0" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5 7H19C19.5523 7 20 7.44771 20 8V16C20 16.5523 19.5523 17 19 17H5C4.44772 17 4 16.5523 4 16V8C4 7.44772 4.44772 7 5 7ZM2 8C2 6.34315 3.34315 5 5 5H19C20.6569 5 22 6.34315 22 8V16C22 17.6569 20.6569 19 19 19H5C3.34315 19 2 17.6569 2 16V8ZM10 9L14 12L10 15V9Z" fill="currentColor"/>
            </svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.twitter.com/jeffersglass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" class="ionicon" viewBox="0 0 512 512"><path d="M496 109.5a201.8 201.8 0 01-56.55 15.3 97.51 97.51 0 0043.33-53.6 197.74 197.74 0 01-62.56 23.5A99.14 99.14 0 00348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 002.54 22.1 280.7 280.7 0 01-203-101.3A95.69 95.69 0 0036 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0135.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 01-25.94 3.4 94.38 94.38 0 01-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0139.5 405.6a203 203 0 01-23.5-1.4A278.68 278.68 0 00166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 00496 109.5z" fill="currentColor"/></svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.linkedin.com/in/jeffrey-r-glass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 512 512"><path d="M444.17,32H70.28C49.85,32,32,46.7,32,66.89V441.61C32,461.91,49.85,480,70.28,480H444.06C464.6,480,480,461.79,480,441.61V66.89C480.12,46.7,464.6,32,444.17,32ZM170.87,405.43H106.69V205.88h64.18ZM141,175.54h-.46c-20.54,0-33.84-15.29-33.84-34.43,0-19.49,13.65-34.42,34.65-34.42s33.85,14.82,34.31,34.42C175.65,160.25,162.35,175.54,141,175.54ZM405.43,405.43H341.25V296.32c0-26.14-9.34-44-32.56-44-17.74,0-28.24,12-32.91,23.69-1.75,4.2-2.22,9.92-2.22,15.76V405.43H209.38V205.88h64.18v27.77c9.34-13.3,23.93-32.44,57.88-32.44,42.13,0,74,27.77,74,87.64Z" fill="currentColor"/></svg>
        </div>
    </div>
</div>
</header>
<script>
    const btn = document.querySelector("div.mobile-menu-button")
    const mobileMenu = document.querySelector(".mobile-menu")
    const largeMenu = document.querySelector(".large-menu")
    const socialButtons = document.querySelector(".social-buttons")

    btn.addEventListener("click", () =>{
        openMenu();
    })

    function openMenu() {
        mobileMenu.classList.toggle("hidden");
        largeMenu.classList.toggle("hidden");
        socialButtons.classList.add("hidden");
    }

    
    const smSize = 640;
    const mdSize = 768;
    const largeSize = 1024;
    window.addEventListener('resize', function(event) {
        if (event.target.screen.width > smSize ){
            mobileMenu.classList.add("hidden");
            largeMenu.classList.remove("hidden");
        }
    }, true);
</script>

		<div class="w-full bg-green-800 bg-opacity-10">
			<div class="pt-16"></div>
			<article class="w-full px-16 pt-4 pb-4 m-auto lg:w-11/12 bg-gray-50">
				<h1 class="pb-2 text-4xl">Advent of Code 2023</h1>
				<p>Published November 30, 2023</p>
				
				
				<div>
					<span>Tags:</span>
					
					<a href="../../tags/codeadvent">codeadvent</a>
					
					<a href="../../tags/python">python</a>
					
					<a href="../../tags/pyscript">pyscript</a>
					
				</div>
				
				
				<hr>
				<div>
					<script src="mini-coi.js"></script>
<p class="post-p">Where does the time go?? Surely it can't be time for another <a href="https://adventofcode.com/">Advent of Code</a> challenge? Alas, it's once again December, which means 25 more mini coding challenges for the next twenty five days. This will be my sixth year particpating in advent of code, and my fourth writing about it - you can check out my <a href="tags/codeadvent/">previous years' Advent of Code posts</a> as well, if you like.</p>
<p class="post-p">As in years before, I'll be writing my solutions to run in <a href="https://pyscript.net">PyScript</a>  right here in the browser window. Feel free to enter your own AoC input and test your answers right here on this page! All the computations run in your own browser window, so no AoC data is transmitted to me or any server, and there's zero overhead on my end, so test as many times as you like.</p>
<p class="post-p">Personally, I have three goals in presenting these solutions: learn form the challenges themselves, dogfood the use of PyScript to learn where our gaps in functionality are, and demonstrate the use of Python in the browser. Here's hoping we can achieve all three.</p>
<div id="TOC" class="w-auto pt-2 pb-4 pl-2 mr-2 -ml-2 align-top bg-gray-200">
    <p class="text-2xl relative-anchor" id="toc">Table of Contents</p>
    <div class="ml-8 font-semibold" id="toc-contents">
    </div>
</div>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day0'>Day 0: Testing the Machinery</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">As with past years, I'm making use of Hugo's templating system to allow me to quickly write and share each day's code. The setup will look much like this, with a brief explanation here, the code below, and an option to run live demos. The <code>get_input</code> function handles getting input from the textarea or file upload.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day0-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day0-upload-input" name="day0-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day0-run-btn" py-click="main_day0">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day0-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day0-upload-input')
            </script>
            <script type="py" src="day0/main.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day0-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day0="#day0-code" class="active tab code-title">day0.py</li>
         
        
    </ul>

    <div id="day0-code" data-tab-content-day0 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> display
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day0</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day0&#34;</span>)
    display(data, target<span style="color:#555">=</span><span style="color:#c30">&#34;day0-output&#34;</span>)</code></pre></td></tr></table>
</div>
</div></div>
        
    </div>

     

    

    

</div>
<script>
    const tabsday0 = document.querySelectorAll('[data-tab-target-day0]')
    const tabContentsday0 = document.querySelectorAll('[data-tab-content-day0]')

    tabsday0.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay0
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday0.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday0.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day1_1'>Day 1: Trebuchet?! (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">In most years, the first day's problems aren't too complicated - they tend to focus on reading input and parsing strings, and this year's is no exception.</p><p>I opted to pursue a solution purely using regex, since it's always good to stretch those muscles early on in Advent of Code. I couldn't quite find the right pattern to match <span class="italic">both</span> the case where there are are multiple numerals in the input line or only one, so I cheated a bit and split them into two separate cases.</p><p class="post-p">Ultimately, this solution probably could have looked more like the solution to part 2 - using <code>re.finditer()</code> to find all the digits in a given line, then sorting that collection to find the earliest and latest digits, but it felt good to refresh on regex matching.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day1_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day1_1-upload-input" name="day1_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day1_1-run-btn" py-click="main_day1_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day1_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day1_1-upload-input')
            </script>
            <script type="py" src="day1/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day1_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day1_1="#day1_1-code" class="active tab code-title">day1_1.py</li>
         
        
    </ul>

    <div id="day1_1-code" data-tab-content-day1_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> display
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day1_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day1_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    
    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>
    pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;[a-zA-Z]*(?P&lt;first&gt;\d)\w*(?P&lt;last&gt;\d)[a-zA-Z]*&#34;</span>)
    single_digit_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;[a-zA-Z]*(?P&lt;first&gt;\d)\w*&#34;</span>)

    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        match <span style="color:#555">=</span> re<span style="color:#555">.</span>match(pattern, line)
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> match: match <span style="color:#555">=</span> re<span style="color:#555">.</span>match(single_digit_pattern, line)
        number <span style="color:#555">=</span> <span style="color:#f60">10</span> <span style="color:#555">*</span> (first<span style="color:#555">:=</span> <span style="color:#366">int</span>(match<span style="color:#555">.</span>group(<span style="color:#c30">&#34;first&#34;</span>))) <span style="color:#555">+</span> (<span style="color:#366">int</span>(match<span style="color:#555">.</span>group(<span style="color:#c30">&#34;last&#34;</span>)) <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#34;last&#34;</span> <span style="color:#000;font-weight:bold">in</span> match<span style="color:#555">.</span>groupdict() <span style="color:#069;font-weight:bold">else</span> <span style="color:#366">int</span>(first))
        <span style="color:#366">sum</span> <span style="color:#555">+=</span> number

    display(<span style="color:#366">sum</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day1_1-output&#34;</span>)     </code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday1_1 = document.querySelectorAll('[data-tab-target-day1_1]')
    const tabContentsday1_1 = document.querySelectorAll('[data-tab-content-day1_1]')

    tabsday1_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay1_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday1_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday1_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day1_2'>Day 1: Trebuchet?! (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">"The strings which represent a given numeral" <span class="italic">feels</span> like something that should be included in Python's 'batteries included', but as far as I can tell, it isn't. Rather than pull something in from PYPI, I created a tiny dictionary matching numerals to strings. After finding all the literal numerals and 'spelled-out' numerals in each line, we find the earliest and latest match, grab their value with the tiny <code>get_value()</code> function, and concatenate them to get the value of that line.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day1_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day1_2-upload-input" name="day1_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day1_2-run-btn" py-click="main_day1_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day1_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day1_2-upload-input')
            </script>
            <script type="py" src="day1/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day1_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day1_2="#day1_2-code" class="active tab code-title">day1_2.py</li>
         
        
    </ul>

    <div id="day1_2-code" data-tab-content-day1_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> display
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

patterns <span style="color:#555">=</span> {
    <span style="color:#c30">&#34;one&#34;</span>: <span style="color:#f60">1</span>,
    <span style="color:#c30">&#34;two&#34;</span>: <span style="color:#f60">2</span>,
    <span style="color:#c30">&#34;three&#34;</span>: <span style="color:#f60">3</span>,
    <span style="color:#c30">&#34;four&#34;</span>: <span style="color:#f60">4</span>,
    <span style="color:#c30">&#34;five&#34;</span>: <span style="color:#f60">5</span>,
    <span style="color:#c30">&#34;six&#34;</span>: <span style="color:#f60">6</span>,
    <span style="color:#c30">&#34;seven&#34;</span>: <span style="color:#f60">7</span>,
    <span style="color:#c30">&#34;eight&#34;</span>: <span style="color:#f60">8</span>,
    <span style="color:#c30">&#34;nine&#34;</span>: <span style="color:#f60">9</span>,
    }

digit_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#39;\d&#39;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_value</span>(s):
    <span style="color:#069;font-weight:bold">try</span>:
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">int</span>(s)
    <span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ValueError</span>:
        <span style="color:#069;font-weight:bold">return</span> patterns[s]

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day1_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day1_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>
    
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        line_matches <span style="color:#555">=</span> []

        <span style="color:#069;font-weight:bold">for</span> pattern <span style="color:#000;font-weight:bold">in</span> patterns:
            line_matches<span style="color:#555">.</span>extend(re<span style="color:#555">.</span>finditer(pattern, line))

        line_matches<span style="color:#555">.</span>extend(re<span style="color:#555">.</span>finditer(digit_pattern, line))
        line_matches<span style="color:#555">.</span>sort(key <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">lambda</span> m: m<span style="color:#555">.</span>start())
        <span style="color:#366">sum</span> <span style="color:#555">+=</span> <span style="color:#f60">10</span> <span style="color:#555">*</span> get_value(line_matches[<span style="color:#f60">0</span>]<span style="color:#555">.</span>group(<span style="color:#f60">0</span>)) <span style="color:#555">+</span> get_value(line_matches[<span style="color:#555">-</span><span style="color:#f60">1</span>]<span style="color:#555">.</span>group(<span style="color:#f60">0</span>))

    display(<span style="color:#366">sum</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day1_2-output&#34;</span>)  

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day1_2()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday1_2 = document.querySelectorAll('[data-tab-target-day1_2]')
    const tabContentsday1_2 = document.querySelectorAll('[data-tab-content-day1_2]')

    tabsday1_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay1_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday1_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday1_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day2_1'>Day 2: Cube Conundrum (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Happy once again that I picked up the regex track early this year! The specific syntax around things like named group, non-capturing groups, <code>findall</code> vs <code>finditer</code> is easy to forget if you haven't touched it in a few months.</p><p class="post-p">Today's challenge was pretty simple - iterating over lines of input text and, based on some condition, adding a sentinel number to a given total. There's probably a cleaner way to break out of that nest-inner-loop than using a flag, but it works.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day2_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day2_1-upload-input" name="day2_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day2_1-run-btn" py-click="main_day2_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day2_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day2_1-upload-input')
            </script>
            <script type="py" src="day2/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day2_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day2_1="#day2_1-code" class="active tab code-title">day2_1.py</li>
         
        
    </ul>

    <div id="day2_1-code" data-tab-content-day2_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#366">print</span>(<span style="color:#c30">&#34;Getting local input&#34;</span>)    
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            <span style="color:#366">dict</span><span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
    

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day2_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day2_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    day_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;Game (?P&lt;day_number&gt;\d+)&#34;</span>)
    color_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;(?P&lt;quantity&gt;\d+) (?P&lt;color&gt;(?:red)|(?:green)|(?:blue))&#34;</span>)
    
    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        id_value <span style="color:#555">=</span> <span style="color:#366">int</span>(re<span style="color:#555">.</span>match(day_pattern, line)<span style="color:#555">.</span>group(<span style="color:#c30">&#34;day_number&#34;</span>))
        pulls <span style="color:#555">=</span> line<span style="color:#555">.</span>split(<span style="color:#c30">&#34;;&#34;</span>)
        valid_line <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>
        <span style="color:#069;font-weight:bold">for</span> p <span style="color:#000;font-weight:bold">in</span> pulls:
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> valid_line: <span style="color:#069;font-weight:bold">break</span>
            colors <span style="color:#555">=</span> re<span style="color:#555">.</span>finditer(color_pattern, p)
            <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> colors:
                color, quant <span style="color:#555">=</span> c<span style="color:#555">.</span>group(<span style="color:#c30">&#39;color&#39;</span>), <span style="color:#366">int</span>(c<span style="color:#555">.</span>group(<span style="color:#c30">&#39;quantity&#39;</span>))
                <span style="color:#069;font-weight:bold">if</span> (color <span style="color:#555">==</span> <span style="color:#c30">&#39;red&#39;</span> <span style="color:#000;font-weight:bold">and</span> quant <span style="color:#555">&gt;</span> <span style="color:#f60">12</span>) <span style="color:#000;font-weight:bold">or</span> (color <span style="color:#555">==</span> <span style="color:#c30">&#39;green&#39;</span> <span style="color:#000;font-weight:bold">and</span> quant <span style="color:#555">&gt;</span> <span style="color:#f60">13</span>) <span style="color:#000;font-weight:bold">or</span> (color <span style="color:#555">==</span> <span style="color:#c30">&#39;blue&#39;</span> <span style="color:#000;font-weight:bold">and</span> quant <span style="color:#555">&gt;</span> <span style="color:#f60">14</span>): 
                    valid_line <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
                    id_value <span style="color:#555">=</span> <span style="color:#f60">0</span>
                    <span style="color:#069;font-weight:bold">break</span>                    
        <span style="color:#366">sum</span> <span style="color:#555">+=</span> id_value
    
    display(<span style="color:#366">sum</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day2_1-output&#34;</span>)

<span style="color:#09f;font-style:italic"># Only runs if not running in the browser</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day2_1()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday2_1 = document.querySelectorAll('[data-tab-target-day2_1]')
    const tabContentsday2_1 = document.querySelectorAll('[data-tab-content-day2_1]')

    tabsday2_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay2_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday2_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday2_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day2_2'>Day 2: Cube Conundrum (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">The second part of today's challenge isn't too different from the first; we iterate over all the parts of each line of the input and, for each line, calculate the appropriate product of the minmum number of cubes of each color.</p>
<p class="post-p">In both parts of today's challenge, I've found it useful to run my code locally for testing before popping it into PyScript. You can see my strategy for this in both parts of today's solution - similar to what Pyodide recommends, we can check if the <code>js</code> module is in <code>sys.modules</code>. If it is, we can assume we're running in PyScript/in the Browser; if not, we're likely in "normal" desktop python.</p><p class="post-p">The need to override <code>display()</code> was the original reason I had implemented the <code>output</code> attribute of PyScript tags in previous releases of PyScript... perhaps I'll want to do that again.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day2_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day2_2-upload-input" name="day2_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day2_2-run-btn" py-click="main_day2_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day2_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day2_2-upload-input')
            </script>
            <script type="py" src="day2/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day2_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day2_2="#day2_2-code" class="active tab code-title">day2_2.py</li>
         
        
    </ul>

    <div id="day2_2-code" data-tab-content-day2_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
    
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day2_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day2_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    color_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;(?P&lt;quantity&gt;\d+) (?P&lt;color&gt;(?:red)|(?:green)|(?:blue))&#34;</span>)
    
    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        max_red, max_green, max_blue <span style="color:#555">=</span> <span style="color:#f60">0</span>, <span style="color:#f60">0</span>, <span style="color:#f60">0</span>

        colors <span style="color:#555">=</span> re<span style="color:#555">.</span>finditer(color_pattern, line)
        <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> colors:
            color, quant <span style="color:#555">=</span> c<span style="color:#555">.</span>group(<span style="color:#c30">&#39;color&#39;</span>), <span style="color:#366">int</span>(c<span style="color:#555">.</span>group(<span style="color:#c30">&#39;quantity&#39;</span>))
            <span style="color:#069;font-weight:bold">if</span> color <span style="color:#555">==</span> <span style="color:#c30">&#39;red&#39;</span> <span style="color:#000;font-weight:bold">and</span> quant <span style="color:#555">&gt;</span> max_red: max_red <span style="color:#555">=</span> quant
            <span style="color:#069;font-weight:bold">if</span> color <span style="color:#555">==</span> <span style="color:#c30">&#39;green&#39;</span> <span style="color:#000;font-weight:bold">and</span> quant <span style="color:#555">&gt;</span> max_green: max_green <span style="color:#555">=</span> quant
            <span style="color:#069;font-weight:bold">if</span> color <span style="color:#555">==</span> <span style="color:#c30">&#39;blue&#39;</span> <span style="color:#000;font-weight:bold">and</span> quant <span style="color:#555">&gt;</span> max_blue: max_blue <span style="color:#555">=</span> quant     
        power <span style="color:#555">=</span> max_red <span style="color:#555">*</span> max_green <span style="color:#555">*</span> max_blue
        <span style="color:#366">sum</span> <span style="color:#555">+=</span> power
    
    display(<span style="color:#366">sum</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day2_2-output&#34;</span>)

<span style="color:#09f;font-style:italic"># Only runs if not running in the browser</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:    
    main_day2_2()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday2_2 = document.querySelectorAll('[data-tab-target-day2_2]')
    const tabContentsday2_2 = document.querySelectorAll('[data-tab-content-day2_2]')

    tabsday2_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay2_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday2_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday2_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day3_1'>Day 3: Gear Ratios (Part 1)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Advent of Code has a history of requiring the parsing of data in grids, and this year we're starting early. While it's tempting to build a data structure that represents each position in the grid and is querable, for sparsely populated grid I've ususally found it's easier and faster to build a <code>set</code> of the relevant points and query for presence in that set. This handles a lot of edge cases automatically - like in this case, a <code>part number</code> being adjacent to the edge of the grid.</p>
<p class="post-p">Once we have a collection of the symbols and numbers ('parts') in the input, we can iterate over each number and determine whether any of the coordinates corresponding to 'symbols' are adjacent to their positions, then sum them up.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day3_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day3_1-upload-input" name="day3_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day3_1-run-btn" py-click="main_day3_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day3_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day3_1-upload-input')
            </script>
            <script type="py" src="day3/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day3_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day3_1="#day3_1-code" class="active tab code-title">day3_1.py</li>
         
        
    </ul>

    <div id="day3_1-code" data-tab-content-day3_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            <span style="color:#366">dict</span><span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> namedtuple
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List

position <span style="color:#555">=</span> namedtuple(<span style="color:#c30">&#39;position&#39;</span>, [<span style="color:#c30">&#39;line&#39;</span>, <span style="color:#c30">&#39;char&#39;</span>])

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Number</span>:
    value: <span style="color:#366">int</span>
    line: <span style="color:#366">int</span>
    start: <span style="color:#366">int</span>
    end: <span style="color:#366">int</span>
    
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day3_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day3_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    symbols <span style="color:#555">=</span> <span style="color:#366">set</span>()
    part_numbers: List[Number] <span style="color:#555">=</span> []

    symbol_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;[^0123456789.]&#34;</span>)
    number_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;(\d+)&#34;</span>)

    <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data):
        <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(symbol_pattern, line):
            symbols<span style="color:#555">.</span>add((line_index, s<span style="color:#555">.</span>start()))
        <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(number_pattern, line):
            part_numbers<span style="color:#555">.</span>append(Number(
                    value<span style="color:#555">=</span><span style="color:#366">int</span>(n<span style="color:#555">.</span>group()),
                    line <span style="color:#555">=</span> line_index,
                    start <span style="color:#555">=</span> n<span style="color:#555">.</span>start(),
                    end <span style="color:#555">=</span> n<span style="color:#555">.</span>end()))
    
    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> number <span style="color:#000;font-weight:bold">in</span> part_numbers:
        <span style="color:#069;font-weight:bold">if</span> (number<span style="color:#555">.</span>line, number<span style="color:#555">.</span>start<span style="color:#555">-</span><span style="color:#f60">1</span>) <span style="color:#000;font-weight:bold">in</span> symbols <span style="color:#000;font-weight:bold">or</span> \
        (number<span style="color:#555">.</span>line, number<span style="color:#555">.</span>end) <span style="color:#000;font-weight:bold">in</span> symbols:
            <span style="color:#366">sum</span> <span style="color:#555">+=</span> number<span style="color:#555">.</span>value
            <span style="color:#069;font-weight:bold">continue</span>

        <span style="color:#069;font-weight:bold">for</span> index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(number<span style="color:#555">.</span>start<span style="color:#555">-</span><span style="color:#f60">1</span>, number<span style="color:#555">.</span>end<span style="color:#555">+</span><span style="color:#f60">1</span>):
            <span style="color:#069;font-weight:bold">if</span> (number<span style="color:#555">.</span>line<span style="color:#555">-</span><span style="color:#f60">1</span>, index) <span style="color:#000;font-weight:bold">in</span> symbols <span style="color:#000;font-weight:bold">or</span>\
            (number<span style="color:#555">.</span>line<span style="color:#555">+</span><span style="color:#f60">1</span>, index) <span style="color:#000;font-weight:bold">in</span> symbols:
                <span style="color:#366">sum</span> <span style="color:#555">+=</span> number<span style="color:#555">.</span>value
                <span style="color:#069;font-weight:bold">continue</span>
    display(<span style="color:#366">sum</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day3_1-output&#34;</span>)

<span style="color:#09f;font-style:italic"># Only runs if not running in the browser</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:   
    main_day3_1()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday3_1 = document.querySelectorAll('[data-tab-target-day3_1]')
    const tabContentsday3_1 = document.querySelectorAll('[data-tab-content-day3_1]')

    tabsday3_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay3_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday3_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday3_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day3_2'>Day 3: Gear Ratios (Part 2)</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">I do like dataclasses - having autocomplete on the handful of elements in a simple "data-like" object is an easy way to prevent confusion and typos. You'll see on this day's problem I've actually combined both <code>Dataclasses</code> and <code>namedtuples</code>; the latter being easier to use as the keys of a dictionary. But if there's any Mutable data - in my case, a flag which helps track whether a specific gear has seen zero, one, or two or more times already - dataclass is quite useful.</p>
<p class="post-p">With that change to the parsing, the solution is to again iterate over all of the numbers, find which correspond to the given criteria, and sum them up.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day3_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day3_2-upload-input" name="day3_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day3_2-run-btn" py-click="main_day3_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day3_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day3_2-upload-input')
            </script>
            <script type="py" src="day3/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day3_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day3_2="#day3_2-code" class="active tab code-title">day3_2.py</li>
         
        
    </ul>

    <div id="day3_2-code" data-tab-content-day3_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            <span style="color:#366">dict</span><span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> namedtuple
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List, Dict

position <span style="color:#555">=</span> namedtuple(<span style="color:#c30">&#39;position&#39;</span>, [<span style="color:#c30">&#39;line&#39;</span>, <span style="color:#c30">&#39;char&#39;</span>])

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Gear</span>:
    value: <span style="color:#366">int</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>
    seen_once: <span style="color:#366">bool</span> <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span> 

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Number</span>:
    value: <span style="color:#366">int</span>
    line: <span style="color:#366">int</span>
    start: <span style="color:#366">int</span>
    end: <span style="color:#366">int</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">processGear</span>(g: Gear, part_number: <span style="color:#366">int</span>):
    <span style="color:#c30">&#34;&#34;&#34;_summary_
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        g (Gear): The gear currently being processed
</span><span style="color:#c30">        part_number (int): The part number being processed
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns: The value to be added to the running sum, if any
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    <span style="color:#069;font-weight:bold">if</span> g<span style="color:#555">.</span>seen_once:
        g<span style="color:#555">.</span>value <span style="color:#555">*=</span> part_number<span style="color:#555">.</span>value
        g<span style="color:#555">.</span>seen_once <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span> <span style="color:#09f;font-style:italic"># Seen twice</span>
        <span style="color:#069;font-weight:bold">return</span> g<span style="color:#555">.</span>value
    <span style="color:#069;font-weight:bold">else</span>:
        <span style="color:#069;font-weight:bold">if</span> g<span style="color:#555">.</span>value <span style="color:#555">==</span> <span style="color:#f60">0</span>: 
            g<span style="color:#555">.</span>value <span style="color:#555">=</span> part_number<span style="color:#555">.</span>value
            g<span style="color:#555">.</span>seen_once <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>

        <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day3_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day3_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    gears: Dict[position: Gear] <span style="color:#555">=</span> {}
    part_numbers: List[Number] <span style="color:#555">=</span> []

    gear_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;[*]&#34;</span>)
    number_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;(\d+)&#34;</span>)

    <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data):
        <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(gear_pattern, line):
            gears[position(line<span style="color:#555">=</span>line_index, char<span style="color:#555">=</span>s<span style="color:#555">.</span>start())] <span style="color:#555">=</span> Gear()
        <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(number_pattern, line):
            part_numbers<span style="color:#555">.</span>append(Number(
                    value<span style="color:#555">=</span><span style="color:#366">int</span>(n<span style="color:#555">.</span>group()),
                    line <span style="color:#555">=</span> line_index,
                    start <span style="color:#555">=</span> n<span style="color:#555">.</span>start(),
                    end <span style="color:#555">=</span> n<span style="color:#555">.</span>end()))
    
    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>

    <span style="color:#069;font-weight:bold">for</span> number <span style="color:#000;font-weight:bold">in</span> part_numbers:
        <span style="color:#069;font-weight:bold">for</span> pos <span style="color:#000;font-weight:bold">in</span> [(number<span style="color:#555">.</span>line, number<span style="color:#555">.</span>start<span style="color:#555">-</span><span style="color:#f60">1</span>), <span style="color:#09f;font-style:italic"># left of number</span>
                    (number<span style="color:#555">.</span>line, number<span style="color:#555">.</span>end), <span style="color:#09f;font-style:italic"># right of number</span>
                    <span style="color:#555">*</span>((number<span style="color:#555">.</span>line<span style="color:#555">-</span><span style="color:#f60">1</span>, index) <span style="color:#069;font-weight:bold">for</span> index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(number<span style="color:#555">.</span>start<span style="color:#555">-</span><span style="color:#f60">1</span>, number<span style="color:#555">.</span>end<span style="color:#555">+</span><span style="color:#f60">1</span>)), <span style="color:#09f;font-style:italic"># above number</span>
                    <span style="color:#555">*</span>((number<span style="color:#555">.</span>line<span style="color:#555">+</span><span style="color:#f60">1</span>, index) <span style="color:#069;font-weight:bold">for</span> index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(number<span style="color:#555">.</span>start<span style="color:#555">-</span><span style="color:#f60">1</span>, number<span style="color:#555">.</span>end<span style="color:#555">+</span><span style="color:#f60">1</span>))  <span style="color:#09f;font-style:italic"># below number</span>
                    ]:
            <span style="color:#069;font-weight:bold">if</span> pos <span style="color:#000;font-weight:bold">in</span> gears:
                <span style="color:#366">sum</span> <span style="color:#555">+=</span> processGear(gears[pos], part_number<span style="color:#555">=</span>number)
    
    display(<span style="color:#366">sum</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day3_2-output&#34;</span>)


<span style="color:#09f;font-style:italic"># Only runs if not running in the browser</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:  
    main_day3_2()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday3_2 = document.querySelectorAll('[data-tab-target-day3_2]')
    const tabContentsday3_2 = document.querySelectorAll('[data-tab-content-day3_2]')

    tabsday3_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay3_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday3_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday3_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day4_1'>Day 4 (Part 1): Scratchcards</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Python's set operations really shine here - one we've parsed each line of input into its winning numbers and scratchcard numbers, we can use <code>isdisjoint()</code> to determine if there's any overlap between the two sets, and and <code>winning_numbers & my_numbers</code> to find it if it is. From there, we calculate 2 to the power of the length of this set of numbers, and sum up those values.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day4_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day4_1-upload-input" name="day4_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day4_1-run-btn" py-click="main_day4_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day4_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day4_1-upload-input')
            </script>
            <script type="py" src="day4/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day4_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day4_1="#day4_1-code" class="active tab code-title">day4_1.py</li>
         
        
    </ul>

    <div id="day4_1-code" data-tab-content-day4_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

card_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;Card (\d+)&#34;</span>)
number_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;\d+&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day4_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day4_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)

    <span style="color:#366">sum</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        _, numbers_section <span style="color:#555">=</span> line<span style="color:#555">.</span>split(<span style="color:#c30">&#34;:&#34;</span>)
        winning_numbers <span style="color:#555">=</span> <span style="color:#366">set</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">0</span>) <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(number_pattern, numbers_section<span style="color:#555">.</span>split(<span style="color:#c30">&#34;|&#34;</span>)[<span style="color:#f60">0</span>]))
        my_numbers <span style="color:#555">=</span> <span style="color:#366">set</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">0</span>) <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(number_pattern, numbers_section<span style="color:#555">.</span>split(<span style="color:#c30">&#34;|&#34;</span>)[<span style="color:#f60">1</span>]))
        value <span style="color:#555">=</span> <span style="color:#f60">0</span> <span style="color:#069;font-weight:bold">if</span> winning_numbers<span style="color:#555">.</span>isdisjoint(my_numbers) <span style="color:#069;font-weight:bold">else</span> <span style="color:#f60">2</span> <span style="color:#555">**</span> (<span style="color:#366">len</span>(winning_numbers <span style="color:#555">&amp;</span> my_numbers) <span style="color:#555">-</span> <span style="color:#f60">1</span>)
        <span style="color:#366">sum</span> <span style="color:#555">+=</span> value

    display(<span style="color:#366">sum</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day4_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day4_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday4_1 = document.querySelectorAll('[data-tab-target-day4_1]')
    const tabContentsday4_1 = document.querySelectorAll('[data-tab-content-day4_1]')

    tabsday4_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay4_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday4_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday4_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day4_2'>Day 4 (Part 2): Scratchcards</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">I like to look at the Advent of Code subreddit after finishing a day's problems, to look at alternate solutions and see what pitfulls I shared/avoided. In this case, most of Day 4 Part 2's solutions talked about using recurssion, which honestly haden't occured to me. Since each Scratchcard can only propogate copies to higher indices, my impulse was to just walk the data once and pile up the additional scratchcards with each additional index processed, in a functional-programming way. I do think this is faster.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day4_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day4_2-upload-input" name="day4_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day4_2-run-btn" py-click="main_day4_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day4_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day4_2-upload-input')
            </script>
            <script type="py" src="day4/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day4_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day4_2="#day4_2-code" class="active tab code-title">day4_2.py</li>
         
        
    </ul>

    <div id="day4_2-code" data-tab-content-day4_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

card_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;Card (\d+)&#34;</span>)
number_pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;\d+&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day4_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day4_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)
    card_counts <span style="color:#555">=</span> [<span style="color:#f60">1</span>] <span style="color:#555">*</span> <span style="color:#366">len</span>(data)

    <span style="color:#069;font-weight:bold">for</span> i, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data):
        _, numbers_section <span style="color:#555">=</span> line<span style="color:#555">.</span>split(<span style="color:#c30">&#34;:&#34;</span>)
        winning_numbers <span style="color:#555">=</span> <span style="color:#366">set</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">0</span>) <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(number_pattern, numbers_section<span style="color:#555">.</span>split(<span style="color:#c30">&#34;|&#34;</span>)[<span style="color:#f60">0</span>]))
        my_numbers <span style="color:#555">=</span> <span style="color:#366">set</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">0</span>) <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(number_pattern, numbers_section<span style="color:#555">.</span>split(<span style="color:#c30">&#34;|&#34;</span>)[<span style="color:#f60">1</span>]))
        <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#f60">1</span>, <span style="color:#366">len</span>(winning_numbers <span style="color:#555">&amp;</span> my_numbers)<span style="color:#555">+</span><span style="color:#f60">1</span>):
            card_counts[i <span style="color:#555">+</span> m] <span style="color:#555">+=</span> card_counts[i]

    display(<span style="color:#366">sum</span>(card_counts), target<span style="color:#555">=</span><span style="color:#c30">&#34;day4_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day4_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday4_2 = document.querySelectorAll('[data-tab-target-day4_2]')
    const tabContentsday4_2 = document.querySelectorAll('[data-tab-content-day4_2]')

    tabsday4_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay4_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday4_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday4_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day5_1'>Day 5 (Part 1): If You Give A Seed A Fertilizer</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">If programming is thinking-written-down, I find a significant amount of my thinking occurs in devising the data structure and object format to encapsulate a given problem. In this case, the <code>almanac_op</code> function which applies a mapping rule to a given number. I tend to write out full docstrings for these <span class="italic">'problem-critical'</span> code sections, and not worry about them for more procedural code like a main method.</p>
<p class="post-p">One of the opporunties to stub your toe on a challenge like Day 5 Part 1 is remembering that, once you've applied a mapping rule successfully to a given location, you need to skip the remainder of the rules and cary on to the next set of mappings immediately. Otherwise, you risk applying multiple rules from a single set, which is incorrect.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day5_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day5_1-upload-input" name="day5_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day5_1-run-btn" py-click="main_day5_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day5_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day5_1-upload-input')
            </script>
            <script type="py" src="day5/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day5_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day5_1="#day5_1-code" class="active tab code-title">day5_1.py</li>
         
        
    </ul>

    <div id="day5_1-code" data-tab-content-day5_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Tuple

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">almanac_op</span>(given: <span style="color:#366">int</span>, dest_start: <span style="color:#366">int</span>, source_start: <span style="color:#366">int</span>, length: <span style="color:#366">int</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span>:
    <span style="color:#c30">&#34;&#34;&#34;Takes an index of a location and applies the specified mapping rule to it
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        given (int): The starting location
</span><span style="color:#c30">        dest_start (int): The starting index of the destination range
</span><span style="color:#c30">        source_start (int): The starting index of the source range
</span><span style="color:#c30">        length (int): The length of both ranges
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns:
</span><span style="color:#c30">        int: The new location after the mapping
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    <span style="color:#069;font-weight:bold">if</span> given <span style="color:#555">&gt;=</span> source_start <span style="color:#000;font-weight:bold">and</span> given <span style="color:#555">&lt;=</span> (source_start <span style="color:#555">+</span> length <span style="color:#555">-</span> <span style="color:#f60">1</span>):
        <span style="color:#069;font-weight:bold">return</span> (given <span style="color:#555">-</span> source_start) <span style="color:#555">+</span> dest_start
    <span style="color:#069;font-weight:bold">else</span>:
        <span style="color:#069;font-weight:bold">return</span> given


<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day5_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day5_1&#34;</span>)

    seeds <span style="color:#555">=</span> [<span style="color:#366">int</span>(s<span style="color:#555">.</span>group()) <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(<span style="color:#c30">&#34;\d+&#34;</span>, data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)[<span style="color:#f60">0</span>]<span style="color:#555">.</span>split(<span style="color:#c30">&#34;:&#34;</span>)[<span style="color:#f60">1</span>])]
    map_sets <span style="color:#555">=</span> [[l<span style="color:#555">.</span>split(<span style="color:#c30">&#34; &#34;</span>) <span style="color:#069;font-weight:bold">for</span> l <span style="color:#000;font-weight:bold">in</span> s<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)[<span style="color:#f60">1</span>:]] <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#34;</span>)]
   
    <span style="color:#366">min</span> <span style="color:#555">=</span> <span style="color:#366">float</span>(<span style="color:#c30">&#39;inf&#39;</span>)

    <span style="color:#069;font-weight:bold">for</span> seed <span style="color:#000;font-weight:bold">in</span> seeds:
        <span style="color:#069;font-weight:bold">for</span> map_set <span style="color:#000;font-weight:bold">in</span> map_sets:
            <span style="color:#069;font-weight:bold">for</span> op <span style="color:#000;font-weight:bold">in</span> map_set:
                result <span style="color:#555">=</span> almanac_op(seed, <span style="color:#366">int</span>(op[<span style="color:#f60">0</span>]), <span style="color:#366">int</span>(op[<span style="color:#f60">1</span>]), <span style="color:#366">int</span>(op[<span style="color:#f60">2</span>]))
                <span style="color:#069;font-weight:bold">if</span> result <span style="color:#555">!=</span> seed:
                    seed <span style="color:#555">=</span> result
                    <span style="color:#069;font-weight:bold">break</span>
            
        <span style="color:#069;font-weight:bold">if</span> seed <span style="color:#555">&lt;</span> <span style="color:#366">min</span>: <span style="color:#366">min</span> <span style="color:#555">=</span> seed

    display(<span style="color:#c30">&#34;FINAL:&#34;</span>, <span style="color:#366">min</span>, target<span style="color:#555">=</span><span style="color:#c30">&#34;day5_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:  
    main_day5_1()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday5_1 = document.querySelectorAll('[data-tab-target-day5_1]')
    const tabContentsday5_1 = document.querySelectorAll('[data-tab-content-day5_1]')

    tabsday5_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay5_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday5_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday5_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day5_2'>Day 5 (Part 2): If You Give A Seed A Fertilizer</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">I fell prey to a classic Advent of Code trick: <span class="italic">"We see your Part 1 solution works for single numbers... now make it work for MILLIONS OF NUMBERS!"</span> Still, not too complicated of a solution, even if it did take me some time to work out the logic around which relationships of sources/destinations/ranges cause which effects to happen to the resulting ranges.</p><p class="post-p">There's also the possibility here to get stuck in the track of modifying a collection (say, the current list of ranges) while also iterating over that collection. The old <code>new_collection += result</code>, <code>collection = new_collection</code> pattern helps here.</p><p class="post-p">I'm also leaving my <code>assert</code> startments in at the end of this code, as they were hugely helpful in debugging my primary algorithm.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day5_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day5_2-upload-input" name="day5_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day5_2-run-btn" py-click="main_day5_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day5_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day5_2-upload-input')
            </script>
            <script type="py" src="day5/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day5_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day5_2="#day5_2-code" class="active tab code-title">day5_2.py</li>
         
        
    </ul>

    <div id="day5_2-code" data-tab-content-day5_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">operator</span> <span style="color:#069;font-weight:bold">import</span> itemgetter
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Tuple

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">almanac_op_range</span>(seed_ranges, dest_start: <span style="color:#366">int</span>, source_start: <span style="color:#366">int</span>, length:<span style="color:#366">int</span>) <span style="color:#555">-&gt;</span> Tuple[Tuple[Tuple[<span style="color:#366">int</span>, <span style="color:#366">int</span>]], Tuple[Tuple[<span style="color:#366">int</span>, <span style="color:#366">int</span>]]]:
    <span style="color:#c30">&#34;&#34;&#34;Given a list of ranges as input, and a single mapping given by a starting
</span><span style="color:#c30">    destination index, starting source index, and length, return a list of ranges
</span><span style="color:#c30">    that have not been touched by this rule and a list of ranges that have been modified
</span><span style="color:#c30">    by this rule
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        seed_ranges (_type_): _description_
</span><span style="color:#c30">        dest_start (int): _description_
</span><span style="color:#c30">        source_start (int): _description_
</span><span style="color:#c30">        length (int): _description_
</span><span style="color:#c30">
</span><span style="color:#c30">    Raises:
</span><span style="color:#c30">        ValueError: A troubleshooting step, to validate that the rules for processing
</span><span style="color:#c30">        ranges cover all possible cases
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns:
</span><span style="color:#c30">        List[Tuple[int, int]], List[Tuple[int, int]]: A list of untouched ranges, followe
</span><span style="color:#c30">        by a list of ranges that had been moved
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    source_end <span style="color:#555">=</span> source_start <span style="color:#555">+</span> length <span style="color:#555">-</span> <span style="color:#f60">1</span>
    dest_end <span style="color:#555">=</span> dest_start <span style="color:#555">+</span> length <span style="color:#555">-</span> <span style="color:#f60">1</span>

    untouched <span style="color:#555">=</span> []
    moved <span style="color:#555">=</span> []
    <span style="color:#069;font-weight:bold">for</span> given <span style="color:#000;font-weight:bold">in</span> seed_ranges:
        given_start, given_end <span style="color:#555">=</span> given[<span style="color:#f60">0</span>], given[<span style="color:#f60">1</span>]
        <span style="color:#09f;font-style:italic">#print(f&#34;given = {given_start, given_end}, dest={dest_start, dest_end}, source={source_start, source_end}&#34;)</span>

        <span style="color:#069;font-weight:bold">if</span> given_end <span style="color:#555">&lt;</span> source_start <span style="color:#000;font-weight:bold">or</span> given_start <span style="color:#555">&gt;</span> source_end: <span style="color:#09f;font-style:italic">#outside of source range</span>
            untouched<span style="color:#555">.</span>append(given)
        
        <span style="color:#069;font-weight:bold">elif</span> given_start <span style="color:#555">&gt;=</span> source_start <span style="color:#000;font-weight:bold">and</span> given_end <span style="color:#555">&lt;=</span> source_end: <span style="color:#09f;font-style:italic"># given entirely within source range</span>
            moved<span style="color:#555">.</span>append(((given_start <span style="color:#555">-</span> source_start <span style="color:#555">+</span> dest_start), (given_end <span style="color:#555">-</span> source_start <span style="color:#555">+</span> dest_start)))
        
        <span style="color:#069;font-weight:bold">elif</span> given_start <span style="color:#555">&lt;</span> source_start <span style="color:#000;font-weight:bold">and</span> given_end <span style="color:#555">&gt;</span> source_end: <span style="color:#09f;font-style:italic"># given entirely surrounds source range</span>
            untouched<span style="color:#555">.</span>append((given_start, source_start<span style="color:#555">-</span><span style="color:#f60">1</span>))
            untouched<span style="color:#555">.</span>append((source_end <span style="color:#555">+</span> <span style="color:#f60">1</span>, given_end))
            moved<span style="color:#555">.</span>append((dest_start, dest_end))
        
        <span style="color:#069;font-weight:bold">elif</span> given_start <span style="color:#555">&gt;=</span> source_start <span style="color:#000;font-weight:bold">and</span> given_end <span style="color:#555">&gt;</span> source_end: <span style="color:#09f;font-style:italic"># starts is within source, end isn&#39;t</span>
            moved<span style="color:#555">.</span>append((given_start <span style="color:#555">-</span> source_start <span style="color:#555">+</span> dest_start,source_end<span style="color:#555">-</span>source_start<span style="color:#555">+</span>dest_start))
            untouched<span style="color:#555">.</span>append((source_end<span style="color:#555">+</span><span style="color:#f60">1</span>, given_end))

        <span style="color:#069;font-weight:bold">elif</span> given_start <span style="color:#555">&lt;</span> source_start <span style="color:#000;font-weight:bold">and</span> given_end <span style="color:#555">&lt;=</span> source_end: <span style="color:#09f;font-style:italic"># starts before source, ends inside</span>
            untouched<span style="color:#555">.</span>append((given_start, source_start <span style="color:#555">-</span><span style="color:#f60">1</span>))
            moved<span style="color:#555">.</span>append((dest_start,given_end<span style="color:#555">-</span>source_start<span style="color:#555">+</span>dest_start))
        <span style="color:#069;font-weight:bold">else</span>:
            <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">&#34;Should never be here&#34;</span>)
        
    <span style="color:#069;font-weight:bold">return</span> untouched, moved

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day5_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day5_2&#34;</span>)

    seed_ranges <span style="color:#555">=</span> [(<span style="color:#366">int</span>(s<span style="color:#555">.</span>group(<span style="color:#f60">1</span>)), <span style="color:#366">int</span>(s<span style="color:#555">.</span>group(<span style="color:#f60">1</span>)) <span style="color:#555">+</span> <span style="color:#366">int</span>(s<span style="color:#555">.</span>group(<span style="color:#f60">2</span>)) <span style="color:#555">-</span> <span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(<span style="color:#c30">r</span><span style="color:#c30">&#34;(\d+) (\d+)&#34;</span>, data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)[<span style="color:#f60">0</span>]<span style="color:#555">.</span>split(<span style="color:#c30">&#34;:&#34;</span>)[<span style="color:#f60">1</span>])]
    map_sets <span style="color:#555">=</span> [[l<span style="color:#555">.</span>split(<span style="color:#c30">&#34; &#34;</span>) <span style="color:#069;font-weight:bold">for</span> l <span style="color:#000;font-weight:bold">in</span> s<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)[<span style="color:#f60">1</span>:]] <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#34;</span>)][<span style="color:#f60">1</span>:]

    untouched <span style="color:#555">=</span> seed_ranges
    <span style="color:#069;font-weight:bold">for</span> map_set <span style="color:#000;font-weight:bold">in</span> map_sets:
        moved <span style="color:#555">=</span> []  
        <span style="color:#069;font-weight:bold">for</span> op <span style="color:#000;font-weight:bold">in</span> map_set:
            untouched, new_moved <span style="color:#555">=</span> almanac_op_range(untouched, <span style="color:#366">int</span>(op[<span style="color:#f60">0</span>]), <span style="color:#366">int</span>(op[<span style="color:#f60">1</span>]), <span style="color:#366">int</span>(op[<span style="color:#f60">2</span>]))
            moved<span style="color:#555">.</span>extend(new_moved)
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> untouched: <span style="color:#069;font-weight:bold">break</span> <span style="color:#09f;font-style:italic">#If there&#39;s no numbers that haven&#39;t been mapped, no need to keep processing rules</span>
        untouched<span style="color:#555">.</span>extend(moved)
        untouched <span style="color:#555">=</span> <span style="color:#366">list</span>(<span style="color:#366">set</span>(untouched))

    minimum <span style="color:#555">=</span> <span style="color:#366">min</span>(r[<span style="color:#f60">0</span>] <span style="color:#069;font-weight:bold">for</span> r <span style="color:#000;font-weight:bold">in</span> untouched)

    display(minimum, target<span style="color:#555">=</span><span style="color:#c30">&#34;day5_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day5_2()

    <span style="color:#09f;font-style:italic"># Assertions used during testing, left in for interest</span>
    <span style="color:#069;font-weight:bold">assert</span> almanac_op_range(((<span style="color:#f60">1</span>,<span style="color:#f60">5</span>),), <span style="color:#f60">50</span>, <span style="color:#f60">20</span>, <span style="color:#f60">5</span>) <span style="color:#555">==</span> ([(<span style="color:#f60">1</span>,<span style="color:#f60">5</span>)],[]) <span style="color:#09f;font-style:italic">#outside of source range</span>
    <span style="color:#069;font-weight:bold">assert</span> almanac_op_range([(<span style="color:#f60">100</span>,<span style="color:#f60">105</span>)], <span style="color:#f60">50</span>, <span style="color:#f60">20</span>, <span style="color:#f60">5</span>) <span style="color:#555">==</span> ([(<span style="color:#f60">100</span>,<span style="color:#f60">105</span>)],[]) <span style="color:#09f;font-style:italic">#outside of source range</span>
    <span style="color:#069;font-weight:bold">assert</span> almanac_op_range([(<span style="color:#f60">10</span>, <span style="color:#f60">20</span>)], <span style="color:#f60">50</span>, <span style="color:#f60">15</span>, <span style="color:#f60">2</span>) <span style="color:#555">==</span>  ([(<span style="color:#f60">10</span>,<span style="color:#f60">14</span>), (<span style="color:#f60">17</span>,<span style="color:#f60">20</span>)], [(<span style="color:#f60">50</span>, <span style="color:#f60">51</span>)]) <span style="color:#09f;font-style:italic"># given entirely surrounds source range</span>
    <span style="color:#069;font-weight:bold">assert</span> almanac_op_range([(<span style="color:#f60">10</span>, <span style="color:#f60">20</span>)], <span style="color:#f60">50</span>, <span style="color:#f60">5</span>, <span style="color:#f60">30</span>) <span style="color:#555">==</span> ([],[(<span style="color:#f60">55</span>, <span style="color:#f60">65</span>)]) <span style="color:#09f;font-style:italic"># given entirely within source range</span>
    <span style="color:#069;font-weight:bold">assert</span> almanac_op_range([(<span style="color:#f60">10</span>, <span style="color:#f60">20</span>)], <span style="color:#f60">50</span>, <span style="color:#f60">15</span>, <span style="color:#f60">10</span>) <span style="color:#555">==</span> ([(<span style="color:#f60">10</span>, <span style="color:#f60">14</span>)], [(<span style="color:#f60">50</span>, <span style="color:#f60">55</span>)]) <span style="color:#09f;font-style:italic"># starts is within source, end isn&#39;t</span>
    <span style="color:#069;font-weight:bold">assert</span> almanac_op_range([(<span style="color:#f60">10</span>, <span style="color:#f60">20</span>)], <span style="color:#f60">50</span>, <span style="color:#f60">5</span>, <span style="color:#f60">10</span>) <span style="color:#555">==</span> ([(<span style="color:#f60">15</span>, <span style="color:#f60">20</span>)],[(<span style="color:#f60">55</span>,<span style="color:#f60">59</span>)]) <span style="color:#09f;font-style:italic"># starts before source, ends inside</span>
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday5_2 = document.querySelectorAll('[data-tab-target-day5_2]')
    const tabContentsday5_2 = document.querySelectorAll('[data-tab-content-day5_2]')

    tabsday5_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay5_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday5_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday5_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day6_1'>Day 6 (Part 1): Day 6: Wait For It</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">The utility of grabbing numbers out of a list of text is now fully evident. It gracefully handles line endings, spaces, comma, etc. Not that I won't be back to (and indeed, already am using) <code>split()</code> and friends, but the time regexes have saved on input so far has been enlightening.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day6_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day6_1-upload-input" name="day6_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day6_1-run-btn" py-click="main_day6_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day6_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day6_1-upload-input')
            </script>
            <script type="py" src="day6/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day6_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day6_1="#day6_1-code" class="active tab code-title">day6_1.py</li>
         
        
    </ul>

    <div id="day6_1-code" data-tab-content-day6_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day6_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day6_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    races <span style="color:#555">=</span> <span style="color:#366">zip</span>(
        (<span style="color:#366">int</span>(d<span style="color:#555">.</span>group()) <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(<span style="color:#c30">&#34;\d+&#34;</span>, data[<span style="color:#f60">0</span>])), <span style="color:#09f;font-style:italic"># times</span>
        (<span style="color:#366">int</span>(d<span style="color:#555">.</span>group()) <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(<span style="color:#c30">&#34;\d+&#34;</span>, data[<span style="color:#f60">1</span>]))  <span style="color:#09f;font-style:italic"># distances</span>
        )

    prod <span style="color:#555">=</span> <span style="color:#f60">1</span>
    <span style="color:#069;font-weight:bold">for</span> race <span style="color:#000;font-weight:bold">in</span> races:
        count <span style="color:#555">=</span> <span style="color:#f60">0</span>
        total_time, distance_goal <span style="color:#555">=</span> race
        <span style="color:#069;font-weight:bold">for</span> hold_time <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(total_time):
            <span style="color:#069;font-weight:bold">if</span> (total_time <span style="color:#555">-</span> hold_time) <span style="color:#555">*</span> hold_time <span style="color:#555">&gt;</span> distance_goal: count <span style="color:#555">+=</span><span style="color:#f60">1</span> 
        prod <span style="color:#555">*=</span> count

    display(prod, target<span style="color:#555">=</span><span style="color:#c30">&#34;day6_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day6_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday6_1 = document.querySelectorAll('[data-tab-target-day6_1]')
    const tabContentsday6_1 = document.querySelectorAll('[data-tab-content-day6_1]')

    tabsday6_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay6_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday6_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday6_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day6_2'>Day 6 (Part 2): Day 6: Wait For It</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Having been bit yesterday, I was pretty confident that part 2 of day 6 would have a similar explosion in time/space requirements. And it did... only it doesn't seem to have mattered, as the 'naive' solution here still runs in about a second. Just lucky I guess.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day6_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day6_2-upload-input" name="day6_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day6_2-run-btn" py-click="main_day6_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day6_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day6_2-upload-input')
            </script>
            <script type="py" src="day6/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day6_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day6_2="#day6_2-code" class="active tab code-title">day6_2.py</li>
         
        
    </ul>

    <div id="day6_2-code" data-tab-content-day6_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day6_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day6_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    total_time <span style="color:#555">=</span> <span style="color:#366">int</span>(<span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join(d<span style="color:#555">.</span>group() <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(<span style="color:#c30">&#39;\d&#39;</span>, data[<span style="color:#f60">0</span>])))
    distance_goal <span style="color:#555">=</span> <span style="color:#366">int</span>(<span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join(d<span style="color:#555">.</span>group() <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(<span style="color:#c30">&#39;\d&#39;</span>, data[<span style="color:#f60">1</span>])))

    count <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> hold_time <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(total_time):
        <span style="color:#069;font-weight:bold">if</span> (total_time <span style="color:#555">-</span> hold_time) <span style="color:#555">*</span> hold_time <span style="color:#555">&gt;</span> distance_goal: count <span style="color:#555">+=</span><span style="color:#f60">1</span> 

    display(count, target<span style="color:#555">=</span><span style="color:#c30">&#34;day6_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day6_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday6_2 = document.querySelectorAll('[data-tab-target-day6_2]')
    const tabContentsday6_2 = document.querySelectorAll('[data-tab-content-day6_2]')

    tabsday6_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay6_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday6_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday6_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day7_1'>Day 7 (Part 1): Camel Cards</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">The complexity of the problems is ramping up at this point, if not quite the difficulty. Since today is ultimately a sorting problem, I was looking for a way to transform the input into a sortable form; by tranforming the "face card" labels ("AKQJT") into Hexadeical characters with the matching rank, then evaluating the hand's strength using <code>collections.Counter</code> and appending that as another Hex character to the front, the sorting is then straightforward.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day7_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day7_1-upload-input" name="day7_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day7_1-run-btn" py-click="main_day7_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day7_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day7_1-upload-input')
            </script>
            <script type="py" src="day7/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day7_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day7_1="#day7_1-code" class="active tab code-title">day7_1.py</li>
         
        
    </ul>

    <div id="day7_1-code" data-tab-content-day7_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> Counter
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">score_lines_7_1</span>(lines: Iterable[<span style="color:#366">str</span>]):
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(<span style="color:#366">int</span>(line<span style="color:#555">.</span>split(<span style="color:#c30">&#34; &#34;</span>)[<span style="color:#f60">1</span>]) <span style="color:#555">*</span> (index<span style="color:#555">+</span><span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">for</span> index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(lines))

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">sort_lines_7_1</span>(lines: Iterable[<span style="color:#366">str</span>]):
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sorted</span>(lines, key <span style="color:#555">=</span> rank_7_1)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">rank_7_1</span>(line):
    hand <span style="color:#555">=</span> line<span style="color:#555">.</span>split(<span style="color:#c30">&#34; &#34;</span>)[<span style="color:#f60">0</span>]
    counts <span style="color:#555">=</span> Counter(hand)
    vals <span style="color:#555">=</span> <span style="color:#366">tuple</span>(<span style="color:#366">sorted</span>((counts<span style="color:#555">.</span>values()), reverse<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>))
    <span style="color:#069;font-weight:bold">if</span> vals <span style="color:#555">==</span> (<span style="color:#f60">5</span>,): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;F&#34;</span> <span style="color:#09f;font-style:italic"># 5 of a kind</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">4</span>,<span style="color:#f60">1</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;E&#34;</span> <span style="color:#09f;font-style:italic"># 4 of a kind</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">3</span>,<span style="color:#f60">2</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;D&#34;</span> <span style="color:#09f;font-style:italic"># Full House</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">3</span>,<span style="color:#f60">1</span>,<span style="color:#f60">1</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;C&#34;</span> <span style="color:#09f;font-style:italic"># Three of a kind</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">2</span>,<span style="color:#f60">2</span>,<span style="color:#f60">1</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;B&#34;</span> <span style="color:#09f;font-style:italic"># Two Pair</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">2</span>,<span style="color:#f60">1</span>,<span style="color:#f60">1</span>,<span style="color:#f60">1</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;A&#34;</span>
    <span style="color:#069;font-weight:bold">else</span>:rank <span style="color:#555">=</span> <span style="color:#c30">&#34;9&#34;</span>

    hand_as_hex <span style="color:#555">=</span> rank<span style="color:#555">+</span>remap_card_names_7_1(hand)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">int</span>(hand_as_hex, base<span style="color:#555">=</span><span style="color:#f60">16</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">remap_card_names_7_1</span>(hand):
    trans <span style="color:#555">=</span> <span style="color:#366">str</span><span style="color:#555">.</span>maketrans(<span style="color:#c30">&#34;AKQJT&#34;</span>, <span style="color:#c30">&#34;FEDCB&#34;</span>)
    <span style="color:#069;font-weight:bold">return</span> hand<span style="color:#555">.</span>translate(trans)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day7_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day7_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    result <span style="color:#555">=</span> score_lines_7_1(sort_lines_7_1(data))
    
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day7_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day7_1()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday7_1 = document.querySelectorAll('[data-tab-target-day7_1]')
    const tabContentsday7_1 = document.querySelectorAll('[data-tab-content-day7_1]')

    tabsday7_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay7_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday7_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday7_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day7_2'>Day 7 (Part 2): Camel Cards</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">A relatively benign change to part one, invovling adjusting the ranking algorithm to incorporate Jokers and adjusting the translation table. One of the (minor) pain points in using PyScript is that if you're using main-thread tags, you get exactly on interpreter and one global namespace, so name collisions across multiple problems are a given. Hence the clunky names in both parts of this problem.</p><p class="post-p">Perhaps I should switch to <code>worker</code> tags...</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day7_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day7_2-upload-input" name="day7_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day7_2-run-btn" py-click="main_day7_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day7_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day7_2-upload-input')
            </script>
            <script type="py" src="day7/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day7_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day7_2="#day7_2-code" class="active tab code-title">day7_2.py</li>
         
        
    </ul>

    <div id="day7_2-code" data-tab-content-day7_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> Counter
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">operator</span> <span style="color:#069;font-weight:bold">import</span> itemgetter
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable

pat <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">&#34;\d+&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">score_lines_7_2</span>(lines: Iterable[<span style="color:#366">str</span>]):
    <span style="color:#c30">&#34;&#34;&#34;Take in a list of input sorted by rank, and return
</span><span style="color:#c30">    the score required by the pizzle
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        lines (Iterable[str]): A sorted Iterable of input lines
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns:
</span><span style="color:#c30">        _type_: _description_
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(<span style="color:#366">int</span>(line<span style="color:#555">.</span>split(<span style="color:#c30">&#34; &#34;</span>)[<span style="color:#f60">1</span>]) <span style="color:#555">*</span> (index<span style="color:#555">+</span><span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">for</span> index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(lines))

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">sort_lines_7_2</span>(lines: Iterable[<span style="color:#366">str</span>]):
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sorted</span>(lines, key <span style="color:#555">=</span> rank_7_2)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">rank_7_2</span>(line):
    hand <span style="color:#555">=</span> line<span style="color:#555">.</span>split(<span style="color:#c30">&#34; &#34;</span>)[<span style="color:#f60">0</span>]
    <span style="color:#069;font-weight:bold">if</span> hand <span style="color:#555">==</span> <span style="color:#c30">&#34;JJJJJ&#34;</span>: <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">int</span>(<span style="color:#c30">&#34;F11111&#34;</span>, base<span style="color:#555">=</span><span style="color:#f60">16</span>)

    counts <span style="color:#555">=</span> Counter(hand)
    vals <span style="color:#555">=</span> [<span style="color:#366">list</span>(s) <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">sorted</span>(counts<span style="color:#555">.</span>items(), key<span style="color:#555">=</span>itemgetter(<span style="color:#f60">1</span>), reverse<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>)]

    <span style="color:#09f;font-style:italic"># Move count of jokers to the next-most-common card</span>
    <span style="color:#069;font-weight:bold">if</span> vals[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>] <span style="color:#555">==</span> <span style="color:#c30">&#39;J&#39;</span>: vals[<span style="color:#f60">1</span>][<span style="color:#f60">1</span>] <span style="color:#555">+=</span> vals[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>]
    <span style="color:#069;font-weight:bold">else</span>: vals[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>] <span style="color:#555">+=</span> counts[<span style="color:#c30">&#34;J&#34;</span>]

    <span style="color:#09f;font-style:italic"># Find the count that corresponds to jokers, and remove it</span>
    j_items <span style="color:#555">=</span> [i <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> vals <span style="color:#069;font-weight:bold">if</span> i[<span style="color:#f60">0</span>] <span style="color:#555">==</span> <span style="color:#c30">&#34;J&#34;</span>]
    <span style="color:#069;font-weight:bold">if</span> j_items:
        vals<span style="color:#555">.</span>remove(j_items[<span style="color:#f60">0</span>])
    
    vals <span style="color:#555">=</span> <span style="color:#366">tuple</span>(v[<span style="color:#f60">1</span>] <span style="color:#069;font-weight:bold">for</span> v <span style="color:#000;font-weight:bold">in</span> vals)


    <span style="color:#069;font-weight:bold">if</span> vals <span style="color:#555">==</span> (<span style="color:#f60">5</span>,): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;F&#34;</span> <span style="color:#09f;font-style:italic"># 5 of a kind</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">4</span>,<span style="color:#f60">1</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;E&#34;</span> <span style="color:#09f;font-style:italic"># 4 of a kind</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">3</span>,<span style="color:#f60">2</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;D&#34;</span> <span style="color:#09f;font-style:italic"># Full House</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">3</span>,<span style="color:#f60">1</span>,<span style="color:#f60">1</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;C&#34;</span> <span style="color:#09f;font-style:italic"># Three of a kind</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">2</span>,<span style="color:#f60">2</span>,<span style="color:#f60">1</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;B&#34;</span> <span style="color:#09f;font-style:italic"># Two Pair</span>
    <span style="color:#069;font-weight:bold">elif</span> vals <span style="color:#555">==</span> (<span style="color:#f60">2</span>,<span style="color:#f60">1</span>,<span style="color:#f60">1</span>,<span style="color:#f60">1</span>): rank <span style="color:#555">=</span> <span style="color:#c30">&#34;A&#34;</span>
    <span style="color:#069;font-weight:bold">else</span>:rank <span style="color:#555">=</span> <span style="color:#c30">&#34;9&#34;</span>
    
    new_card <span style="color:#555">=</span> rank <span style="color:#555">+</span> remap_card_names_7_2(hand)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">int</span>(new_card, base<span style="color:#555">=</span><span style="color:#f60">16</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">remap_card_names_7_2</span>(hand):
    trans <span style="color:#555">=</span> <span style="color:#366">str</span><span style="color:#555">.</span>maketrans(<span style="color:#c30">&#34;AKQJT&#34;</span>, <span style="color:#c30">&#34;FED1B&#34;</span>)
    <span style="color:#069;font-weight:bold">return</span> hand<span style="color:#555">.</span>translate(trans)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day7_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day7_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    data <span style="color:#555">=</span> sort_lines_7_2(data)
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        <span style="color:#366">print</span>(line)
    result <span style="color:#555">=</span> score_lines_7_2(data)

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day7_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day7_2()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday7_2 = document.querySelectorAll('[data-tab-target-day7_2]')
    const tabContentsday7_2 = document.querySelectorAll('[data-tab-content-day7_2]')

    tabsday7_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay7_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday7_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday7_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day8_1'>Day 8 (Part 1): Haunted Wasteland</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">We've seen challenges like this in previous years' advents of code, and I suspect we'll see more like it this year. The input is a list of transformations on some input point, as indexed by some other part of the index. The only real trick is to make sure you're starting and ending points correctly identified; with Python's <code>str.startswith()</code> and <code>str.endswith()</code>, this is pretty trivial.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day8_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day8_1-upload-input" name="day8_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day8_1-run-btn" py-click="main_day8_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day8_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day8_1-upload-input')
            </script>
            <script type="py" src="day8/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day8_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day8_1="#day8_1-code" class="active tab code-title">day8_1.py</li>
         
        
    </ul>

    <div id="day8_1-code" data-tab-content-day8_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> cycle
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Instruction</span>:
    left: <span style="color:#366">str</span>
    right: <span style="color:#366">str</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day8_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day8_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">r</span><span style="color:#c30">&#34;([A-Z]</span><span style="color:#a00">{3}</span><span style="color:#c30">) = \(([A-Z]</span><span style="color:#a00">{3}</span><span style="color:#c30">), ([A-Z]</span><span style="color:#a00">{3}</span><span style="color:#c30">)\)&#34;</span>)

    turns <span style="color:#555">=</span> cycle(data[<span style="color:#f60">0</span>]<span style="color:#555">.</span>strip())
    node_data <span style="color:#555">=</span> {re<span style="color:#555">.</span>match(pattern, line)<span style="color:#555">.</span>group(<span style="color:#f60">1</span>):
                 Instruction(left<span style="color:#555">=</span>m<span style="color:#555">.</span>group(<span style="color:#f60">2</span>), right<span style="color:#555">=</span>m<span style="color:#555">.</span>group(<span style="color:#f60">3</span>)) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data[<span style="color:#f60">2</span>:] <span style="color:#069;font-weight:bold">if</span> (m <span style="color:#555">:=</span> re<span style="color:#555">.</span>match(pattern, line))}
    
    steps <span style="color:#555">=</span> <span style="color:#f60">0</span>
    loc <span style="color:#555">=</span> <span style="color:#c30">&#39;AAA&#39;</span>

    <span style="color:#069;font-weight:bold">while</span>(<span style="color:#069;font-weight:bold">True</span>):
        <span style="color:#069;font-weight:bold">if</span> loc <span style="color:#555">==</span> <span style="color:#c30">&#39;ZZZ&#39;</span>: <span style="color:#069;font-weight:bold">break</span>
        next_step <span style="color:#555">=</span> node_data[loc]
        direction <span style="color:#555">=</span> <span style="color:#366">next</span>(turns)
        <span style="color:#069;font-weight:bold">if</span> direction <span style="color:#555">==</span> <span style="color:#c30">&#39;L&#39;</span>: loc <span style="color:#555">=</span> next_step<span style="color:#555">.</span>left
        <span style="color:#069;font-weight:bold">elif</span> direction <span style="color:#555">==</span> <span style="color:#c30">&#39;R&#39;</span>: loc <span style="color:#555">=</span> next_step<span style="color:#555">.</span>right
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">&#34;Direction must be L or R&#34;</span>)

        steps<span style="color:#555">+=</span><span style="color:#f60">1</span>

    result <span style="color:#555">=</span> steps
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day8_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day8_1()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday8_1 = document.querySelectorAll('[data-tab-target-day8_1]')
    const tabContentsday8_1 = document.querySelectorAll('[data-tab-content-day8_1]')

    tabsday8_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay8_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday8_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday8_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day8_2'>Day 8 (Part 2): Haunted Wasteland</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">The niave solution here would be to simply set up an array of locations to track, and let them all run for a long time until they all simultaneously were on locations that end in 'Z'. However, with the ghosts having periods that are large and co-prime, the resulting overall period can (and in my case, is) over 14 digits long.</p><p class="post-p">The solution is to recognize that you can identify when each ghost has reached it's 'destination' (location that ends in 'Z') to find the period of that ghost. Then, the overall period is the least-common-multiple of all the ghosts' periods. Again, thanks to Python 3.9's addition of <code>math.lcm</code>, this is straightforward.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day8_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day8_2-upload-input" name="day8_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day8_2-run-btn" py-click="main_day8_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day8_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day8_2-upload-input')
            </script>
            <script type="py" src="day8/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day8_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day8_2="#day8_2-code" class="active tab code-title">day8_2.py</li>
         
        
    </ul>

    <div id="day8_2-code" data-tab-content-day8_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> cycle
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">math</span> <span style="color:#069;font-weight:bold">import</span> prod, lcm
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Instruction</span>:
    left: <span style="color:#366">str</span>
    right: <span style="color:#366">str</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day8_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day8_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    pattern <span style="color:#555">=</span> re<span style="color:#555">.</span>compile(<span style="color:#c30">r</span><span style="color:#c30">&#34;([A-Z]</span><span style="color:#a00">{3}</span><span style="color:#c30">) = \(([A-Z]</span><span style="color:#a00">{3}</span><span style="color:#c30">), ([A-Z0-9]</span><span style="color:#a00">{3}</span><span style="color:#c30">)\)&#34;</span>)

    turns <span style="color:#555">=</span> cycle(data[<span style="color:#f60">0</span>]<span style="color:#555">.</span>strip())
    node_data <span style="color:#555">=</span> {re<span style="color:#555">.</span>match(pattern, line)<span style="color:#555">.</span>group(<span style="color:#f60">1</span>):
                 Instruction(left<span style="color:#555">=</span>m<span style="color:#555">.</span>group(<span style="color:#f60">2</span>), right<span style="color:#555">=</span>m<span style="color:#555">.</span>group(<span style="color:#f60">3</span>)) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data[<span style="color:#f60">2</span>:] <span style="color:#069;font-weight:bold">if</span> (m <span style="color:#555">:=</span> re<span style="color:#555">.</span>match(pattern, line))}
    
    steps <span style="color:#555">=</span> <span style="color:#f60">0</span>
    ghosts <span style="color:#555">=</span> [loc <span style="color:#069;font-weight:bold">for</span> loc <span style="color:#000;font-weight:bold">in</span> node_data<span style="color:#555">.</span>keys() <span style="color:#069;font-weight:bold">if</span> loc<span style="color:#555">.</span>endswith(<span style="color:#c30">&#39;A&#39;</span>)]
    periods <span style="color:#555">=</span> [<span style="color:#555">-</span><span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(ghosts))]
    <span style="color:#366">print</span>(ghosts)

    <span style="color:#069;font-weight:bold">while</span>(<span style="color:#069;font-weight:bold">True</span>):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">all</span>(p <span style="color:#555">!=</span> <span style="color:#555">-</span><span style="color:#f60">1</span> <span style="color:#069;font-weight:bold">for</span> p <span style="color:#000;font-weight:bold">in</span> periods): <span style="color:#069;font-weight:bold">break</span>
        direction <span style="color:#555">=</span> <span style="color:#366">next</span>(turns)

        <span style="color:#069;font-weight:bold">for</span> index, ghost <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(ghosts):
            <span style="color:#069;font-weight:bold">if</span> ghost<span style="color:#555">.</span>endswith(<span style="color:#c30">&#34;Z&#34;</span>): periods[index] <span style="color:#555">=</span> steps
            next_step <span style="color:#555">=</span> node_data[ghost]
            <span style="color:#069;font-weight:bold">if</span> direction <span style="color:#555">==</span> <span style="color:#c30">&#39;L&#39;</span>: ghosts[index] <span style="color:#555">=</span> next_step<span style="color:#555">.</span>left
            <span style="color:#069;font-weight:bold">elif</span> direction <span style="color:#555">==</span> <span style="color:#c30">&#39;R&#39;</span>: ghosts[index] <span style="color:#555">=</span> next_step<span style="color:#555">.</span>right
            <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">&#34;Direction must be L or R&#34;</span>)

        steps<span style="color:#555">+=</span><span style="color:#f60">1</span>
        <span style="color:#09f;font-style:italic">#print(ghosts)</span>

    result <span style="color:#555">=</span> lcm(<span style="color:#555">*</span>periods)
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day8_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day8_2()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday8_2 = document.querySelectorAll('[data-tab-target-day8_2]')
    const tabContentsday8_2 = document.querySelectorAll('[data-tab-content-day8_2]')

    tabsday8_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay8_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday8_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday8_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day9_1'>Day 9 (Part 1): Mirage Maintenance</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">I'm sure there have been earlier days that could have been solved recursively. Indeed, my first catastrophic attempt for Day 5 Part 2 used some lazy recursion. But today's problem - repeatedly doing the same opeartion until hitting a base case - just screams for recurssion.</p><p class="post-p">In truth, the problem description essentially lays out the algorithm itself, step by step. All that's left is implementation.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day9_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day9_1-upload-input" name="day9_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day9_1-run-btn" py-click="main_day9_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day9_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day9_1-upload-input')
            </script>
            <script type="py" src="day9/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day9_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day9_1="#day9_1-code" class="active tab code-title">day9_1.py</li>
         
        
    </ul>

    <div id="day9_1-code" data-tab-content-day9_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> pairwise
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_next_number_9_1</span>(l: Iterable[<span style="color:#366">int</span>]):
    <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">all</span>(n <span style="color:#555">==</span> <span style="color:#f60">0</span> <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> l): <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>

    diff_sequence <span style="color:#555">=</span> [a[<span style="color:#f60">1</span>] <span style="color:#555">-</span> a[<span style="color:#f60">0</span>] <span style="color:#069;font-weight:bold">for</span> a <span style="color:#000;font-weight:bold">in</span> pairwise(l)]
    diff_sequence<span style="color:#555">.</span>append(get_next_number_9_1(diff_sequence))
    result <span style="color:#555">=</span> l[<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> diff_sequence[<span style="color:#555">-</span><span style="color:#f60">1</span>] 

    <span style="color:#069;font-weight:bold">return</span> result


<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day9_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> [[<span style="color:#366">int</span>(n<span style="color:#555">.</span>group()) <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(<span style="color:#c30">r</span><span style="color:#c30">&#34;-?\d+&#34;</span>, line)] <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> get_input(<span style="color:#c30">&#34;day9_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)]
    
    result <span style="color:#555">=</span> <span style="color:#366">sum</span>(get_next_number_9_1(d) <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> data)

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day9_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day9_1()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday9_1 = document.querySelectorAll('[data-tab-target-day9_1]')
    const tabContentsday9_1 = document.querySelectorAll('[data-tab-content-day9_1]')

    tabsday9_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay9_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday9_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday9_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day9_2'>Day 9 (Part 2): Mirage Maintenance</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Part 2's solution is very similar to part 1's, with a change of indices, and appending to the start of our list-of-differences instead of the end.</p><p class="post-p">On most day's, there's a seductively easy solution to part 1 (usually brute force) that blows up for part 2. But I'm struggling to see how the solutions to part 1 and part 2 would be significantly different... perhaps for a different choice of language, inserting a number at the beginning of a list is significantly more challenging?</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day9_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day9_2-upload-input" name="day9_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day9_2-run-btn" py-click="main_day9_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day9_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day9_2-upload-input')
            </script>
            <script type="py" src="day9/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day9_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day9_2="#day9_2-code" class="active tab code-title">day9_2.py</li>
         
        
    </ul>

    <div id="day9_2-code" data-tab-content-day9_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> pairwise
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_previous_number</span>(seq: Iterable[<span style="color:#366">int</span>]):
    <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">all</span>(n <span style="color:#555">==</span> <span style="color:#f60">0</span> <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> seq): <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>

    diff_sequence <span style="color:#555">=</span> [a[<span style="color:#f60">1</span>] <span style="color:#555">-</span> a[<span style="color:#f60">0</span>] <span style="color:#069;font-weight:bold">for</span> a <span style="color:#000;font-weight:bold">in</span> pairwise(seq)]
    diff_sequence<span style="color:#555">.</span>insert(<span style="color:#f60">0</span>, get_previous_number(diff_sequence))
    result <span style="color:#555">=</span> seq[<span style="color:#f60">0</span>] <span style="color:#555">-</span> diff_sequence[<span style="color:#f60">0</span>] 

    <span style="color:#069;font-weight:bold">return</span> result


<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day9_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> [[<span style="color:#366">int</span>(n<span style="color:#555">.</span>group()) <span style="color:#069;font-weight:bold">for</span> n <span style="color:#000;font-weight:bold">in</span> re<span style="color:#555">.</span>finditer(<span style="color:#c30">r</span><span style="color:#c30">&#34;-?\d+&#34;</span>, line)] <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> get_input(<span style="color:#c30">&#34;day9_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)]
    
    result <span style="color:#555">=</span> <span style="color:#366">sum</span>(get_previous_number(d) <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> data)

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day9_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day9_2()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday9_2 = document.querySelectorAll('[data-tab-target-day9_2]')
    const tabContentsday9_2 = document.querySelectorAll('[data-tab-content-day9_2]')

    tabsday9_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay9_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday9_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday9_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day10_1'>Day 10 (Part 1): Pipe Maze</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Ah, back to processing input on a grid. As with earlier puzzles, I usually find it easier to create a running dictionary of <code>data[(row, column)]</code> instead of tested dicts <code>data[row][column]</code>, since then a single <code>(x, y) in data</code> suffices to check for precence.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day10_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day10_1-upload-input" name="day10_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day10_1-run-btn" py-click="main_day10_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day10_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day10_1-upload-input')
            </script>
            <script type="py" src="day10/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day10_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day10_1="#day10_1-code" class="active tab code-title">day10_1.py</li>
         
        
    </ul>

    <div id="day10_1-code" data-tab-content-day10_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">93
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> defaultdict
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">rich</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">print_pipes</span>(data, current, seen):
    <span style="color:#069;font-weight:bold">for</span> l, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data):
        <span style="color:#069;font-weight:bold">for</span> c, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line):
            <span style="color:#069;font-weight:bold">if</span> (l, c) <span style="color:#555">==</span> current: rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[red]</span><span style="color:#a00">{</span>char<span style="color:#a00">}</span><span style="color:#c30">[/red]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">elif</span> (l, c) <span style="color:#000;font-weight:bold">in</span> seen: rich<span style="color:#555">.</span>print((<span style="color:#c30">f</span><span style="color:#c30">&#34;[green]</span><span style="color:#a00">{</span>char<span style="color:#a00">}</span><span style="color:#c30">[/green]&#34;</span>), end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> : rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[gray]</span><span style="color:#a00">{</span>char<span style="color:#a00">}</span><span style="color:#c30">[/gray]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">else</span>: rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[white]</span><span style="color:#a00">{</span>char<span style="color:#a00">}</span><span style="color:#c30">[/white]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
        <span style="color:#366">print</span>(<span style="color:#c30">&#34;&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day10_1</span>(<span style="color:#555">*</span>args):
    data: List[<span style="color:#366">str</span>] <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day10_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)

    _map_data <span style="color:#555">=</span> {(line_num, char_num): char <span style="color:#069;font-weight:bold">for</span> line_num, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">for</span> char_num, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line)}
    map_data <span style="color:#555">=</span> defaultdict(<span style="color:#069;font-weight:bold">lambda</span>: <span style="color:#069;font-weight:bold">None</span>, _map_data)

    start_line, _start_line_data <span style="color:#555">=</span> [(index, line)<span style="color:#069;font-weight:bold">for</span> index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;S&#39;</span> <span style="color:#000;font-weight:bold">in</span> line][<span style="color:#f60">0</span>]
    start_char <span style="color:#555">=</span> _start_line_data<span style="color:#555">.</span>index(<span style="color:#c30">&#39;S&#39;</span>)
    <span style="color:#09f;font-style:italic">#print_pipes(data, [], [])</span>

    north_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;N&#39;</span>, (<span style="color:#f60">1</span>,<span style="color:#f60">0</span>))
    east_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;E&#39;</span>, (<span style="color:#f60">0</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>))
    south_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;S&#39;</span>, (<span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#f60">0</span>))
    west_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;W&#39;</span>, (<span style="color:#f60">0</span>, <span style="color:#f60">1</span>))

    instructions <span style="color:#555">=</span> {
        <span style="color:#c30">&#39;|&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span>: north_entry,
            <span style="color:#c30">&#39;S&#39;</span>: south_entry
        },
        <span style="color:#c30">&#39;-&#39;</span>: {
            <span style="color:#c30">&#39;E&#39;</span>: east_entry,
            <span style="color:#c30">&#39;W&#39;</span>: west_entry
        },
        <span style="color:#c30">&#39;L&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span> : west_entry,
            <span style="color:#c30">&#39;E&#39;</span> : south_entry
        },
        <span style="color:#c30">&#39;J&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span> : east_entry,
            <span style="color:#c30">&#39;W&#39;</span> : south_entry
        },
        <span style="color:#c30">&#39;7&#39;</span>: {
            <span style="color:#c30">&#39;S&#39;</span> : east_entry,
            <span style="color:#c30">&#39;W&#39;</span> : north_entry,
        },
        <span style="color:#c30">&#39;F&#39;</span>: {
            <span style="color:#c30">&#39;S&#39;</span> : west_entry,
            <span style="color:#c30">&#39;E&#39;</span> : north_entry
        }
    }

    <span style="color:#09f;font-style:italic"># Find starting direction:</span>
    adjacent_dirs <span style="color:#555">=</span> [(<span style="color:#c30">&#39;W&#39;</span>, (start_line, start_char <span style="color:#555">+</span> <span style="color:#f60">1</span>)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line, start_char <span style="color:#555">+</span> <span style="color:#f60">1</span>)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;-&#39;</span>, <span style="color:#c30">&#39;J&#39;</span>, <span style="color:#c30">&#39;7&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>,
                     (<span style="color:#c30">&#39;E&#39;</span>, (start_line, start_char <span style="color:#555">-</span> <span style="color:#f60">1</span>)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line, start_char <span style="color:#555">-</span> <span style="color:#f60">1</span>)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;-&#39;</span>, <span style="color:#c30">&#39;L&#39;</span>, <span style="color:#c30">&#39;F&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>, 
                     (<span style="color:#c30">&#39;N&#39;</span>, (start_line <span style="color:#555">+</span> <span style="color:#f60">1</span>, start_char)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line <span style="color:#555">+</span> <span style="color:#f60">1</span>, start_char)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;|&#39;</span>, <span style="color:#c30">&#39;L&#39;</span>, <span style="color:#c30">&#39;J&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>, 
                     (<span style="color:#c30">&#39;S&#39;</span>, (start_line <span style="color:#555">-</span> <span style="color:#f60">1</span>, start_char)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line <span style="color:#555">-</span> <span style="color:#f60">1</span>, start_char)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;|&#39;</span>, <span style="color:#c30">&#39;7&#39;</span>, <span style="color:#c30">&#39;F&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>]

    entry_dir, position <span style="color:#555">=</span> [a <span style="color:#069;font-weight:bold">for</span> a <span style="color:#000;font-weight:bold">in</span> adjacent_dirs <span style="color:#069;font-weight:bold">if</span> a][<span style="color:#f60">0</span>]
    
    count <span style="color:#555">=</span> <span style="color:#f60">1</span>
    seen <span style="color:#555">=</span> [(start_line, start_char), position]
    
    <span style="color:#069;font-weight:bold">while</span> (current_space<span style="color:#555">:=</span> map_data[position]) <span style="color:#555">!=</span> <span style="color:#c30">&#39;S&#39;</span>:
        count <span style="color:#555">+=</span> <span style="color:#f60">1</span>
        entry_dir, position_delta <span style="color:#555">=</span> instructions[current_space][entry_dir]
        position <span style="color:#555">=</span> (position[<span style="color:#f60">0</span>] <span style="color:#555">+</span> position_delta[<span style="color:#f60">0</span>], position[<span style="color:#f60">1</span>] <span style="color:#555">+</span> position_delta[<span style="color:#f60">1</span>])
        seen<span style="color:#555">.</span>append(position)
        <span style="color:#09f;font-style:italic">#print_pipes(data, position, seen)</span>

    result <span style="color:#555">=</span> count <span style="color:#555">/</span> <span style="color:#f60">2</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day10_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day10_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday10_1 = document.querySelectorAll('[data-tab-target-day10_1]')
    const tabContentsday10_1 = document.querySelectorAll('[data-tab-content-day10_1]')

    tabsday10_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay10_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday10_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday10_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day10_2'>Day 10 (Part 2): Pipe Maze</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">Part two is a bit of a curveball, in that it asks you to find an entirely new property of the curve/data from part one. My initial impulse was to use something like a <a href="https://en.wikipedia.org/wiki/Flood_fill">flood fill</a> algorith, but the second set of example problems show that some "outside" areas might be trapped and "unfloodable".</p><p class="post-p">I ultimately used a version of the <a href="https://en.wikipedia.org/wiki/Point_in_polygon#Ray_casting_algorithm">Raycasting/Jordan Curve</a> agorithm, iterating along each line and determining whether a given position was "inside" or "outside" the curve. Whenenver a <code>|</code> is crossed, one passes from inside to outside; corners are a little harder: <code>"L----7"</code> and <code>"F----J"</code> count as crossings, but <code>"L----J"</code> and <code>"F----7"</code> do not. Finally, the original starting point <code>S</code> has to be replaced with the appropriate symbol before processing, or everything after it on that line may go sideways.</p>

    </div>
    <div>
        <div class="load-pyscript viz"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day10_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day10_2-upload-input" name="day10_2-upload">
                </div>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 sm:space-x-2">
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day10_2-run-btn" py-click="main_day10_2">RUN</button></div>
                
                <div>
                    <script type="py" src="day10/viz_2.py"  terminal worker ></script>
                    <div class="col-span-1"><button class="w-full py-2 run-vis-button" id="day10_2-viz-btn">RUN VISUALIZATION</button></div>
                </div>
                </div>
                <div class="font-mono bg-gray-200" id="day10_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day10_2-upload-input')
            </script>
            <script type="py" src="day10/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day10_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day10_2="#day10_2-code" class="active tab code-title">day10_2.py</li>
        <li data-tab-target-day10_2="#day10_2-viz-code" class="tab code-title">day10_2-viz.py</li> 
        
    </ul>

    <div id="day10_2-code" data-tab-content-day10_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> defaultdict
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">rich</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">r</span>(char: <span style="color:#366">str</span>):
    table <span style="color:#555">=</span> <span style="color:#366">str</span><span style="color:#555">.</span>maketrans(<span style="color:#c30">&#34;|-JLF7&#34;</span>, <span style="color:#c30">&#34;│─┘└┌┐&#34;</span>)
    <span style="color:#069;font-weight:bold">return</span> char<span style="color:#555">.</span>translate(table)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">replace_char</span>(s, index, char):
    <span style="color:#069;font-weight:bold">return</span> s[:index] <span style="color:#555">+</span> char <span style="color:#555">+</span> s[index<span style="color:#555">+</span><span style="color:#f60">1</span>:]

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">print_pipes_10_2</span>(data, current, seen):
    <span style="color:#069;font-weight:bold">for</span> l, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data):
        <span style="color:#069;font-weight:bold">for</span> c, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line):
            <span style="color:#069;font-weight:bold">if</span> (l, c) <span style="color:#555">==</span> current: rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[red]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/red]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">elif</span> (l, c) <span style="color:#000;font-weight:bold">in</span> seen: rich<span style="color:#555">.</span>print((<span style="color:#c30">f</span><span style="color:#c30">&#34;[green]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/green]&#34;</span>), end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> : rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[gray]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/gray]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">else</span>: rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[white]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/white]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
        <span style="color:#366">print</span>(<span style="color:#c30">&#34;&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">count_inner_cells</span>(data: List[<span style="color:#366">str</span>], loop: List[<span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]]):
    <span style="color:#c30">&#34;&#34;&#34;Count the number of cells contained within the loop. Starting
</span><span style="color:#c30">    from the beginning of each line, and with a boolean is_inside set to false, 
</span><span style="color:#c30">    each time we cross the loop, invert that boolean, and add any non-loop 
</span><span style="color:#c30">    space to a running count. &#34;|&#34; spaces are an obvious crossing; corners
</span><span style="color:#c30">    need to be handled specially.
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        data List[str]: The original data,  split into lines
</span><span style="color:#c30">        loop List[tuple[int, int]]: A list of (line, char_index) pairs comprising the loop.
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns:
</span><span style="color:#c30">        int: The number of cells inside the loop
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    count <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> l, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data):
        is_inside <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
        crossing_start <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>
        <span style="color:#069;font-weight:bold">for</span> c, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line):
            <span style="color:#069;font-weight:bold">if</span> (l, c) <span style="color:#000;font-weight:bold">in</span> loop:
                <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#34;|&#34;</span>: is_inside <span style="color:#555">=</span> <span style="color:#000;font-weight:bold">not</span> is_inside
                <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#34;L&#34;</span>, <span style="color:#c30">&#34;F&#34;</span>): crossing_start <span style="color:#555">=</span> char
                <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#34;7&#34;</span>, <span style="color:#c30">&#34;J&#34;</span>) <span style="color:#000;font-weight:bold">and</span> crossing_start <span style="color:#555">!=</span> <span style="color:#c30">&#34;&#34;</span>:
                    <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#34;7&#34;</span> <span style="color:#000;font-weight:bold">and</span> crossing_start <span style="color:#555">==</span> <span style="color:#c30">&#34;L&#34;</span>: is_inside <span style="color:#555">=</span> <span style="color:#000;font-weight:bold">not</span> is_inside
                    <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#555">==</span> <span style="color:#c30">&#34;J&#34;</span> <span style="color:#000;font-weight:bold">and</span> crossing_start <span style="color:#555">==</span> <span style="color:#c30">&#34;F&#34;</span>: is_inside <span style="color:#555">=</span> <span style="color:#000;font-weight:bold">not</span> is_inside
                    crossing_start <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>
                <span style="color:#069;font-weight:bold">if</span> is_inside: color <span style="color:#555">=</span> <span style="color:#c30">&#34;white&#34;</span>
                <span style="color:#069;font-weight:bold">else</span>: color <span style="color:#555">=</span> <span style="color:#c30">&#34;white&#34;</span>
                <span style="color:#09f;font-style:italic">#rich.print(f&#34;[{color}]{r(char)}[/{color}]&#34;, end = &#34;&#34;)</span>
            <span style="color:#069;font-weight:bold">else</span>:
                <span style="color:#069;font-weight:bold">if</span> is_inside: 
                    count <span style="color:#555">+=</span> <span style="color:#f60">1</span>
                    <span style="color:#09f;font-style:italic">#rich.print(f&#34;[white on green]{char}[/white on green]&#34;, end = &#34;&#34;)</span>
                <span style="color:#069;font-weight:bold">else</span>:
                    <span style="color:#069;font-weight:bold">pass</span>
                    <span style="color:#09f;font-style:italic">#rich.print(f&#34;[red]{char}[/red]&#34;, end = &#34;&#34;)</span>
        <span style="color:#09f;font-style:italic">#print(&#34;&#34;)</span>

    <span style="color:#069;font-weight:bold">return</span> count


<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day10_2</span>(<span style="color:#555">*</span>args):
    data: List[<span style="color:#366">str</span>] <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day10_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)

    _map_data <span style="color:#555">=</span> {(line_num, char_num): char <span style="color:#069;font-weight:bold">for</span> line_num, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">for</span> char_num, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line)}
    map_data <span style="color:#555">=</span> defaultdict(<span style="color:#069;font-weight:bold">lambda</span>: <span style="color:#069;font-weight:bold">None</span>, _map_data)

    start_line, _start_line_data <span style="color:#555">=</span> [(index, line)<span style="color:#069;font-weight:bold">for</span> index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;S&#39;</span> <span style="color:#000;font-weight:bold">in</span> line][<span style="color:#f60">0</span>]
    start_char <span style="color:#555">=</span> _start_line_data<span style="color:#555">.</span>index(<span style="color:#c30">&#39;S&#39;</span>)

    north_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;N&#39;</span>, (<span style="color:#f60">1</span>,<span style="color:#f60">0</span>))
    east_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;E&#39;</span>, (<span style="color:#f60">0</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>))
    south_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;S&#39;</span>, (<span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#f60">0</span>))
    west_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;W&#39;</span>, (<span style="color:#f60">0</span>, <span style="color:#f60">1</span>))

    instructions <span style="color:#555">=</span> {
        <span style="color:#c30">&#39;|&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span>: north_entry,
            <span style="color:#c30">&#39;S&#39;</span>: south_entry
        },
        <span style="color:#c30">&#39;-&#39;</span>: {
            <span style="color:#c30">&#39;E&#39;</span>: east_entry,
            <span style="color:#c30">&#39;W&#39;</span>: west_entry
        },
        <span style="color:#c30">&#39;L&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span> : west_entry,
            <span style="color:#c30">&#39;E&#39;</span> : south_entry
        },
        <span style="color:#c30">&#39;J&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span> : east_entry,
            <span style="color:#c30">&#39;W&#39;</span> : south_entry
        },
        <span style="color:#c30">&#39;7&#39;</span>: {
            <span style="color:#c30">&#39;S&#39;</span> : east_entry,
            <span style="color:#c30">&#39;W&#39;</span> : north_entry,
        },
        <span style="color:#c30">&#39;F&#39;</span>: {
            <span style="color:#c30">&#39;S&#39;</span> : west_entry,
            <span style="color:#c30">&#39;E&#39;</span> : north_entry
        }
    }

    <span style="color:#09f;font-style:italic"># Find starting direction:</span>
    adjacent_dirs <span style="color:#555">=</span> [(<span style="color:#c30">&#39;W&#39;</span>, (start_line, start_char <span style="color:#555">+</span> <span style="color:#f60">1</span>)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line, start_char <span style="color:#555">+</span> <span style="color:#f60">1</span>)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;-&#39;</span>, <span style="color:#c30">&#39;J&#39;</span>, <span style="color:#c30">&#39;7&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>,
                     (<span style="color:#c30">&#39;E&#39;</span>, (start_line, start_char <span style="color:#555">-</span> <span style="color:#f60">1</span>)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line, start_char <span style="color:#555">-</span> <span style="color:#f60">1</span>)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;-&#39;</span>, <span style="color:#c30">&#39;L&#39;</span>, <span style="color:#c30">&#39;F&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>, 
                     (<span style="color:#c30">&#39;N&#39;</span>, (start_line <span style="color:#555">+</span> <span style="color:#f60">1</span>, start_char)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line <span style="color:#555">+</span> <span style="color:#f60">1</span>, start_char)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;|&#39;</span>, <span style="color:#c30">&#39;L&#39;</span>, <span style="color:#c30">&#39;J&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>, 
                     (<span style="color:#c30">&#39;S&#39;</span>, (start_line <span style="color:#555">-</span> <span style="color:#f60">1</span>, start_char)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line <span style="color:#555">-</span> <span style="color:#f60">1</span>, start_char)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;|&#39;</span>, <span style="color:#c30">&#39;7&#39;</span>, <span style="color:#c30">&#39;F&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>]

    <span style="color:#09f;font-style:italic"># Pick an arbitrary starting direction</span>
    entry_dir, position <span style="color:#555">=</span> [a <span style="color:#069;font-weight:bold">for</span> a <span style="color:#000;font-weight:bold">in</span> adjacent_dirs <span style="color:#069;font-weight:bold">if</span> a][<span style="color:#f60">0</span>]
    
    count <span style="color:#555">=</span> <span style="color:#f60">1</span>
    loop <span style="color:#555">=</span> [(start_line, start_char), position]
    
    <span style="color:#09f;font-style:italic"># Find all the cells in the loop</span>
    <span style="color:#069;font-weight:bold">while</span> (current_space<span style="color:#555">:=</span> map_data[position]) <span style="color:#555">!=</span> <span style="color:#c30">&#39;S&#39;</span>:
        count <span style="color:#555">+=</span> <span style="color:#f60">1</span>
        entry_dir, position_delta <span style="color:#555">=</span> instructions[current_space][entry_dir]
        position <span style="color:#555">=</span> (position[<span style="color:#f60">0</span>] <span style="color:#555">+</span> position_delta[<span style="color:#f60">0</span>], position[<span style="color:#f60">1</span>] <span style="color:#555">+</span> position_delta[<span style="color:#f60">1</span>])
        loop<span style="color:#555">.</span>append(position)

    <span style="color:#09f;font-style:italic"># Replace the starting &#39;S&#39; with the appropriate symbol to make the next algorithm simpler</span>
    starting_directions <span style="color:#555">=</span> <span style="color:#366">tuple</span>(a[<span style="color:#f60">0</span>] <span style="color:#069;font-weight:bold">for</span> a <span style="color:#000;font-weight:bold">in</span> adjacent_dirs <span style="color:#069;font-weight:bold">if</span> a)
    <span style="color:#069;font-weight:bold">if</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;W&#39;</span>, <span style="color:#c30">&#39;E&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char(data[start_line], start_char, <span style="color:#c30">&#34;-&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;N&#39;</span>, <span style="color:#c30">&#39;S&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char(data[start_line], start_char, <span style="color:#c30">&#34;|&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;W&#39;</span>, <span style="color:#c30">&#39;N&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char(data[start_line], start_char, <span style="color:#c30">&#34;F&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;W&#39;</span>, <span style="color:#c30">&#39;S&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char(data[start_line], start_char, <span style="color:#c30">&#34;L&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;E&#39;</span>, <span style="color:#c30">&#39;N&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char(data[start_line], start_char, <span style="color:#c30">&#34;7&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;E&#39;</span>, <span style="color:#c30">&#39;S&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char(data[start_line], start_char, <span style="color:#c30">&#34;J&#34;</span>)

    result <span style="color:#555">=</span> count_inner_cells(data, loop)

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day10_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day10_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

    
    
    
    <div id="day10_2-viz-code" data-tab-content-day10_2 class="tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input, output_redirect_to_xterm
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyodide.ffi.wrappers</span> <span style="color:#069;font-weight:bold">import</span> add_event_listener
<span style="color:#069;font-weight:bold">else</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)


<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> defaultdict
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">rich</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">rich.console</span> <span style="color:#069;font-weight:bold">import</span> Console

rich<span style="color:#555">.</span>_console <span style="color:#555">=</span> Console(color_system<span style="color:#555">=</span><span style="color:#c30">&#39;256&#39;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">r</span>(char: <span style="color:#366">str</span>):
    table <span style="color:#555">=</span> <span style="color:#366">str</span><span style="color:#555">.</span>maketrans(<span style="color:#c30">&#34;|-JLF7&#34;</span>, <span style="color:#c30">&#34;│─┘└┌┐&#34;</span>)
    <span style="color:#069;font-weight:bold">return</span> char<span style="color:#555">.</span>translate(table)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">replace_char_viz</span>(s, index, char):
    <span style="color:#069;font-weight:bold">return</span> s[:index] <span style="color:#555">+</span> char <span style="color:#555">+</span> s[index<span style="color:#555">+</span><span style="color:#f60">1</span>:]

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">print_pipes_10_2_viz</span>(data, current, seen):
    <span style="color:#069;font-weight:bold">for</span> l, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data):
        <span style="color:#069;font-weight:bold">for</span> c, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line):
            <span style="color:#069;font-weight:bold">if</span> (l, c) <span style="color:#555">==</span> current: rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[red]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/red]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">elif</span> (l, c) <span style="color:#000;font-weight:bold">in</span> seen: rich<span style="color:#555">.</span>print((<span style="color:#c30">f</span><span style="color:#c30">&#34;[green]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/green]&#34;</span>), end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> : rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[gray]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/gray]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">else</span>: rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[white]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/white]&#34;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
        <span style="color:#366">print</span>(<span style="color:#c30">&#34;&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">count_inner_cells_viz</span>(data: List[<span style="color:#366">str</span>], loop: List[<span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]]):
    <span style="color:#c30">&#34;&#34;&#34;Count the number of cells contained within the loop. Starting
</span><span style="color:#c30">    from the beginning of each line, and with a boolean is_inside set to false, 
</span><span style="color:#c30">    each time we cross the loop, invert that boolean, and add any non-loop 
</span><span style="color:#c30">    space to a running count. &#34;|&#34; spaces are an obvious crossing; corners
</span><span style="color:#c30">    need to be handled specially.
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        data List[str]: The original data,  split into lines
</span><span style="color:#c30">        loop List[tuple[int, int]]: A list of (line, char_index) pairs comprising the loop.
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns:
</span><span style="color:#c30">        int: The number of cells inside the loop
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    count <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> l, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data):
        is_inside <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
        crossing_start <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>
        <span style="color:#069;font-weight:bold">for</span> c, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line):
            <span style="color:#069;font-weight:bold">if</span> (l, c) <span style="color:#000;font-weight:bold">in</span> loop:
                <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#34;|&#34;</span>: is_inside <span style="color:#555">=</span> <span style="color:#000;font-weight:bold">not</span> is_inside
                <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#34;L&#34;</span>, <span style="color:#c30">&#34;F&#34;</span>): crossing_start <span style="color:#555">=</span> char
                <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#34;7&#34;</span>, <span style="color:#c30">&#34;J&#34;</span>) <span style="color:#000;font-weight:bold">and</span> crossing_start <span style="color:#555">!=</span> <span style="color:#c30">&#34;&#34;</span>:
                    <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#34;7&#34;</span> <span style="color:#000;font-weight:bold">and</span> crossing_start <span style="color:#555">==</span> <span style="color:#c30">&#34;L&#34;</span>: is_inside <span style="color:#555">=</span> <span style="color:#000;font-weight:bold">not</span> is_inside
                    <span style="color:#069;font-weight:bold">elif</span> char <span style="color:#555">==</span> <span style="color:#c30">&#34;J&#34;</span> <span style="color:#000;font-weight:bold">and</span> crossing_start <span style="color:#555">==</span> <span style="color:#c30">&#34;F&#34;</span>: is_inside <span style="color:#555">=</span> <span style="color:#000;font-weight:bold">not</span> is_inside
                    crossing_start <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>
                <span style="color:#069;font-weight:bold">if</span> is_inside: color <span style="color:#555">=</span> <span style="color:#c30">&#34;white&#34;</span>
                <span style="color:#069;font-weight:bold">else</span>: color <span style="color:#555">=</span> <span style="color:#c30">&#34;white&#34;</span>
                rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[</span><span style="color:#a00">{</span>color<span style="color:#a00">}</span><span style="color:#c30">]</span><span style="color:#a00">{</span>r(char)<span style="color:#a00">}</span><span style="color:#c30">[/</span><span style="color:#a00">{</span>color<span style="color:#a00">}</span><span style="color:#c30">]&#34;</span>, end <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">else</span>:
                <span style="color:#069;font-weight:bold">if</span> is_inside: 
                    count <span style="color:#555">+=</span> <span style="color:#f60">1</span>
                    rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[white on green]</span><span style="color:#a00">{</span>char<span style="color:#a00">}</span><span style="color:#c30">[/white on green]&#34;</span>, end <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>)
                <span style="color:#069;font-weight:bold">else</span>:
                    <span style="color:#069;font-weight:bold">pass</span>
                    rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#34;[red]</span><span style="color:#a00">{</span>char<span style="color:#a00">}</span><span style="color:#c30">[/red]&#34;</span>, end <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>)
        <span style="color:#366">print</span>(<span style="color:#c30">&#34;&#34;</span>)

    <span style="color:#069;font-weight:bold">return</span> count

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">viz_day10_2</span>(<span style="color:#555">*</span>args):
    <span style="color:#069;font-weight:bold">with</span> output_redirect_to_xterm(<span style="color:#c30">&#39;day10_2-viz&#39;</span>):
        _viz_day10_2()
        
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">_viz_day10_2</span>(<span style="color:#555">*</span>args):
    data: List[<span style="color:#366">str</span>] <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day10_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)

    _map_data <span style="color:#555">=</span> {(line_num, char_num): char <span style="color:#069;font-weight:bold">for</span> line_num, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">for</span> char_num, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line)}
    map_data <span style="color:#555">=</span> defaultdict(<span style="color:#069;font-weight:bold">lambda</span>: <span style="color:#069;font-weight:bold">None</span>, _map_data)

    start_line, _start_line_data <span style="color:#555">=</span> [(index, line)<span style="color:#069;font-weight:bold">for</span> index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;S&#39;</span> <span style="color:#000;font-weight:bold">in</span> line][<span style="color:#f60">0</span>]
    start_char <span style="color:#555">=</span> _start_line_data<span style="color:#555">.</span>index(<span style="color:#c30">&#39;S&#39;</span>)

    north_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;N&#39;</span>, (<span style="color:#f60">1</span>,<span style="color:#f60">0</span>))
    east_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;E&#39;</span>, (<span style="color:#f60">0</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>))
    south_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;S&#39;</span>, (<span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#f60">0</span>))
    west_entry <span style="color:#555">=</span> (<span style="color:#c30">&#39;W&#39;</span>, (<span style="color:#f60">0</span>, <span style="color:#f60">1</span>))

    instructions <span style="color:#555">=</span> {
        <span style="color:#c30">&#39;|&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span>: north_entry,
            <span style="color:#c30">&#39;S&#39;</span>: south_entry
        },
        <span style="color:#c30">&#39;-&#39;</span>: {
            <span style="color:#c30">&#39;E&#39;</span>: east_entry,
            <span style="color:#c30">&#39;W&#39;</span>: west_entry
        },
        <span style="color:#c30">&#39;L&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span> : west_entry,
            <span style="color:#c30">&#39;E&#39;</span> : south_entry
        },
        <span style="color:#c30">&#39;J&#39;</span>: {
            <span style="color:#c30">&#39;N&#39;</span> : east_entry,
            <span style="color:#c30">&#39;W&#39;</span> : south_entry
        },
        <span style="color:#c30">&#39;7&#39;</span>: {
            <span style="color:#c30">&#39;S&#39;</span> : east_entry,
            <span style="color:#c30">&#39;W&#39;</span> : north_entry,
        },
        <span style="color:#c30">&#39;F&#39;</span>: {
            <span style="color:#c30">&#39;S&#39;</span> : west_entry,
            <span style="color:#c30">&#39;E&#39;</span> : north_entry
        }
    }

    <span style="color:#09f;font-style:italic"># Find starting direction:</span>
    adjacent_dirs <span style="color:#555">=</span> [(<span style="color:#c30">&#39;W&#39;</span>, (start_line, start_char <span style="color:#555">+</span> <span style="color:#f60">1</span>)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line, start_char <span style="color:#555">+</span> <span style="color:#f60">1</span>)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;-&#39;</span>, <span style="color:#c30">&#39;J&#39;</span>, <span style="color:#c30">&#39;7&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>,
                     (<span style="color:#c30">&#39;E&#39;</span>, (start_line, start_char <span style="color:#555">-</span> <span style="color:#f60">1</span>)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line, start_char <span style="color:#555">-</span> <span style="color:#f60">1</span>)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;-&#39;</span>, <span style="color:#c30">&#39;L&#39;</span>, <span style="color:#c30">&#39;F&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>, 
                     (<span style="color:#c30">&#39;N&#39;</span>, (start_line <span style="color:#555">+</span> <span style="color:#f60">1</span>, start_char)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line <span style="color:#555">+</span> <span style="color:#f60">1</span>, start_char)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;|&#39;</span>, <span style="color:#c30">&#39;L&#39;</span>, <span style="color:#c30">&#39;J&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>, 
                     (<span style="color:#c30">&#39;S&#39;</span>, (start_line <span style="color:#555">-</span> <span style="color:#f60">1</span>, start_char)) <span style="color:#069;font-weight:bold">if</span> map_data[(start_line <span style="color:#555">-</span> <span style="color:#f60">1</span>, start_char)] <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#39;|&#39;</span>, <span style="color:#c30">&#39;7&#39;</span>, <span style="color:#c30">&#39;F&#39;</span>) <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#34;&#34;</span>]

    <span style="color:#09f;font-style:italic"># Pick an arbitrary starting direction</span>
    entry_dir, position <span style="color:#555">=</span> [a <span style="color:#069;font-weight:bold">for</span> a <span style="color:#000;font-weight:bold">in</span> adjacent_dirs <span style="color:#069;font-weight:bold">if</span> a][<span style="color:#f60">0</span>]
    
    count <span style="color:#555">=</span> <span style="color:#f60">1</span>
    loop <span style="color:#555">=</span> [(start_line, start_char), position]
    
    <span style="color:#09f;font-style:italic"># Find all the cells in the loop</span>
    <span style="color:#069;font-weight:bold">while</span> (current_space<span style="color:#555">:=</span> map_data[position]) <span style="color:#555">!=</span> <span style="color:#c30">&#39;S&#39;</span>:
        count <span style="color:#555">+=</span> <span style="color:#f60">1</span>
        entry_dir, position_delta <span style="color:#555">=</span> instructions[current_space][entry_dir]
        position <span style="color:#555">=</span> (position[<span style="color:#f60">0</span>] <span style="color:#555">+</span> position_delta[<span style="color:#f60">0</span>], position[<span style="color:#f60">1</span>] <span style="color:#555">+</span> position_delta[<span style="color:#f60">1</span>])
        loop<span style="color:#555">.</span>append(position)

    <span style="color:#09f;font-style:italic"># Replace the starting &#39;S&#39; with the appropriate symbol to make the next algorithm simpler</span>
    starting_directions <span style="color:#555">=</span> <span style="color:#366">tuple</span>(a[<span style="color:#f60">0</span>] <span style="color:#069;font-weight:bold">for</span> a <span style="color:#000;font-weight:bold">in</span> adjacent_dirs <span style="color:#069;font-weight:bold">if</span> a)
    <span style="color:#069;font-weight:bold">if</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;W&#39;</span>, <span style="color:#c30">&#39;E&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char_viz(data[start_line], start_char, <span style="color:#c30">&#34;-&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;N&#39;</span>, <span style="color:#c30">&#39;S&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char_viz(data[start_line], start_char, <span style="color:#c30">&#34;|&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;W&#39;</span>, <span style="color:#c30">&#39;N&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char_viz(data[start_line], start_char, <span style="color:#c30">&#34;F&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;W&#39;</span>, <span style="color:#c30">&#39;S&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char_viz(data[start_line], start_char, <span style="color:#c30">&#34;L&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;E&#39;</span>, <span style="color:#c30">&#39;N&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char_viz(data[start_line], start_char, <span style="color:#c30">&#34;7&#34;</span>)
    <span style="color:#069;font-weight:bold">elif</span> starting_directions <span style="color:#555">==</span> (<span style="color:#c30">&#39;E&#39;</span>, <span style="color:#c30">&#39;S&#39;</span>): data[start_line] <span style="color:#555">=</span> replace_char_viz(data[start_line], start_char, <span style="color:#c30">&#34;J&#34;</span>)

    result <span style="color:#555">=</span> count_inner_cells_viz(data, loop)

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day10_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">with</span> output_redirect_to_xterm(<span style="color:#c30">&#39;day10_2-viz&#39;</span>):
        viz_day10_2()
<span style="color:#069;font-weight:bold">else</span>:
    add_event_listener(document<span style="color:#555">.</span>getElementById(<span style="color:#c30">&#34;day10_2-viz-btn&#34;</span>), <span style="color:#c30">&#34;click&#34;</span>, _viz_day10_2)
    <span style="color:#366">print</span>(<span style="color:#c30">&#34;ADDED VIZ FOR DAY 10 part 2&#34;</span>)
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>
     

    

    

</div>
<script>
    const tabsday10_2 = document.querySelectorAll('[data-tab-target-day10_2]')
    const tabContentsday10_2 = document.querySelectorAll('[data-tab-content-day10_2]')

    tabsday10_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay10_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday10_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday10_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day11_1'>Day 11 (Part 1): Cosmic Expansion</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">What I've taken away from the first chunk of Advent of Code this year is:
    <ul class="post-ul">
        <li>Inserting additional features into your original data structure is often a mistake, as insertions don't scale well.</li>
        <li>When faced with a task that involves a grid, think carefully about whether you need to store the full structure of the grid, or just some important coordinates.</li>
    </ul></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day11_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day11_1-upload-input" name="day11_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day11_1-run-btn" py-click="main_day11_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day11_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day11_1-upload-input')
            </script>
            <script type="py" src="day11/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day11_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day11_1="#day11_1-code" class="active tab code-title">day11_1.py</li>
         
        
    </ul>

    <div id="day11_1-code" data-tab-content-day11_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> combinations
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day11_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day11_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    expanding_row_indices <span style="color:#555">=</span> [i <span style="color:#069;font-weight:bold">for</span> i, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">all</span>(char <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#069;font-weight:bold">for</span> char <span style="color:#000;font-weight:bold">in</span> line)]
    expanding_col_indices <span style="color:#555">=</span> [i <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(data)) <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">all</span>(line[i] <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data)]
    stars <span style="color:#555">=</span>  [(line_index, char_index) <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">for</span> char_index, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line) <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#39;#&#39;</span>]

    total <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> s1, s2, <span style="color:#000;font-weight:bold">in</span> combinations(stars, <span style="color:#f60">2</span>):
        manhattan_dist <span style="color:#555">=</span> <span style="color:#366">abs</span>(s2[<span style="color:#f60">0</span>] <span style="color:#555">-</span> s1[<span style="color:#f60">0</span>]) <span style="color:#555">+</span> <span style="color:#366">abs</span>(s2[<span style="color:#f60">1</span>] <span style="color:#555">-</span> s1[<span style="color:#f60">1</span>])
        
        <span style="color:#09f;font-style:italic"># expanding rows; stars are in row order, so s2[0] &gt;= s1[0]</span>
        row_total <span style="color:#555">=</span> <span style="color:#366">len</span>([r <span style="color:#069;font-weight:bold">for</span> r <span style="color:#000;font-weight:bold">in</span> expanding_row_indices <span style="color:#069;font-weight:bold">if</span> s1[<span style="color:#f60">0</span>] <span style="color:#555">&lt;</span> r <span style="color:#555">&lt;</span> s2[<span style="color:#f60">0</span>]])

        <span style="color:#09f;font-style:italic"># expanding columns, not necessarily ordered</span>
        <span style="color:#069;font-weight:bold">if</span> s2[<span style="color:#f60">1</span>] <span style="color:#555">==</span> s1[<span style="color:#f60">1</span>]: 
            col_total <span style="color:#555">=</span> <span style="color:#f60">0</span>
        <span style="color:#069;font-weight:bold">elif</span> s2[<span style="color:#f60">1</span>] <span style="color:#555">&gt;</span> s1[<span style="color:#f60">1</span>]:
            col_total <span style="color:#555">=</span> <span style="color:#366">len</span>([c <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> expanding_col_indices <span style="color:#069;font-weight:bold">if</span> s1[<span style="color:#f60">1</span>] <span style="color:#555">&lt;</span> c <span style="color:#555">&lt;</span> s2[<span style="color:#f60">1</span>]])
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#09f;font-style:italic"># s2[1] &lt; s1[1] </span>
            col_total <span style="color:#555">=</span> <span style="color:#366">len</span>([c <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> expanding_col_indices <span style="color:#069;font-weight:bold">if</span> s2[<span style="color:#f60">1</span>] <span style="color:#555">&lt;</span> c <span style="color:#555">&lt;</span> s1[<span style="color:#f60">1</span>]])

        total <span style="color:#555">+=</span> manhattan_dist <span style="color:#555">+</span> row_total <span style="color:#555">+</span> col_total
    
    result <span style="color:#555">=</span> total
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day11_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day11_1()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday11_1 = document.querySelectorAll('[data-tab-target-day11_1]')
    const tabContentsday11_1 = document.querySelectorAll('[data-tab-content-day11_1]')

    tabsday11_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay11_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday11_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday11_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day11_2'>Day 11 (Part 2): Cosmic Expansion</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">The only critical hint I'd give about part to is: <span class="italic">beware of off-by-one errors</span>. Otherwise, the solution to part 2 is very similar to part 1.</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day11_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day11_2-upload-input" name="day11_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day11_2-run-btn" py-click="main_day11_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day11_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day11_2-upload-input')
            </script>
            <script type="py" src="day11/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day11_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day11_2="#day11_2-code" class="active tab code-title">day11_2.py</li>
         
        
    </ul>

    <div id="day11_2-code" data-tab-content-day11_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> combinations
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day11_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day11_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    expanding_row_indices <span style="color:#555">=</span> [i <span style="color:#069;font-weight:bold">for</span> i, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">all</span>(char <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#069;font-weight:bold">for</span> char <span style="color:#000;font-weight:bold">in</span> line)]
    expanding_col_indices <span style="color:#555">=</span> [i <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(data)) <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">all</span>(line[i] <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data)]
    stars <span style="color:#555">=</span>  [(line_index, char_index) <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">for</span> char_index, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line) <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#39;#&#39;</span>]

    total <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> s1, s2, <span style="color:#000;font-weight:bold">in</span> combinations(stars, <span style="color:#f60">2</span>):
        manhattan_dist <span style="color:#555">=</span> <span style="color:#366">abs</span>(s2[<span style="color:#f60">0</span>] <span style="color:#555">-</span> s1[<span style="color:#f60">0</span>]) <span style="color:#555">+</span> <span style="color:#366">abs</span>(s2[<span style="color:#f60">1</span>] <span style="color:#555">-</span> s1[<span style="color:#f60">1</span>])
        
        <span style="color:#09f;font-style:italic"># expanding rows; stars are in row order, so s2[0] &gt;= s1[0]</span>
        row_total <span style="color:#555">=</span> <span style="color:#366">len</span>([r <span style="color:#069;font-weight:bold">for</span> r <span style="color:#000;font-weight:bold">in</span> expanding_row_indices <span style="color:#069;font-weight:bold">if</span> s1[<span style="color:#f60">0</span>] <span style="color:#555">&lt;</span> r <span style="color:#555">&lt;</span> s2[<span style="color:#f60">0</span>]])

        <span style="color:#09f;font-style:italic"># expanding columns, not necessarily ordered</span>
        <span style="color:#069;font-weight:bold">if</span> s2[<span style="color:#f60">1</span>] <span style="color:#555">==</span> s1[<span style="color:#f60">1</span>]: 
            col_total <span style="color:#555">=</span> <span style="color:#f60">0</span>
        <span style="color:#069;font-weight:bold">elif</span> s2[<span style="color:#f60">1</span>] <span style="color:#555">&gt;</span> s1[<span style="color:#f60">1</span>]:
            col_total <span style="color:#555">=</span> <span style="color:#366">len</span>([c <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> expanding_col_indices <span style="color:#069;font-weight:bold">if</span> s1[<span style="color:#f60">1</span>] <span style="color:#555">&lt;</span> c <span style="color:#555">&lt;</span> s2[<span style="color:#f60">1</span>]])
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#09f;font-style:italic"># s2[1] &lt; s1[1] </span>
            col_total <span style="color:#555">=</span> <span style="color:#366">len</span>([c <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> expanding_col_indices <span style="color:#069;font-weight:bold">if</span> s2[<span style="color:#f60">1</span>] <span style="color:#555">&lt;</span> c <span style="color:#555">&lt;</span> s1[<span style="color:#f60">1</span>]])

        total <span style="color:#555">+=</span> manhattan_dist <span style="color:#555">+</span> (row_total <span style="color:#555">+</span> col_total) <span style="color:#555">*</span> <span style="color:#f60">999_999</span>
    
    result <span style="color:#555">=</span> total
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day11_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day11_2()</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday11_2 = document.querySelectorAll('[data-tab-target-day11_2]')
    const tabContentsday11_2 = document.querySelectorAll('[data-tab-content-day11_2]')

    tabsday11_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay11_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday11_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday11_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<!-- <h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day12_1'>Day 12 (Part 1): Hot Springs</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">DESCRIPTION</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day12_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day12_1-upload-input" name="day12_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day12_1-run-btn" py-click="main_day12_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day12_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day12_1-upload-input')
            </script>
            <script type="py" src="day12/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day12_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day12_1="#day12_1-code" class="active tab code-title">day12_1.py</li>
         
        
    </ul>

    <div id="day12_1-code" data-tab-content-day12_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">95
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input_test.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable, List

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">match</span>(value: <span style="color:#366">str</span>, pattern: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
    <span style="color:#c30">&#34;&#34;&#34;Whether the given value is valid given the (start) of
</span><span style="color:#c30">    the pattern. 
</span><span style="color:#c30">
</span><span style="color:#c30">    Consider inlining this.
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        value (str): The value to be checked
</span><span style="color:#c30">        pattern (str): The pattern to match
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns:
</span><span style="color:#c30">        bool: Whether the value is valid given the (initial) part of the pattern
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">all</span>(pattern[i] <span style="color:#555">==</span> <span style="color:#c30">&#39;?&#39;</span> <span style="color:#000;font-weight:bold">or</span> value[i] <span style="color:#555">==</span> pattern[i] <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(value)))

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">gen_runs_of_springs</span>(num_springs: <span style="color:#366">int</span>, max_len: <span style="color:#366">int</span>) <span style="color:#555">-&gt;</span> List[<span style="color:#366">str</span>]:
    <span style="color:#c30">&#34;&#34;&#34;All the possible ways of slotting a group of num_springs &#34;#&#34; chars
</span><span style="color:#c30">    into a sequnce of length max_len
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        num_springs (int): The number broken springs in a group
</span><span style="color:#c30">        max_len (int): The length of sequences to generatre
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns:
</span><span style="color:#c30">        List[str]: The generated sequences of strings
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    <span style="color:#069;font-weight:bold">return</span> [<span style="color:#c30">&#39;.&#39;</span><span style="color:#555">*</span>i <span style="color:#555">+</span> <span style="color:#c30">&#39;#&#39;</span> <span style="color:#555">*</span> num_springs <span style="color:#555">+</span> <span style="color:#c30">&#39;.&#39;</span><span style="color:#555">*</span>(max_len<span style="color:#555">-</span>num_springs<span style="color:#555">-</span>i) <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(max_len<span style="color:#555">-</span>num_springs<span style="color:#555">+</span><span style="color:#f60">1</span>)]

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">min_length_of_sequence_set</span>(sequences: Iterable[<span style="color:#366">int</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span>:
    <span style="color:#c30">&#34;&#34;&#34;The minimum length you can squeeze a sequence of groupings of springs into,
</span><span style="color:#c30">    with a single &#39;.&#39; between them
</span><span style="color:#c30">
</span><span style="color:#c30">    Args:
</span><span style="color:#c30">        sequences (Iterable[int]): The sequnces of springs
</span><span style="color:#c30">
</span><span style="color:#c30">    Returns:
</span><span style="color:#c30">        int: The minimum space
</span><span style="color:#c30">    &#34;&#34;&#34;</span>
    <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">len</span>(sequences) <span style="color:#555">==</span> <span style="color:#f60">1</span>: <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(sequences)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>(sequences) <span style="color:#555">+</span> <span style="color:#366">len</span>(sequences) <span style="color:#555">-</span> <span style="color:#f60">1</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_valid_options</span>(sequences: Iterable[<span style="color:#366">int</span>], pattern, prefix <span style="color:#555">=</span> <span style="color:#c30">&#39;&#39;</span>):
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Counting valid options for </span><span style="color:#a00">{</span>sequences<span style="color:#a00">}</span><span style="color:#c30"> against </span><span style="color:#a00">{</span>pattern<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
    <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">len</span>(sequences) <span style="color:#555">==</span> <span style="color:#f60">1</span>:
        <span style="color:#366">print</span>(<span style="color:#c30">&#34;Only 1 sequence left&#34;</span>)
        g <span style="color:#555">=</span> [s <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> gen_runs_of_springs(sequences[<span style="color:#f60">0</span>], <span style="color:#366">len</span>(pattern)) <span style="color:#069;font-weight:bold">if</span> match(s, pattern)]
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">set</span>(prefix <span style="color:#555">+</span> new <span style="color:#069;font-weight:bold">for</span> new <span style="color:#000;font-weight:bold">in</span> g)
    <span style="color:#069;font-weight:bold">else</span>:
        valid <span style="color:#555">=</span> <span style="color:#366">set</span>()
        min_space_for_first_group <span style="color:#555">=</span> sequences[<span style="color:#f60">0</span>]
        max_space_for_first_group <span style="color:#555">=</span> <span style="color:#366">len</span>(pattern) <span style="color:#555">-</span> min_length_of_sequence_set(sequences[<span style="color:#f60">1</span>:])
        <span style="color:#09f;font-style:italic"># TODO there is an error in here, not accounting for needing a &#39;.&#39; between groups if the first</span>
        <span style="color:#09f;font-style:italic"># group ends in a &#34;#&#34;&#34;</span>
        <span style="color:#069;font-weight:bold">for</span> length_for_first_group <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(min_space_for_first_group <span style="color:#555">+</span> <span style="color:#f60">1</span>, max_space_for_first_group<span style="color:#555">+</span><span style="color:#f60">1</span>):
            <span style="color:#069;font-weight:bold">for</span> possibilty <span style="color:#000;font-weight:bold">in</span> (g <span style="color:#555">+</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#069;font-weight:bold">for</span> g <span style="color:#000;font-weight:bold">in</span> gen_runs_of_springs(sequences[<span style="color:#f60">0</span>], length_for_first_group)):
                <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Starting possibility: </span><span style="color:#a00">{</span>possibilty<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
                <span style="color:#069;font-weight:bold">if</span> match(possibilty, pattern):
                    <span style="color:#366">print</span>(<span style="color:#c30">&#34;Getting extensions&#34;</span>)
                    valid <span style="color:#555">=</span> valid<span style="color:#555">.</span>union(get_valid_options(sequences[<span style="color:#f60">1</span>:], pattern[length_for_first_group:], prefix<span style="color:#555">=</span>possibilty[:length_for_first_group]))
                <span style="color:#069;font-weight:bold">else</span>:
                    <span style="color:#366">print</span>(<span style="color:#c30">&#34;Invalid prefix match&#34;</span>)
                <span style="color:#366">print</span>(<span style="color:#c30">&#34;--&#34;</span>)
        <span style="color:#069;font-weight:bold">return</span> valid
    
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">count_valid_options</span>(sequences, pattern):
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>(get_valid_options(sequences, pattern))
        

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day12_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day12_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day12_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    <span style="color:#069;font-weight:bold">pass</span>
    <span style="color:#366">print</span>(get_valid_options([<span style="color:#f60">1</span>,<span style="color:#f60">1</span>], <span style="color:#c30">&#39;??.??&#39;</span>))
    <span style="color:#09f;font-style:italic">#main_day12_1()</span>

</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday12_1 = document.querySelectorAll('[data-tab-target-day12_1]')
    const tabContentsday12_1 = document.querySelectorAll('[data-tab-content-day12_1]')

    tabsday12_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay12_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday12_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday12_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day12_2'>Day 12 (Part 2): Hot Springs</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p">DESCRIPTION</p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day12_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day12_2-upload-input" name="day12_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day12_2-run-btn" py-click="main_day12_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day12_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day12_2-upload-input')
            </script>
            <script type="py" src="day12/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day12_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day12_2="#day12_2-code" class="active tab code-title">day12_2.py</li>
         
        
    </ul>

    <div id="day12_2-code" data-tab-content-day12_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input_test.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day12_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day12_2&#34;</span>)

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day12_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day12_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday12_2 = document.querySelectorAll('[data-tab-target-day12_2]')
    const tabContentsday12_2 = document.querySelectorAll('[data-tab-content-day12_2]')

    tabsday12_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay12_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday12_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday12_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script> -->

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day13_1'>Day 13 (Part 1): Point of Incidence</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day13_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day13_1-upload-input" name="day13_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day13_1-run-btn" py-click="main_day13_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day13_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day13_1-upload-input')
            </script>
            <script type="py" src="day13/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day13_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day13_1="#day13_1-code" class="active tab code-title">day13_1.py</li>
         
        
    </ul>

    <div id="day13_1-code" data-tab-content-day13_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List

<span style="color:#09f;font-style:italic"># Vertical Mirrors - index 0 is between first_line[0] and first_line[1]</span>
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">find_vertical_mirror</span>(pattern: List[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span> <span style="color:#555">|</span> <span style="color:#069;font-weight:bold">None</span>:
    pattern <span style="color:#555">=</span> pattern<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    <span style="color:#069;font-weight:bold">for</span> seam_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>])<span style="color:#555">-</span><span style="color:#f60">1</span>):
        good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span> <span style="color:#09f;font-style:italic"># sentinel to allow shortcutting out of the loop</span>
        <span style="color:#069;font-weight:bold">for</span> lower, upper <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">zip</span>(<span style="color:#366">range</span>(seam_index, <span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>), <span style="color:#366">range</span>(seam_index<span style="color:#555">+</span><span style="color:#f60">1</span>, <span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>]))):
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">any</span>(line[lower] <span style="color:#555">!=</span> line[upper] <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern):
                good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
                <span style="color:#069;font-weight:bold">break</span>
        <span style="color:#069;font-weight:bold">if</span> good_seam: <span style="color:#069;font-weight:bold">return</span> seam_index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#09f;font-style:italic"># Counted in original problem is one different from this index</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">find_horizontal_mirror</span>(pattern: List[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span> <span style="color:#555">|</span> <span style="color:#069;font-weight:bold">None</span>:
    pattern <span style="color:#555">=</span> pattern<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    <span style="color:#069;font-weight:bold">for</span> seam_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern)<span style="color:#555">-</span><span style="color:#f60">1</span>):
        good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>
        <span style="color:#069;font-weight:bold">for</span> lower, upper <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">zip</span>(<span style="color:#366">range</span>(seam_index, <span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>), <span style="color:#366">range</span>(seam_index<span style="color:#555">+</span><span style="color:#f60">1</span>, <span style="color:#366">len</span>(pattern))):
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">any</span>(pattern[lower][i] <span style="color:#555">!=</span> pattern[upper][i] <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>]))):
                good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
                <span style="color:#069;font-weight:bold">break</span>
        <span style="color:#069;font-weight:bold">if</span> good_seam: <span style="color:#069;font-weight:bold">return</span> seam_index <span style="color:#555">+</span> <span style="color:#f60">1</span>



<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day13_1</span>(<span style="color:#555">*</span>args):
    patterns <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day13_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#34;</span>)

    total <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> pattern <span style="color:#000;font-weight:bold">in</span> patterns:
        <span style="color:#069;font-weight:bold">if</span> mirror_index <span style="color:#555">:=</span> find_vertical_mirror(pattern):
            total <span style="color:#555">+=</span> mirror_index
        <span style="color:#069;font-weight:bold">elif</span> mirror_index <span style="color:#555">:=</span> find_horizontal_mirror(pattern):
            total <span style="color:#555">+=</span> <span style="color:#f60">100</span> <span style="color:#555">*</span> mirror_index

    display(total, target<span style="color:#555">=</span><span style="color:#c30">&#34;day13_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day13_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday13_1 = document.querySelectorAll('[data-tab-target-day13_1]')
    const tabContentsday13_1 = document.querySelectorAll('[data-tab-content-day13_1]')

    tabsday13_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay13_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday13_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday13_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day13_2'>Day 13 (Part 2): Point of Incidence</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day13_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day13_2-upload-input" name="day13_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day13_2-run-btn" py-click="main_day13_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day13_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day13_2-upload-input')
            </script>
            <script type="py" src="day13/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day13_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day13_2="#day13_2-code" class="active tab code-title">day13_2.py</li>
         
        
    </ul>

    <div id="day13_2-code" data-tab-content-day13_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List

<span style="color:#09f;font-style:italic"># Vertical Mirrors - index 0 is between first_line[0] and first_line[1]</span>
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">find_vertical_mirror</span>(pattern: List[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span> <span style="color:#555">|</span> <span style="color:#069;font-weight:bold">None</span>:
    pattern <span style="color:#555">=</span> pattern<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    <span style="color:#069;font-weight:bold">for</span> seam_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>])<span style="color:#555">-</span><span style="color:#f60">1</span>):
        good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span> <span style="color:#09f;font-style:italic"># sentinel to allow shortcutting out of the loop</span>
        <span style="color:#069;font-weight:bold">for</span> lower, upper <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">zip</span>(<span style="color:#366">range</span>(seam_index, <span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>), <span style="color:#366">range</span>(seam_index<span style="color:#555">+</span><span style="color:#f60">1</span>, <span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>]))):
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">any</span>(line[lower] <span style="color:#555">!=</span> line[upper] <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern):
                good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
                <span style="color:#069;font-weight:bold">break</span>
        <span style="color:#069;font-weight:bold">if</span> good_seam: <span style="color:#069;font-weight:bold">return</span> seam_index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#09f;font-style:italic"># Counted in original problem is one different from this index</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">find_horizontal_mirror</span>(pattern: List[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span> <span style="color:#555">|</span> <span style="color:#069;font-weight:bold">None</span>:
    pattern <span style="color:#555">=</span> pattern<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    <span style="color:#069;font-weight:bold">for</span> seam_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern)<span style="color:#555">-</span><span style="color:#f60">1</span>):
        good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>
        <span style="color:#069;font-weight:bold">for</span> lower, upper <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">zip</span>(<span style="color:#366">range</span>(seam_index, <span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>), <span style="color:#366">range</span>(seam_index<span style="color:#555">+</span><span style="color:#f60">1</span>, <span style="color:#366">len</span>(pattern))):
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">any</span>(pattern[lower][i] <span style="color:#555">!=</span> pattern[upper][i] <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>]))):
                good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
                <span style="color:#069;font-weight:bold">break</span>
        <span style="color:#069;font-weight:bold">if</span> good_seam: <span style="color:#069;font-weight:bold">return</span> seam_index <span style="color:#555">+</span> <span style="color:#f60">1</span>

<span style="color:#09f;font-style:italic"># Vertical Mirrors - index 0 is between first_line[0] and first_line[1]</span>
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">find_smudged_vertical_mirror</span>(pattern: List[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span> <span style="color:#555">|</span> <span style="color:#069;font-weight:bold">None</span>:
    pattern <span style="color:#555">=</span> pattern<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    <span style="color:#069;font-weight:bold">for</span> seam_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>])<span style="color:#555">-</span><span style="color:#f60">1</span>):
        smudge_count <span style="color:#555">=</span> <span style="color:#f60">0</span>
        good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span> <span style="color:#09f;font-style:italic"># sentinel to allow shortcutting out of the loop</span>
        <span style="color:#069;font-weight:bold">for</span> lower, upper <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">zip</span>(<span style="color:#366">range</span>(seam_index, <span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>), <span style="color:#366">range</span>(seam_index<span style="color:#555">+</span><span style="color:#f60">1</span>, <span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>]))):
            smudge_count <span style="color:#555">+=</span> [line[lower] <span style="color:#555">==</span> line[upper] <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern]<span style="color:#555">.</span>count(<span style="color:#069;font-weight:bold">False</span>)
            <span style="color:#069;font-weight:bold">if</span> smudge_count <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>: <span style="color:#09f;font-style:italic">#If count is to high, exist immediately</span>
                good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
                <span style="color:#069;font-weight:bold">break</span>
        <span style="color:#069;font-weight:bold">if</span> good_seam <span style="color:#000;font-weight:bold">and</span> smudge_count <span style="color:#555">==</span> <span style="color:#f60">1</span>: <span style="color:#069;font-weight:bold">return</span> seam_index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#09f;font-style:italic"># Counted in original problem is one different from this index</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">find_smudged_horizontal_mirror</span>(pattern: List[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span> <span style="color:#555">|</span> <span style="color:#069;font-weight:bold">None</span>:
    pattern <span style="color:#555">=</span> pattern<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    <span style="color:#069;font-weight:bold">for</span> seam_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern)<span style="color:#555">-</span><span style="color:#f60">1</span>):
        smudge_count <span style="color:#555">=</span> <span style="color:#f60">0</span>
        good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span> <span style="color:#09f;font-style:italic"># sentinel to allow shortcutting out of the loop</span>
        <span style="color:#069;font-weight:bold">for</span> lower, upper <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">zip</span>(<span style="color:#366">range</span>(seam_index, <span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>), <span style="color:#366">range</span>(seam_index<span style="color:#555">+</span><span style="color:#f60">1</span>, <span style="color:#366">len</span>(pattern))):
            smudge_count <span style="color:#555">+=</span> [pattern[lower][i] <span style="color:#555">==</span> pattern[upper][i] <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>]))]<span style="color:#555">.</span>count(<span style="color:#069;font-weight:bold">False</span>)
            <span style="color:#069;font-weight:bold">if</span> smudge_count <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>:
                good_seam <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
                <span style="color:#069;font-weight:bold">break</span>
        <span style="color:#069;font-weight:bold">if</span> good_seam <span style="color:#000;font-weight:bold">and</span> smudge_count <span style="color:#555">==</span> <span style="color:#f60">1</span>: <span style="color:#069;font-weight:bold">return</span> seam_index <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#09f;font-style:italic"># Counted in original problem is one different from this index</span>



<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day13_2</span>(<span style="color:#555">*</span>args):
    patterns <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day13_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#34;</span>)

    total <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> index, pattern <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(patterns): 
        <span style="color:#069;font-weight:bold">if</span> smudge_index <span style="color:#555">:=</span> find_smudged_vertical_mirror(pattern):
            <span style="color:#069;font-weight:bold">if</span> smudge_index <span style="color:#555">!=</span> find_vertical_mirror(pattern):
                total <span style="color:#555">+=</span> smudge_index
        <span style="color:#069;font-weight:bold">elif</span> smudge_index <span style="color:#555">:=</span> find_smudged_horizontal_mirror(pattern):
            <span style="color:#069;font-weight:bold">if</span> smudge_index <span style="color:#555">!=</span> find_horizontal_mirror(pattern):
                total <span style="color:#555">+=</span> <span style="color:#f60">100</span> <span style="color:#555">*</span> smudge_index
        <span style="color:#069;font-weight:bold">else</span>:
            <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;No smudge found in pattern </span><span style="color:#a00">{</span>index<span style="color:#a00">}</span><span style="color:#c30"> (line </span><span style="color:#a00">{</span><span style="color:#366">sum</span>(<span style="color:#366">len</span>(pattern<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)) <span style="color:#069;font-weight:bold">for</span> pattern <span style="color:#000;font-weight:bold">in</span> patterns[:index])<span style="color:#a00">}</span><span style="color:#c30">)&#34;</span>)

    display(total, target<span style="color:#555">=</span><span style="color:#c30">&#34;day13_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day13_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday13_2 = document.querySelectorAll('[data-tab-target-day13_2]')
    const tabContentsday13_2 = document.querySelectorAll('[data-tab-content-day13_2]')

    tabsday13_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay13_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday13_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday13_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day14_1'>Day 14 (Part 1): Parabolic Reflector Dish</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day14_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day14_1-upload-input" name="day14_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day14_1-run-btn" py-click="main_day14_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day14_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day14_1-upload-input')
            </script>
            <script type="py" src="day14/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day14_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day14_1="#day14_1-code" class="active tab code-title">day14_1.py</li>
         
        
    </ul>

    <div id="day14_1-code" data-tab-content-day14_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">copy</span> <span style="color:#069;font-weight:bold">import</span> deepcopy
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> pairwise      
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">rollNorth</span>(data: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    pattern <span style="color:#555">=</span> [<span style="color:#366">list</span>(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)]
    <span style="color:#069;font-weight:bold">for</span> first, second <span style="color:#000;font-weight:bold">in</span> pairwise(pattern):
        <span style="color:#069;font-weight:bold">for</span> char_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(first)):
            <span style="color:#069;font-weight:bold">if</span> first[char_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#000;font-weight:bold">and</span> second[char_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;O&#39;</span>:
                first[char_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;O&#39;</span>
                second[char_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;.&#39;</span>
    
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span><span style="color:#555">.</span>join(<span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day14_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day14_1&#34;</span>)

    <span style="color:#09f;font-style:italic">#for line in data.split(&#34;\n&#34;):</span>
    <span style="color:#09f;font-style:italic">#    print(line)</span>
    

    new_data <span style="color:#555">=</span> rollNorth(deepcopy(data))
    <span style="color:#069;font-weight:bold">while</span> <span style="color:#366">any</span>(new_data[i][j] <span style="color:#555">!=</span> data[i][j] <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(data)) <span style="color:#069;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(data[i]))):
        data <span style="color:#555">=</span> deepcopy(new_data)
        new_data <span style="color:#555">=</span> rollNorth(deepcopy(data))

    load <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> row_index, row <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(new_data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)):
        row_value <span style="color:#555">=</span> <span style="color:#366">len</span>(new_data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)) <span style="color:#555">-</span> row_index
        <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>row_value<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
        <span style="color:#069;font-weight:bold">for</span> char <span style="color:#000;font-weight:bold">in</span> row:
            <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#39;O&#39;</span>: load <span style="color:#555">+=</span> row_value

    result <span style="color:#555">=</span> load
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day14_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day14_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday14_1 = document.querySelectorAll('[data-tab-target-day14_1]')
    const tabContentsday14_1 = document.querySelectorAll('[data-tab-content-day14_1]')

    tabsday14_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay14_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday14_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday14_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day14_2'>Day 14 (Part 2): Parabolic Reflector Dish</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day14_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day14_2-upload-input" name="day14_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day14_2-run-btn" py-click="main_day14_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day14_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day14_2-upload-input')
            </script>
            <script type="py" src="day14/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day14_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day14_2="#day14_2-code" class="active tab code-title">day14_2.py</li>
         
        
    </ul>

    <div id="day14_2-code" data-tab-content-day14_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">copy</span> <span style="color:#069;font-weight:bold">import</span> deepcopy
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> pairwise, count      
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> List, Callable

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">cycle</span>(data: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    data <span style="color:#555">=</span> completely(data, rollNorth)
    data <span style="color:#555">=</span> completely(data, rollWest)
    data <span style="color:#555">=</span> completely(data, rollSouth)
    <span style="color:#069;font-weight:bold">return</span> completely(data, rollEast)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">completely</span>(data: <span style="color:#366">str</span>, f: [<span style="color:#366">str</span>, <span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    <span style="color:#09f;font-style:italic">#print(f&#34;Applying function {f.__name__} completly&#34;)</span>
    new_data <span style="color:#555">=</span> f(deepcopy(data))
    <span style="color:#069;font-weight:bold">while</span> <span style="color:#366">any</span>(new_data[i][j] <span style="color:#555">!=</span> data[i][j] <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(data)) <span style="color:#069;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(data[i]))):
        data <span style="color:#555">=</span> deepcopy(new_data)
        new_data <span style="color:#555">=</span> f(deepcopy(data))
    <span style="color:#069;font-weight:bold">return</span> new_data

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">rollNorth</span>(data: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    pattern <span style="color:#555">=</span> [<span style="color:#366">list</span>(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)]
    <span style="color:#069;font-weight:bold">for</span> first, second <span style="color:#000;font-weight:bold">in</span> pairwise(pattern):
        <span style="color:#069;font-weight:bold">for</span> char_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(first)):
            <span style="color:#069;font-weight:bold">if</span> first[char_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#000;font-weight:bold">and</span> second[char_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;O&#39;</span>:
                first[char_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;O&#39;</span>
                second[char_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;.&#39;</span>
    
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span><span style="color:#555">.</span>join(<span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">rollSouth</span>(data: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    pattern <span style="color:#555">=</span> [<span style="color:#366">list</span>(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)]
    <span style="color:#069;font-weight:bold">for</span> first, second <span style="color:#000;font-weight:bold">in</span> pairwise(<span style="color:#366">reversed</span>(pattern)):
        <span style="color:#069;font-weight:bold">for</span> char_index <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(first)):
            <span style="color:#069;font-weight:bold">if</span> first[char_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#000;font-weight:bold">and</span> second[char_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;O&#39;</span>:
                first[char_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;O&#39;</span>
                second[char_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;.&#39;</span>
    
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span><span style="color:#555">.</span>join(<span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">rollEast</span>(data:<span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    pattern <span style="color:#555">=</span> [<span style="color:#366">list</span>(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)]
    <span style="color:#069;font-weight:bold">for</span> first_index, second_index <span style="color:#000;font-weight:bold">in</span> pairwise(<span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>]))):
        <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern:
            <span style="color:#069;font-weight:bold">if</span> line[second_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#000;font-weight:bold">and</span> line[first_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;O&#39;</span>:
                line[second_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;O&#39;</span>
                line[first_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;.&#39;</span>

    <span style="color:#069;font-weight:bold">return</span> <span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span><span style="color:#555">.</span>join(<span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">rollWest</span>(data:<span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    pattern <span style="color:#555">=</span> [<span style="color:#366">list</span>(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)]
    <span style="color:#069;font-weight:bold">for</span> first_index, second_index <span style="color:#000;font-weight:bold">in</span> pairwise(<span style="color:#366">reversed</span>(<span style="color:#366">range</span>(<span style="color:#366">len</span>(pattern[<span style="color:#f60">0</span>])))):
        <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern:
            <span style="color:#069;font-weight:bold">if</span> line[second_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#000;font-weight:bold">and</span> line[first_index] <span style="color:#555">==</span> <span style="color:#c30">&#39;O&#39;</span>:
                line[second_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;O&#39;</span>
                line[first_index] <span style="color:#555">=</span> <span style="color:#c30">&#39;.&#39;</span>

    <span style="color:#069;font-weight:bold">return</span> <span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span><span style="color:#555">.</span>join(<span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join(line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> pattern)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">print_pattern</span>(data:<span style="color:#366">str</span>):
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>):
        <span style="color:#366">print</span>(line)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day14_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day14_2&#34;</span>)
    configs <span style="color:#555">=</span> []

    counter <span style="color:#555">=</span> count()
    <span style="color:#069;font-weight:bold">while</span> data <span style="color:#000;font-weight:bold">not</span> <span style="color:#000;font-weight:bold">in</span> configs:
        <span style="color:#366">print</span>(loop_point<span style="color:#555">:=</span> counter<span style="color:#555">.</span>__next__())
        configs<span style="color:#555">.</span>append(data)
        data <span style="color:#555">=</span> cycle(data)

    loop_point <span style="color:#555">+=</span> <span style="color:#f60">1</span>
    first_occurance <span style="color:#555">=</span> configs<span style="color:#555">.</span>index(data)
    loop_length <span style="color:#555">=</span> loop_point <span style="color:#555">-</span> first_occurance
    target <span style="color:#555">=</span> <span style="color:#f60">1_000_000_000</span>
    last_loop <span style="color:#555">=</span> (<span style="color:#366">int</span>((target <span style="color:#555">-</span> first_occurance)<span style="color:#555">/</span>loop_length)) <span style="color:#555">*</span> loop_length <span style="color:#555">+</span> first_occurance
    difference <span style="color:#555">=</span> target <span style="color:#555">-</span> last_loop

    <span style="color:#069;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(difference):
        data <span style="color:#555">=</span> cycle(data)
        
    load <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> row_index, row <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)):
        row_value <span style="color:#555">=</span> <span style="color:#366">len</span>(data<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)) <span style="color:#555">-</span> row_index
        <span style="color:#069;font-weight:bold">for</span> char <span style="color:#000;font-weight:bold">in</span> row:
            <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#39;O&#39;</span>: load <span style="color:#555">+=</span> row_value

    result <span style="color:#555">=</span> load
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day14_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day14_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday14_2 = document.querySelectorAll('[data-tab-target-day14_2]')
    const tabContentsday14_2 = document.querySelectorAll('[data-tab-content-day14_2]')

    tabsday14_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay14_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday14_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday14_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day15_1'>Day 15 (Part 1): Lens Library</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day15_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day15_1-upload-input" name="day15_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day15_1-run-btn" py-click="main_day15_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day15_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day15_1-upload-input')
            </script>
            <script type="py" src="day15/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day15_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day15_1="#day15_1-code" class="active tab code-title">day15_1.py</li>
         
        
    </ul>

    <div id="day15_1-code" data-tab-content-day15_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">hash</span>(s: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span>:
    value <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> char <span style="color:#000;font-weight:bold">in</span> s:
        value <span style="color:#555">+=</span> <span style="color:#366">ord</span>(char)
        value <span style="color:#555">*=</span> <span style="color:#f60">17</span>
        value <span style="color:#555">%=</span> <span style="color:#f60">256</span>
    <span style="color:#069;font-weight:bold">return</span> value

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day15_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day15_1&#34;</span>)

    result <span style="color:#555">=</span> <span style="color:#366">sum</span>(<span style="color:#366">hash</span>(s) <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#39;,&#39;</span>))
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day15_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day15_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday15_1 = document.querySelectorAll('[data-tab-target-day15_1]')
    const tabContentsday15_1 = document.querySelectorAll('[data-tab-content-day15_1]')

    tabsday15_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay15_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday15_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday15_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day15_2'>Day 15 (Part 2): Lens Library</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day15_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day15_2-upload-input" name="day15_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day15_2-run-btn" py-click="main_day15_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day15_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day15_2-upload-input')
            </script>
            <script type="py" src="day15/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day15_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day15_2="#day15_2-code" class="active tab code-title">day15_2.py</li>
         
        
    </ul>

    <div id="day15_2-code" data-tab-content-day15_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">hash</span>(s: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span>:
    value <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> char <span style="color:#000;font-weight:bold">in</span> s:
        value <span style="color:#555">+=</span> <span style="color:#366">ord</span>(char)
        value <span style="color:#555">*=</span> <span style="color:#f60">17</span>
        value <span style="color:#555">%=</span> <span style="color:#f60">256</span>
    <span style="color:#069;font-weight:bold">return</span> value

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Lens</span>:
    label: <span style="color:#366">str</span>
    focal_length: <span style="color:#366">str</span>

    <span style="color:#069;font-weight:bold">def</span> __eq__(self, other):
        <span style="color:#069;font-weight:bold">return</span> self<span style="color:#555">.</span>label <span style="color:#555">==</span> other <span style="color:#000;font-weight:bold">or</span> (<span style="color:#366">hasattr</span>(other, <span style="color:#c30">&#34;label&#34;</span>) <span style="color:#000;font-weight:bold">and</span> self<span style="color:#555">.</span>label <span style="color:#555">==</span> other<span style="color:#555">.</span>label)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day15_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day15_2&#34;</span>)

    boxes <span style="color:#555">=</span> [[] <span style="color:#069;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#f60">256</span>)]
    <span style="color:#069;font-weight:bold">for</span> command <span style="color:#000;font-weight:bold">in</span> data<span style="color:#555">.</span>split(<span style="color:#c30">&#39;,&#39;</span>):
        <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Processing </span><span style="color:#a00">{</span>command<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(<span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;label&gt;[a-zA-Z]+)(?P&lt;inst&gt;[-]|=)(?P&lt;num&gt;\d)?&#34;</span>, command)
        label, inst <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>), m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;inst&#34;</span>)
        box <span style="color:#555">=</span> boxes[<span style="color:#366">hash</span>(label)]
        <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>label<span style="color:#a00">=}</span><span style="color:#c30"> </span><span style="color:#a00">{</span>inst<span style="color:#a00">=}</span><span style="color:#c30">&#34;</span>)
        <span style="color:#069;font-weight:bold">if</span> inst <span style="color:#555">==</span> <span style="color:#c30">&#34;-&#34;</span>:
            <span style="color:#069;font-weight:bold">if</span> label <span style="color:#000;font-weight:bold">in</span> box: box<span style="color:#555">.</span>remove(label)
        <span style="color:#069;font-weight:bold">elif</span> inst <span style="color:#555">==</span> <span style="color:#c30">&#34;=&#34;</span>:
            focal_length <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;num&#34;</span>)
            <span style="color:#069;font-weight:bold">if</span> label <span style="color:#000;font-weight:bold">in</span> box:
                location <span style="color:#555">=</span> box<span style="color:#555">.</span>index(label)
                box[location] <span style="color:#555">=</span> Lens(label<span style="color:#555">=</span>label, focal_length<span style="color:#555">=</span>focal_length)
            <span style="color:#069;font-weight:bold">else</span>:
                box<span style="color:#555">.</span>append(Lens(label<span style="color:#555">=</span>label, focal_length<span style="color:#555">=</span>focal_length))
        <span style="color:#069;font-weight:bold">else</span>:
            <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Inst must be &#39;-&#39; or &#39;=&#39;, not </span><span style="color:#a00">{</span>inst<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

    <span style="color:#069;font-weight:bold">for</span> i, b <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(boxes):
        <span style="color:#069;font-weight:bold">if</span> boxes:
            <span style="color:#069;font-weight:bold">pass</span><span style="color:#09f;font-style:italic"># print(f&#34;{i}\t{b}&#34;)</span>

    total <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> i, b <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(boxes):
        <span style="color:#069;font-weight:bold">for</span> l, lens <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(b):
            total <span style="color:#555">+=</span> (i <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> (l <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> (<span style="color:#366">int</span>(lens<span style="color:#555">.</span>focal_length))

    display(total, target<span style="color:#555">=</span><span style="color:#c30">&#34;day15_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day15_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday15_2 = document.querySelectorAll('[data-tab-target-day15_2]')
    const tabContentsday15_2 = document.querySelectorAll('[data-tab-content-day15_2]')

    tabsday15_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay15_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday15_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday15_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day16_1'>Day 16 (Part 1): The Floor Will Be Lava</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day16_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day16_1-upload-input" name="day16_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day16_1-run-btn" py-click="main_day16_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day16_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day16_1-upload-input')
            </script>
            <script type="py" src="day16/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day16_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day16_1="#day16_1-code" class="active tab code-title">day16_1.py</li>
         
        
    </ul>

    <div id="day16_1-code" data-tab-content-day16_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">copy</span> <span style="color:#069;font-weight:bold">import</span> deepcopy
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">rich</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable


LEFT <span style="color:#555">=</span> (<span style="color:#f60">0</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>)
RIGHT <span style="color:#555">=</span> (<span style="color:#f60">0</span>, <span style="color:#f60">1</span>)
UP <span style="color:#555">=</span> (<span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#f60">0</span>)
DOWN <span style="color:#555">=</span> (<span style="color:#f60">1</span>, <span style="color:#f60">0</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_next_tiles</span>(coords: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>], direction: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>], data, dims: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]) <span style="color:#555">-&gt;</span> Iterable[<span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]]:
    <span style="color:#09f;font-style:italic"># Off edge of map</span>
    <span style="color:#069;font-weight:bold">if</span> coords[<span style="color:#f60">0</span>] <span style="color:#555">&lt;</span> <span style="color:#f60">0</span> <span style="color:#000;font-weight:bold">or</span> coords [<span style="color:#f60">0</span>] <span style="color:#555">&gt;=</span> dims[<span style="color:#f60">0</span>] <span style="color:#000;font-weight:bold">or</span> \
        coords[<span style="color:#f60">1</span>] <span style="color:#555">&lt;</span> <span style="color:#f60">0</span> <span style="color:#000;font-weight:bold">or</span> coords [<span style="color:#f60">1</span>] <span style="color:#555">&gt;=</span> dims[<span style="color:#f60">1</span>]:
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">set</span>()
    
    value <span style="color:#555">=</span> data[(coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>])]

    <span style="color:#09f;font-style:italic"># Move through empty space and parallel splitters</span>
    <span style="color:#069;font-weight:bold">if</span> value <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#000;font-weight:bold">in</span> (LEFT, RIGHT) <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#39;-&#39;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#000;font-weight:bold">in</span> (UP, DOWN) <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;|&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>] <span style="color:#555">+</span> direction[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>] <span style="color:#555">+</span> direction[<span style="color:#f60">1</span>]), direction)]
    
    <span style="color:#09f;font-style:italic"># Vertical Splitter</span>
    <span style="color:#069;font-weight:bold">if</span> direction <span style="color:#000;font-weight:bold">in</span> (LEFT, RIGHT) <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;|&#34;</span>:
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>]<span style="color:#555">-</span><span style="color:#f60">1</span>, coords[<span style="color:#f60">1</span>]), UP),
                 ((coords[<span style="color:#f60">0</span>]<span style="color:#555">+</span><span style="color:#f60">1</span>, coords[<span style="color:#f60">1</span>]), DOWN)]
    

    <span style="color:#09f;font-style:italic"># Horizontal Splitter</span>
    <span style="color:#069;font-weight:bold">if</span> direction <span style="color:#000;font-weight:bold">in</span> (UP, DOWN) <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;-&#34;</span>:
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>]<span style="color:#555">-</span><span style="color:#f60">1</span>), LEFT),
                 ((coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>]<span style="color:#555">+</span><span style="color:#f60">1</span>), RIGHT)]
    
    <span style="color:#09f;font-style:italic"># Bouncing Down</span>
    <span style="color:#069;font-weight:bold">if</span> (direction <span style="color:#555">==</span> RIGHT <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\\</span><span style="color:#c30">&#34;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#555">==</span> LEFT <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;/&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>] <span style="color:#555">+</span> <span style="color:#f60">1</span>, coords[<span style="color:#f60">1</span>]), DOWN)]
    
    <span style="color:#09f;font-style:italic"># Bouncing Up</span>
    <span style="color:#069;font-weight:bold">if</span> (direction <span style="color:#555">==</span> RIGHT <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;/&#34;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#555">==</span> LEFT <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\\</span><span style="color:#c30">&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>] <span style="color:#555">-</span> <span style="color:#f60">1</span> , coords[<span style="color:#f60">1</span>]), UP)]
    
    <span style="color:#09f;font-style:italic"># Bouncing Left</span>
    <span style="color:#069;font-weight:bold">if</span> (direction <span style="color:#555">==</span> DOWN <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;/&#34;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#555">==</span> UP <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\\</span><span style="color:#c30">&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>] <span style="color:#555">-</span> <span style="color:#f60">1</span>), LEFT)]
    
    <span style="color:#09f;font-style:italic"># Bouncing Right</span>
    <span style="color:#069;font-weight:bold">if</span> (direction <span style="color:#555">==</span> DOWN <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\\</span><span style="color:#c30">&#34;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#555">==</span> UP <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;/&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>] <span style="color:#555">+</span> <span style="color:#f60">1</span>), RIGHT)]
    
    <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">&#34;Unhandled Instruction&#34;</span>)   

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">printGrid</span>(lasers, inp, illuminated_spaces):
    <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(inp):
        <span style="color:#069;font-weight:bold">for</span> char_index, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line):
            lasers_here <span style="color:#555">=</span> [(laser[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>], laser[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>]) <span style="color:#069;font-weight:bold">for</span> laser <span style="color:#000;font-weight:bold">in</span> lasers <span style="color:#069;font-weight:bold">if</span> laser[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>] <span style="color:#555">==</span> line_index <span style="color:#000;font-weight:bold">and</span> laser[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>] <span style="color:#555">==</span> char_index]
            <span style="color:#069;font-weight:bold">if</span> lasers_here:
                rich<span style="color:#555">.</span>print(<span style="color:#c30">&#39;[red]X[/red]&#39;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">elif</span> (line_index, char_index) <span style="color:#000;font-weight:bold">in</span> illuminated_spaces:
                rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#39;[blue]</span><span style="color:#a00">{</span>char<span style="color:#a00">}</span><span style="color:#c30">[/blue]&#39;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">else</span>: <span style="color:#366">print</span>(char, end <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>)
        <span style="color:#366">print</span>(<span style="color:#c30">&#34;&#34;</span>)
    



<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day16_1</span>(<span style="color:#555">*</span>args):
    inp <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day16_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    data <span style="color:#555">=</span> {(line_index, char): value <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(inp) <span style="color:#069;font-weight:bold">for</span> char, value <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line)}

    lasers <span style="color:#555">=</span> <span style="color:#366">set</span>([((<span style="color:#f60">0</span>,<span style="color:#f60">0</span>), RIGHT),])
    illuminated_spaces <span style="color:#555">=</span> <span style="color:#366">set</span>([(<span style="color:#f60">0</span>,<span style="color:#f60">0</span>),])
    old_lasers <span style="color:#555">=</span> <span style="color:#366">set</span>()


    dims <span style="color:#555">=</span> (<span style="color:#366">len</span>(inp), <span style="color:#366">len</span>(inp[<span style="color:#f60">0</span>]))

    <span style="color:#069;font-weight:bold">while</span> lasers:

        new_lasers <span style="color:#555">=</span> <span style="color:#366">set</span>()
        <span style="color:#069;font-weight:bold">for</span> laser <span style="color:#000;font-weight:bold">in</span> lasers:
            new_lasers <span style="color:#555">|=</span> <span style="color:#366">set</span>(get_next_tiles(laser[<span style="color:#f60">0</span>], laser[<span style="color:#f60">1</span>], data, dims))
        <span style="color:#069;font-weight:bold">if</span> new_lasers <span style="color:#555">&lt;=</span> old_lasers: <span style="color:#069;font-weight:bold">break</span>
        old_lasers <span style="color:#555">|=</span> new_lasers
        lasers <span style="color:#555">=</span> new_lasers
        illuminated_spaces <span style="color:#555">=</span> illuminated_spaces<span style="color:#555">.</span>union(<span style="color:#366">set</span>((laser[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>], laser[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>]) <span style="color:#069;font-weight:bold">for</span> laser <span style="color:#000;font-weight:bold">in</span> lasers))

        <span style="color:#09f;font-style:italic">#printGrid(lasers, inp, illuminated_spaces)</span>
        <span style="color:#09f;font-style:italic">#rich.print(f&#39;[red]{lasers}[/red]&#39;)</span>
        <span style="color:#09f;font-style:italic">#rich.print(f&#34;[blue]{illuminated_spaces}[/blue]&#34;)</span>
        <span style="color:#09f;font-style:italic">#print(&#34;&#34;)</span>

    result <span style="color:#555">=</span> <span style="color:#366">len</span>([s <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> illuminated_spaces <span style="color:#069;font-weight:bold">if</span> (<span style="color:#f60">0</span> <span style="color:#555">&lt;=</span> s[<span style="color:#f60">0</span>] <span style="color:#555">&lt;</span> dims[<span style="color:#f60">0</span>]) <span style="color:#000;font-weight:bold">and</span> (<span style="color:#f60">0</span> <span style="color:#555">&lt;=</span> s[<span style="color:#f60">1</span>] <span style="color:#555">&lt;</span> dims[<span style="color:#f60">1</span>])])
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day16_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day16_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday16_1 = document.querySelectorAll('[data-tab-target-day16_1]')
    const tabContentsday16_1 = document.querySelectorAll('[data-tab-content-day16_1]')

    tabsday16_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay16_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday16_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday16_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day16_2'>Day 16 (Part 2): The Floor Will Be Lava</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day16_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day16_2-upload-input" name="day16_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day16_2-run-btn" py-click="main_day16_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day16_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day16_2-upload-input')
            </script>
            <script type="py" src="day16/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day16_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day16_2="#day16_2-code" class="active tab code-title">day16_2.py</li>
         
        
    </ul>

    <div id="day16_2-code" data-tab-content-day16_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">copy</span> <span style="color:#069;font-weight:bold">import</span> deepcopy
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">rich</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable


LEFT <span style="color:#555">=</span> (<span style="color:#f60">0</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>)
RIGHT <span style="color:#555">=</span> (<span style="color:#f60">0</span>, <span style="color:#f60">1</span>)
UP <span style="color:#555">=</span> (<span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#f60">0</span>)
DOWN <span style="color:#555">=</span> (<span style="color:#f60">1</span>, <span style="color:#f60">0</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_next_tiles</span>(coords: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>], direction: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>], data, dims: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]) <span style="color:#555">-&gt;</span> Iterable[<span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]]:
    <span style="color:#09f;font-style:italic"># Off edge of map</span>
    <span style="color:#069;font-weight:bold">if</span> coords[<span style="color:#f60">0</span>] <span style="color:#555">&lt;</span> <span style="color:#f60">0</span> <span style="color:#000;font-weight:bold">or</span> coords [<span style="color:#f60">0</span>] <span style="color:#555">&gt;=</span> dims[<span style="color:#f60">0</span>] <span style="color:#000;font-weight:bold">or</span> \
        coords[<span style="color:#f60">1</span>] <span style="color:#555">&lt;</span> <span style="color:#f60">0</span> <span style="color:#000;font-weight:bold">or</span> coords [<span style="color:#f60">1</span>] <span style="color:#555">&gt;=</span> dims[<span style="color:#f60">1</span>]:
        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">set</span>()
    
    value <span style="color:#555">=</span> data[(coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>])]

    <span style="color:#09f;font-style:italic"># Move through empty space and parallel splitters</span>
    <span style="color:#069;font-weight:bold">if</span> value <span style="color:#555">==</span> <span style="color:#c30">&#39;.&#39;</span> <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#000;font-weight:bold">in</span> (LEFT, RIGHT) <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#39;-&#39;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#000;font-weight:bold">in</span> (UP, DOWN) <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;|&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>] <span style="color:#555">+</span> direction[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>] <span style="color:#555">+</span> direction[<span style="color:#f60">1</span>]), direction)]
    
    <span style="color:#09f;font-style:italic"># Vertical Splitter</span>
    <span style="color:#069;font-weight:bold">if</span> direction <span style="color:#000;font-weight:bold">in</span> (LEFT, RIGHT) <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;|&#34;</span>:
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>]<span style="color:#555">-</span><span style="color:#f60">1</span>, coords[<span style="color:#f60">1</span>]), UP),
                 ((coords[<span style="color:#f60">0</span>]<span style="color:#555">+</span><span style="color:#f60">1</span>, coords[<span style="color:#f60">1</span>]), DOWN)]
    

    <span style="color:#09f;font-style:italic"># Horizontal Splitter</span>
    <span style="color:#069;font-weight:bold">if</span> direction <span style="color:#000;font-weight:bold">in</span> (UP, DOWN) <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;-&#34;</span>:
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>]<span style="color:#555">-</span><span style="color:#f60">1</span>), LEFT),
                 ((coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>]<span style="color:#555">+</span><span style="color:#f60">1</span>), RIGHT)]
    
    <span style="color:#09f;font-style:italic"># Bouncing Down</span>
    <span style="color:#069;font-weight:bold">if</span> (direction <span style="color:#555">==</span> RIGHT <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\\</span><span style="color:#c30">&#34;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#555">==</span> LEFT <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;/&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>] <span style="color:#555">+</span> <span style="color:#f60">1</span>, coords[<span style="color:#f60">1</span>]), DOWN)]
    
    <span style="color:#09f;font-style:italic"># Bouncing Up</span>
    <span style="color:#069;font-weight:bold">if</span> (direction <span style="color:#555">==</span> RIGHT <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;/&#34;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#555">==</span> LEFT <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\\</span><span style="color:#c30">&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>] <span style="color:#555">-</span> <span style="color:#f60">1</span> , coords[<span style="color:#f60">1</span>]), UP)]
    
    <span style="color:#09f;font-style:italic"># Bouncing Left</span>
    <span style="color:#069;font-weight:bold">if</span> (direction <span style="color:#555">==</span> DOWN <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;/&#34;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#555">==</span> UP <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\\</span><span style="color:#c30">&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>] <span style="color:#555">-</span> <span style="color:#f60">1</span>), LEFT)]
    
    <span style="color:#09f;font-style:italic"># Bouncing Right</span>
    <span style="color:#069;font-weight:bold">if</span> (direction <span style="color:#555">==</span> DOWN <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\\</span><span style="color:#c30">&#34;</span>) <span style="color:#000;font-weight:bold">or</span> \
        (direction <span style="color:#555">==</span> UP <span style="color:#000;font-weight:bold">and</span> value <span style="color:#555">==</span> <span style="color:#c30">&#34;/&#34;</span>):
        <span style="color:#069;font-weight:bold">return</span> [((coords[<span style="color:#f60">0</span>], coords[<span style="color:#f60">1</span>] <span style="color:#555">+</span> <span style="color:#f60">1</span>), RIGHT)]
    
    <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">&#34;Unhandled Instruction&#34;</span>)   

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">printGrid</span>(lasers, inp, illuminated_spaces):
    <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(inp):
        <span style="color:#069;font-weight:bold">for</span> char_index, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line):
            lasers_here <span style="color:#555">=</span> [(laser[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>], laser[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>]) <span style="color:#069;font-weight:bold">for</span> laser <span style="color:#000;font-weight:bold">in</span> lasers <span style="color:#069;font-weight:bold">if</span> laser[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>] <span style="color:#555">==</span> line_index <span style="color:#000;font-weight:bold">and</span> laser[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>] <span style="color:#555">==</span> char_index]
            <span style="color:#069;font-weight:bold">if</span> lasers_here:
                rich<span style="color:#555">.</span>print(<span style="color:#c30">&#39;[red]X[/red]&#39;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">elif</span> (line_index, char_index) <span style="color:#000;font-weight:bold">in</span> illuminated_spaces:
                rich<span style="color:#555">.</span>print(<span style="color:#c30">f</span><span style="color:#c30">&#39;[blue]#[/blue]&#39;</span>, end<span style="color:#555">=</span><span style="color:#c30">&#34;&#34;</span>)
            <span style="color:#069;font-weight:bold">else</span>: <span style="color:#366">print</span>(char, end <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>)
        <span style="color:#366">print</span>(<span style="color:#c30">&#34;&#34;</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">score_16_2</span>(start_space: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>], start_dir: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>], inp) <span style="color:#555">-&gt;</span> <span style="color:#366">int</span>:
    data <span style="color:#555">=</span> {(line_index, char): value <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(inp) <span style="color:#069;font-weight:bold">for</span> char, value <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line)}

    lasers <span style="color:#555">=</span> <span style="color:#366">set</span>([(start_space, start_dir),])
    illuminated_spaces <span style="color:#555">=</span> <span style="color:#366">set</span>([start_space,])
    old_lasers <span style="color:#555">=</span> <span style="color:#366">set</span>()

    dims <span style="color:#555">=</span> (<span style="color:#366">len</span>(inp), <span style="color:#366">len</span>(inp[<span style="color:#f60">0</span>]))

    <span style="color:#069;font-weight:bold">while</span> lasers:
        new_lasers <span style="color:#555">=</span> <span style="color:#366">set</span>()
        <span style="color:#069;font-weight:bold">for</span> laser <span style="color:#000;font-weight:bold">in</span> lasers:
            new_lasers <span style="color:#555">|=</span> <span style="color:#366">set</span>(get_next_tiles(laser[<span style="color:#f60">0</span>], laser[<span style="color:#f60">1</span>], data, dims))
        <span style="color:#069;font-weight:bold">if</span> new_lasers <span style="color:#555">&lt;=</span> old_lasers: <span style="color:#069;font-weight:bold">break</span>
        old_lasers <span style="color:#555">|=</span> new_lasers
        lasers <span style="color:#555">=</span> new_lasers
        illuminated_spaces <span style="color:#555">=</span> illuminated_spaces<span style="color:#555">.</span>union(<span style="color:#366">set</span>((laser[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>], laser[<span style="color:#f60">0</span>][<span style="color:#f60">1</span>]) <span style="color:#069;font-weight:bold">for</span> laser <span style="color:#000;font-weight:bold">in</span> lasers))

    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">len</span>([s <span style="color:#069;font-weight:bold">for</span> s <span style="color:#000;font-weight:bold">in</span> illuminated_spaces <span style="color:#069;font-weight:bold">if</span> (<span style="color:#f60">0</span> <span style="color:#555">&lt;=</span> s[<span style="color:#f60">0</span>] <span style="color:#555">&lt;</span> dims[<span style="color:#f60">0</span>]) <span style="color:#000;font-weight:bold">and</span> (<span style="color:#f60">0</span> <span style="color:#555">&lt;=</span> s[<span style="color:#f60">1</span>] <span style="color:#555">&lt;</span> dims[<span style="color:#f60">1</span>])])

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day16_2</span>(<span style="color:#555">*</span>args):
    inp <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day16_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    max_score <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>

    <span style="color:#09f;font-style:italic"># Left and Right Sides</span>
    <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(inp)):
        max_score <span style="color:#555">=</span> <span style="color:#366">max</span>(max_score, score_16_2((i, <span style="color:#f60">0</span>), RIGHT, inp))
        max_score <span style="color:#555">=</span> <span style="color:#366">max</span>(max_score, score_16_2((i, <span style="color:#366">len</span>(inp[<span style="color:#f60">0</span>])<span style="color:#555">-</span><span style="color:#f60">1</span>), LEFT, inp))

    <span style="color:#09f;font-style:italic"># Top and Bottom</span>
    <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">len</span>(inp[<span style="color:#f60">0</span>])):
        max_score <span style="color:#555">=</span> <span style="color:#366">max</span>(max_score, score_16_2((<span style="color:#f60">0</span>, i), DOWN, inp))
        max_score <span style="color:#555">=</span> <span style="color:#366">max</span>(max_score, score_16_2((<span style="color:#366">len</span>(inp)<span style="color:#555">-</span><span style="color:#f60">1</span>, i), UP, inp))
    
    display(max_score, target<span style="color:#555">=</span><span style="color:#c30">&#34;day16_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day16_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday16_2 = document.querySelectorAll('[data-tab-target-day16_2]')
    const tabContentsday16_2 = document.querySelectorAll('[data-tab-content-day16_2]')

    tabsday16_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay16_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday16_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday16_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<!-- <h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day17_1'>Day 17 (Part 1): Clumsy Crucible</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day17_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day17_1-upload-input" name="day17_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day17_1-run-btn" py-click="main_day17_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day17_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day17_1-upload-input')
            </script>
            <script type="py" src="day17/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day17_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day17_1="#day17_1-code" class="active tab code-title">day17_1.py</li>
         
        
    </ul>

    <div id="day17_1-code" data-tab-content-day17_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input_test.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">bisect</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable

RIGHT <span style="color:#555">=</span> (<span style="color:#f60">0</span>, <span style="color:#f60">1</span>)
LEFT <span style="color:#555">=</span> (<span style="color:#f60">0</span>, <span style="color:#555">-</span><span style="color:#f60">1</span>)
UP <span style="color:#555">=</span> (<span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#f60">0</span>)
DOWN <span style="color:#555">=</span> (<span style="color:#f60">1</span>, <span style="color:#f60">0</span>)

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Header</span>:
    location: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]
    direction: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>]
    total_length: <span style="color:#366">int</span>
    moves_this_dir: <span style="color:#366">int</span> <span style="color:#555">=</span> <span style="color:#f60">0</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">getNewHeaders</span>(Header, data) <span style="color:#555">-&gt;</span> Iterable[Header]:
    <span style="color:#069;font-weight:bold">pass</span> <span style="color:#09f;font-style:italic"># TODO maybe this is the wrong algorithm....</span>



<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day17_1</span>(<span style="color:#555">*</span>args):
    inp <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day17_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)
    data <span style="color:#555">=</span> {(line_index, char): value <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(inp) <span style="color:#069;font-weight:bold">for</span> char, value <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line)}

    headers <span style="color:#555">=</span> [Header((<span style="color:#f60">0</span>,<span style="color:#f60">0</span>), RIGHT, <span style="color:#f60">0</span>),
               Header((<span style="color:#f60">0</span>,<span style="color:#f60">0</span>), DOWN, <span style="color:#f60">0</span>)]
    
    <span style="color:#069;font-weight:bold">while</span> <span style="color:#069;font-weight:bold">True</span>:
        <span style="color:#069;font-weight:bold">pass</span> <span style="color:#09f;font-style:italic"># TODO </span>

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day17_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day17_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday17_1 = document.querySelectorAll('[data-tab-target-day17_1]')
    const tabContentsday17_1 = document.querySelectorAll('[data-tab-content-day17_1]')

    tabsday17_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay17_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday17_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday17_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day17_2'>Day 17 (Part 2): Clumsy Crucible</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day17_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day17_2-upload-input" name="day17_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day17_2-run-btn" py-click="main_day17_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day17_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day17_2-upload-input')
            </script>
            <script type="py" src="day17/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day17_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day17_2="#day17_2-code" class="active tab code-title">day17_2.py</li>
         
        
    </ul>

    <div id="day17_2-code" data-tab-content-day17_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input_test.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day17_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day17_2&#34;</span>)

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day17_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day17_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday17_2 = document.querySelectorAll('[data-tab-target-day17_2]')
    const tabContentsday17_2 = document.querySelectorAll('[data-tab-content-day17_2]')

    tabsday17_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay17_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday17_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday17_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script> -->

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day18_1'>Day 18 (Part 1): Lavaduct Lagoon</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day18_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day18_1-upload-input" name="day18_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day18_1-run-btn" py-click="main_day18_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day18_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day18_1-upload-input')
            </script>
            <script type="py" src="day18/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day18_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day18_1="#day18_1-code" class="active tab code-title">day18_1.py</li>
         
        
    </ul>

    <div id="day18_1-code" data-tab-content-day18_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> deque
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> pairwise
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>    
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#99f">@dataclass</span>(frozen<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>)
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Location</span>:
    x: <span style="color:#366">int</span>
    y: <span style="color:#366">int</span>

inst <span style="color:#555">=</span> {
    <span style="color:#c30">&#34;R&#34;</span>: Location(x <span style="color:#555">=</span> <span style="color:#f60">1</span>, y <span style="color:#555">=</span> <span style="color:#f60">0</span>),
    <span style="color:#c30">&#34;L&#34;</span>: Location(x <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>, y <span style="color:#555">=</span> <span style="color:#f60">0</span>),
    <span style="color:#c30">&#34;U&#34;</span>: Location(x <span style="color:#555">=</span> <span style="color:#f60">0</span>, y <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>),
    <span style="color:#c30">&#34;D&#34;</span>: Location(x <span style="color:#555">=</span> <span style="color:#f60">0</span>, y <span style="color:#555">=</span> <span style="color:#f60">1</span>)
}

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">score_shoelace</span>(data):
    loc <span style="color:#555">=</span> Location(x <span style="color:#555">=</span> <span style="color:#f60">0</span>, y <span style="color:#555">=</span> <span style="color:#f60">0</span>)
    trench <span style="color:#555">=</span> [Location(<span style="color:#f60">0</span>,<span style="color:#f60">0</span>)]

    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(<span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;dir&gt;[RDLU]) (?P&lt;num&gt;\d)&#34;</span>, line)
        <span style="color:#366">dir</span>, num <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;dir&#34;</span>), m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;num&#34;</span>)
        <span style="color:#069;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">int</span>(num)):
            loc <span style="color:#555">=</span> Location(loc<span style="color:#555">.</span>x <span style="color:#555">+</span> inst[<span style="color:#366">dir</span>]<span style="color:#555">.</span>x, loc<span style="color:#555">.</span>y <span style="color:#555">+</span> inst[<span style="color:#366">dir</span>]<span style="color:#555">.</span>y)
        trench<span style="color:#555">.</span>append(loc)
    
    <span style="color:#069;font-weight:bold">for</span> (one, two) <span style="color:#000;font-weight:bold">in</span> pairwise(trench):
        <span style="color:#366">print</span>(one, two)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">sum</span>((one<span style="color:#555">.</span>x <span style="color:#555">*</span> two<span style="color:#555">.</span>y) <span style="color:#555">-</span> (two<span style="color:#555">.</span>x <span style="color:#555">*</span> one<span style="color:#555">.</span>y) <span style="color:#069;font-weight:bold">for</span> (one, two) <span style="color:#000;font-weight:bold">in</span> pairwise(trench))

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_trench</span>(data):
    loc <span style="color:#555">=</span> Location(x <span style="color:#555">=</span> <span style="color:#f60">0</span>, y <span style="color:#555">=</span> <span style="color:#f60">0</span>)
    trench <span style="color:#555">=</span> <span style="color:#366">set</span>([Location(<span style="color:#f60">0</span>,<span style="color:#f60">0</span>)])

    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(<span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;dir&gt;[RDLU]) (?P&lt;num&gt;\d+)&#34;</span>, line)
        <span style="color:#366">dir</span>, num <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;dir&#34;</span>), m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;num&#34;</span>)
        <span style="color:#069;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#366">int</span>(num)):
            loc <span style="color:#555">=</span> Location(loc<span style="color:#555">.</span>x <span style="color:#555">+</span> inst[<span style="color:#366">dir</span>]<span style="color:#555">.</span>x, loc<span style="color:#555">.</span>y <span style="color:#555">+</span> inst[<span style="color:#366">dir</span>]<span style="color:#555">.</span>y)
            trench<span style="color:#555">.</span>add(loc)
    <span style="color:#069;font-weight:bold">assert</span> loc <span style="color:#555">==</span> Location(<span style="color:#f60">0</span>,<span style="color:#f60">0</span>)
    <span style="color:#069;font-weight:bold">return</span> trench

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">score_flood_fill</span>(trench):
    left <span style="color:#555">=</span> <span style="color:#366">min</span>(loc<span style="color:#555">.</span>x <span style="color:#069;font-weight:bold">for</span> loc <span style="color:#000;font-weight:bold">in</span> trench)
    right <span style="color:#555">=</span> <span style="color:#366">max</span>(loc<span style="color:#555">.</span>x <span style="color:#069;font-weight:bold">for</span> loc <span style="color:#000;font-weight:bold">in</span> trench)
    top <span style="color:#555">=</span> <span style="color:#366">min</span>(loc<span style="color:#555">.</span>y <span style="color:#069;font-weight:bold">for</span> loc <span style="color:#000;font-weight:bold">in</span> trench)
    bottom <span style="color:#555">=</span> <span style="color:#366">max</span>(loc<span style="color:#555">.</span>y <span style="color:#069;font-weight:bold">for</span> loc <span style="color:#000;font-weight:bold">in</span> trench)

    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>left<span style="color:#a00">=}</span><span style="color:#c30"> </span><span style="color:#a00">{</span>right<span style="color:#a00">=}</span><span style="color:#c30"> </span><span style="color:#a00">{</span>top<span style="color:#a00">=}</span><span style="color:#c30"> </span><span style="color:#a00">{</span>bottom<span style="color:#a00">=}</span><span style="color:#c30">&#34;</span>)

    nodes <span style="color:#555">=</span> <span style="color:#366">set</span>([Location(left<span style="color:#555">-</span><span style="color:#f60">1</span>, top<span style="color:#555">-</span><span style="color:#f60">1</span>)])
    seen <span style="color:#555">=</span> <span style="color:#366">set</span>(nodes)

    <span style="color:#069;font-weight:bold">while</span> nodes:
        current <span style="color:#555">=</span> nodes<span style="color:#555">.</span>pop()
        seen<span style="color:#555">.</span>add(current)
        <span style="color:#069;font-weight:bold">for</span> new_node <span style="color:#000;font-weight:bold">in</span> (Location(current<span style="color:#555">.</span>x, current<span style="color:#555">.</span>y <span style="color:#555">-</span> <span style="color:#f60">1</span>),
                         Location(current<span style="color:#555">.</span>x, current<span style="color:#555">.</span>y <span style="color:#555">+</span> <span style="color:#f60">1</span>),
                         Location(current<span style="color:#555">.</span>x <span style="color:#555">-</span> <span style="color:#f60">1</span>, current<span style="color:#555">.</span>y),
                         Location(current<span style="color:#555">.</span>x <span style="color:#555">+</span> <span style="color:#f60">1</span>, current<span style="color:#555">.</span>y)):
            <span style="color:#069;font-weight:bold">if</span> new_node<span style="color:#555">.</span>x <span style="color:#555">&gt;=</span> left <span style="color:#555">-</span> <span style="color:#f60">1</span> <span style="color:#000;font-weight:bold">and</span> \
                new_node<span style="color:#555">.</span>x <span style="color:#555">&lt;=</span> right <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#000;font-weight:bold">and</span> \
                new_node<span style="color:#555">.</span>y <span style="color:#555">&gt;=</span> top <span style="color:#555">-</span> <span style="color:#f60">1</span> <span style="color:#000;font-weight:bold">and</span> \
                new_node<span style="color:#555">.</span>y <span style="color:#555">&lt;=</span> bottom <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#000;font-weight:bold">and</span> \
                new_node <span style="color:#000;font-weight:bold">not</span> <span style="color:#000;font-weight:bold">in</span> trench <span style="color:#000;font-weight:bold">and</span> \
                new_node <span style="color:#000;font-weight:bold">not</span> <span style="color:#000;font-weight:bold">in</span> seen:
                nodes<span style="color:#555">.</span>add(new_node)   
        <span style="color:#366">print</span>(<span style="color:#366">len</span>(nodes))

    <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;viz.txt&#34;</span>, <span style="color:#c30">&#34;w&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
        <span style="color:#069;font-weight:bold">for</span> y <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(top<span style="color:#555">-</span><span style="color:#f60">1</span>, bottom<span style="color:#555">+</span><span style="color:#f60">2</span>):
            <span style="color:#069;font-weight:bold">for</span> x <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(left<span style="color:#555">-</span><span style="color:#f60">1</span>, right<span style="color:#555">+</span><span style="color:#f60">2</span>):
                <span style="color:#069;font-weight:bold">if</span> Location(x, y) <span style="color:#000;font-weight:bold">in</span> seen: <span style="color:#366">print</span>(<span style="color:#c30">&#34;#&#34;</span>,end <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span> , file <span style="color:#555">=</span> f)
                <span style="color:#069;font-weight:bold">else</span>: <span style="color:#366">print</span>(<span style="color:#c30">&#34;.&#34;</span>, end <span style="color:#555">=</span> <span style="color:#c30">&#34;&#34;</span>, file <span style="color:#555">=</span> f)
            <span style="color:#366">print</span>(<span style="color:#c30">&#34;&#34;</span>,file <span style="color:#555">=</span> f)

    area <span style="color:#555">=</span> (right<span style="color:#555">-</span>left<span style="color:#555">+</span><span style="color:#f60">3</span>) <span style="color:#555">*</span> (bottom<span style="color:#555">-</span>top<span style="color:#555">+</span><span style="color:#f60">3</span>)
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Total area: </span><span style="color:#a00">{</span>area<span style="color:#a00">=}</span><span style="color:#c30">&#34;</span>)
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Flooded exterior = </span><span style="color:#a00">{</span><span style="color:#366">len</span>(seen)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Interior = </span><span style="color:#a00">{</span>area <span style="color:#555">-</span> <span style="color:#366">len</span>(seen)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)


<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day18_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day18_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)

    <span style="color:#09f;font-style:italic">#result = score_shoelace(data)</span>
    result <span style="color:#555">=</span> score_flood_fill(get_trench(data))

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day18_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day18_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday18_1 = document.querySelectorAll('[data-tab-target-day18_1]')
    const tabContentsday18_1 = document.querySelectorAll('[data-tab-content-day18_1]')

    tabsday18_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay18_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday18_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday18_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day18_2'>Day 18 (Part 2): Lavaduct Lagoon</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day18_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day18_2-upload-input" name="day18_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day18_2-run-btn" py-click="main_day18_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day18_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day18_2-upload-input')
            </script>
            <script type="py" src="day18/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day18_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day18_2="#day18_2-code" class="active tab code-title">day18_2.py</li>
         
        
    </ul>

    <div id="day18_2-code" data-tab-content-day18_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> deque
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> pairwise
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>    
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#99f">@dataclass</span>(frozen<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>)
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Location</span>:
    x: <span style="color:#366">int</span>
    y: <span style="color:#366">int</span>

inst <span style="color:#555">=</span> {
    <span style="color:#c30">&#34;R&#34;</span>: Location(x <span style="color:#555">=</span> <span style="color:#f60">1</span>, y <span style="color:#555">=</span> <span style="color:#f60">0</span>),
    <span style="color:#c30">&#34;L&#34;</span>: Location(x <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>, y <span style="color:#555">=</span> <span style="color:#f60">0</span>),
    <span style="color:#c30">&#34;U&#34;</span>: Location(x <span style="color:#555">=</span> <span style="color:#f60">0</span>, y <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>),
    <span style="color:#c30">&#34;D&#34;</span>: Location(x <span style="color:#555">=</span> <span style="color:#f60">0</span>, y <span style="color:#555">=</span> <span style="color:#f60">1</span>)
}

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">score_shoelace</span>(trench, length):
    <span style="color:#069;font-weight:bold">for</span> (one, two) <span style="color:#000;font-weight:bold">in</span> pairwise(trench):
        <span style="color:#366">print</span>(one, two)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">.5</span> <span style="color:#555">*</span> <span style="color:#366">sum</span>((one<span style="color:#555">.</span>x <span style="color:#555">*</span> two<span style="color:#555">.</span>y) <span style="color:#555">-</span> (two<span style="color:#555">.</span>x <span style="color:#555">*</span> one<span style="color:#555">.</span>y) <span style="color:#069;font-weight:bold">for</span> (one, two) <span style="color:#000;font-weight:bold">in</span> pairwise(trench)) <span style="color:#555">+</span> <span style="color:#f60">.5</span> <span style="color:#555">*</span> length <span style="color:#555">+</span> <span style="color:#f60">1</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_trench_2</span>(data):
    loc <span style="color:#555">=</span> Location(x <span style="color:#555">=</span> <span style="color:#f60">0</span>, y <span style="color:#555">=</span> <span style="color:#f60">0</span>)
    trench <span style="color:#555">=</span> [Location(<span style="color:#f60">0</span>,<span style="color:#f60">0</span>)]
    length <span style="color:#555">=</span> <span style="color:#f60">0</span> 

    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>search(<span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;num&gt;[0-9a-f]</span><span style="color:#a00">{5}</span><span style="color:#c30">)(?P&lt;dir&gt;[0-3])&#34;</span>, line)
        num <span style="color:#555">=</span> <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;num&#34;</span>), base<span style="color:#555">=</span><span style="color:#f60">16</span>)
        <span style="color:#366">dir</span> <span style="color:#555">=</span> <span style="color:#366">str</span><span style="color:#555">.</span>translate(m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;dir&#34;</span>), <span style="color:#366">str</span><span style="color:#555">.</span>maketrans(<span style="color:#c30">&#34;0123&#34;</span>, <span style="color:#c30">&#34;RDLU&#34;</span>))
        loc <span style="color:#555">=</span> Location(loc<span style="color:#555">.</span>x <span style="color:#555">+</span> (inst[<span style="color:#366">dir</span>]<span style="color:#555">.</span>x <span style="color:#555">*</span> num), loc<span style="color:#555">.</span>y <span style="color:#555">+</span> (inst[<span style="color:#366">dir</span>]<span style="color:#555">.</span>y <span style="color:#555">*</span> num))
        length <span style="color:#555">+=</span> num
        trench<span style="color:#555">.</span>append(loc)
    <span style="color:#069;font-weight:bold">assert</span> loc <span style="color:#555">==</span> Location(<span style="color:#f60">0</span>,<span style="color:#f60">0</span>)
    <span style="color:#069;font-weight:bold">return</span> trench, length

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day18_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day18_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>)

    result <span style="color:#555">=</span> score_shoelace(<span style="color:#555">*</span>get_trench_2(data))

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day18_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day18_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday18_2 = document.querySelectorAll('[data-tab-target-day18_2]')
    const tabContentsday18_2 = document.querySelectorAll('[data-tab-content-day18_2]')

    tabsday18_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay18_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday18_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday18_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day19_1'>Day 19 (Part 1): Aplenty</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day19_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day19_1-upload-input" name="day19_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day19_1-run-btn" py-click="main_day19_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day19_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day19_1-upload-input')
            </script>
            <script type="py" src="day19/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day19_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day19_1="#day19_1-code" class="active tab code-title">day19_1.py</li>
         
        
    </ul>

    <div id="day19_1-code" data-tab-content-day19_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">97
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass      
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">operator</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Part</span>:
    x: <span style="color:#366">int</span>
    m: <span style="color:#366">int</span>
    a: <span style="color:#366">int</span>
    s: <span style="color:#366">int</span>
    status: <span style="color:#366">str</span> <span style="color:#555">=</span> <span style="color:#c30">&#34;InProgress&#34;</span>
    rule: <span style="color:#366">str</span> <span style="color:#555">=</span> <span style="color:#c30">&#34;in&#34;</span>

    pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;attribute&gt;[xmas])(?P&lt;op&gt;[&lt;&gt;])(?P&lt;num&gt;\d+)&#34;</span>

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">test_rule</span>(self, rule: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> <span style="color:#366">bool</span>:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(self<span style="color:#555">.</span>pattern, rule)

        <span style="color:#069;font-weight:bold">if</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;op&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;&lt;&#34;</span>: op <span style="color:#555">=</span> operator<span style="color:#555">.</span>lt
        <span style="color:#069;font-weight:bold">elif</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;op&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;&gt;&#34;</span>: op <span style="color:#555">=</span> operator<span style="color:#555">.</span>gt
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Op must be &lt; or &gt; not </span><span style="color:#a00">{</span>m<span style="color:#555">.</span>group(<span style="color:#c30">&#39;op&#39;</span>)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

        <span style="color:#069;font-weight:bold">return</span> op(<span style="color:#366">getattr</span>(self, m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;attribute&#34;</span>)), <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;num&#34;</span>)))
    
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">apply_flow</span>(self, flow: Iterable[<span style="color:#366">str</span>]):
        <span style="color:#09f;font-style:italic">#print(f&#34;{flow} to part {self}&#34;)</span>
        <span style="color:#069;font-weight:bold">for</span> rule <span style="color:#000;font-weight:bold">in</span> flow:
            <span style="color:#069;font-weight:bold">if</span> rule <span style="color:#555">==</span> <span style="color:#c30">&#34;A&#34;</span>:
                self<span style="color:#555">.</span>status <span style="color:#555">=</span> <span style="color:#c30">&#34;A&#34;</span>
                <span style="color:#069;font-weight:bold">return</span>
            <span style="color:#069;font-weight:bold">if</span> rule <span style="color:#555">==</span> <span style="color:#c30">&#34;R&#34;</span>:
                self<span style="color:#555">.</span>status <span style="color:#555">=</span> <span style="color:#c30">&#34;R&#34;</span>
                <span style="color:#069;font-weight:bold">return</span>
            
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#366">any</span>(char <span style="color:#000;font-weight:bold">in</span> rule <span style="color:#069;font-weight:bold">for</span> char <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#34;&lt;&#34;</span>, <span style="color:#c30">&#34;&gt;&#34;</span>)):
                <span style="color:#09f;font-style:italic">#print(f&#34;Jumping to new rule {rule}&#34;)</span>
                self<span style="color:#555">.</span>rule <span style="color:#555">=</span> rule
                <span style="color:#069;font-weight:bold">return</span>
            
            prep, new_rule <span style="color:#555">=</span> rule<span style="color:#555">.</span>split(<span style="color:#c30">&#34;:&#34;</span>)
            <span style="color:#069;font-weight:bold">if</span> self<span style="color:#555">.</span>test_rule(prep):
                self<span style="color:#555">.</span>rule <span style="color:#555">=</span> new_rule
                <span style="color:#069;font-weight:bold">if</span> self<span style="color:#555">.</span>rule <span style="color:#555">==</span> <span style="color:#c30">&#34;A&#34;</span>:
                    self<span style="color:#555">.</span>status <span style="color:#555">=</span> <span style="color:#c30">&#34;A&#34;</span>
                    <span style="color:#069;font-weight:bold">return</span>
                <span style="color:#069;font-weight:bold">if</span> self<span style="color:#555">.</span>rule <span style="color:#555">==</span> <span style="color:#c30">&#34;R&#34;</span>:
                    self<span style="color:#555">.</span>status <span style="color:#555">=</span> <span style="color:#c30">&#34;R&#34;</span>
                    <span style="color:#069;font-weight:bold">return</span>
                
                <span style="color:#09f;font-style:italic">#print(f&#34;Updated rule to {self.rule}&#34;)</span>
                <span style="color:#069;font-weight:bold">return</span>
        
        <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">BufferError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Should have found a way out of flow </span><span style="color:#a00">{</span>flow<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
        


<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day19_1</span>(<span style="color:#555">*</span>args):
    raw_flows, raw_parts <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day19_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#34;</span>)

    part_pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;\{x=(?P&lt;x&gt;\d+),m=(?P&lt;m&gt;\d+),a=(?P&lt;a&gt;\d+),s=(?P&lt;s&gt;\d+)\}&#34;</span>
    parts <span style="color:#555">=</span> []
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> raw_parts<span style="color:#555">.</span>split(<span style="color:#c30">&#39;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#39;</span>):
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(part_pattern, line)
        parts<span style="color:#555">.</span>append(Part(x<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;x&#34;</span>)), m<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;m&#34;</span>)), a<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;a&#34;</span>)), s<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;s&#34;</span>))))

    flow_pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;name&gt;[a-z]+)\{(?P&lt;rest&gt;.+)\}&#34;</span>
    flows <span style="color:#555">=</span> {}
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> raw_flows<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>):
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(flow_pattern, line)
        flows[m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;name&#34;</span>)] <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;rest&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;,&#34;</span>)

    <span style="color:#069;font-weight:bold">for</span> part <span style="color:#000;font-weight:bold">in</span> parts:
        <span style="color:#069;font-weight:bold">while</span> part<span style="color:#555">.</span>status <span style="color:#000;font-weight:bold">not</span> <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#34;A&#34;</span>, <span style="color:#c30">&#34;R&#34;</span>):
            <span style="color:#09f;font-style:italic">#print(f&#34;Applying &#39;{part.rule}&#39;&#34;, end = &#34;&#34;)</span>
            part<span style="color:#555">.</span>apply_flow(flows[part<span style="color:#555">.</span>rule])
        <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Part has status </span><span style="color:#a00">{</span>part<span style="color:#555">.</span>status<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

    result <span style="color:#555">=</span> <span style="color:#366">sum</span>(<span style="color:#366">sum</span>([p<span style="color:#555">.</span>x, p<span style="color:#555">.</span>m, p<span style="color:#555">.</span>a, p<span style="color:#555">.</span>s]) <span style="color:#069;font-weight:bold">for</span> p <span style="color:#000;font-weight:bold">in</span> parts <span style="color:#069;font-weight:bold">if</span> p<span style="color:#555">.</span>status <span style="color:#555">==</span> <span style="color:#c30">&#34;A&#34;</span>)
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day19_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day19_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday19_1 = document.querySelectorAll('[data-tab-target-day19_1]')
    const tabContentsday19_1 = document.querySelectorAll('[data-tab-content-day19_1]')

    tabsday19_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay19_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday19_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday19_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day19_2'>Day 19 (Part 2): Aplenty</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day19_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day19_2-upload-input" name="day19_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day19_2-run-btn" py-click="main_day19_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day19_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day19_2-upload-input')
            </script>
            <script type="py" src="day19/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day19_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day19_2="#day19_2-code" class="active tab code-title">day19_2.py</li>
         
        
    </ul>

    <div id="day19_2-code" data-tab-content-day19_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass      
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">math</span> <span style="color:#069;font-weight:bold">import</span> prod
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable, Self

<span style="color:#99f">@dataclass</span>
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">PartRange</span>:
    x_min: <span style="color:#366">int</span>
    x_max: <span style="color:#366">int</span>
    m_min: <span style="color:#366">int</span>
    m_max: <span style="color:#366">int</span>
    a_min: <span style="color:#366">int</span>
    a_max: <span style="color:#366">int</span>
    s_min: <span style="color:#366">int</span>
    s_max: <span style="color:#366">int</span>
    status: <span style="color:#366">str</span> <span style="color:#555">=</span> <span style="color:#c30">&#34;InProgress&#34;</span>
    rule: <span style="color:#366">str</span> <span style="color:#555">=</span> <span style="color:#c30">&#34;in&#34;</span>

    pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;attribute&gt;[xmas])(?P&lt;op&gt;[&lt;&gt;])(?P&lt;num&gt;\d+)&#34;</span>

    <span style="color:#99f">@staticmethod</span>
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">fromPartRange</span>(other, x_min<span style="color:#555">=</span><span style="color:#069;font-weight:bold">None</span>, x_max<span style="color:#555">=</span><span style="color:#069;font-weight:bold">None</span>, m_min <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>, m_max <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>, a_min <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>, a_max <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>, s_min <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>, s_max <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>, rule<span style="color:#555">=</span><span style="color:#069;font-weight:bold">None</span>):
        <span style="color:#069;font-weight:bold">return</span> PartRange(x_min<span style="color:#555">=</span>x_min <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>x_min, x_max<span style="color:#555">=</span>x_max <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>x_max,
                         m_min<span style="color:#555">=</span>m_min <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>m_min, m_max<span style="color:#555">=</span>m_max <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>m_max,
                         a_min<span style="color:#555">=</span>a_min <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>a_min, a_max<span style="color:#555">=</span>a_max <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>a_max,
                         s_min<span style="color:#555">=</span>s_min <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>s_min, s_max<span style="color:#555">=</span>s_max <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>s_max,
                         rule <span style="color:#555">=</span> rule <span style="color:#000;font-weight:bold">or</span> other<span style="color:#555">.</span>rule)

    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">count</span>(self):
        <span style="color:#069;font-weight:bold">return</span> prod([(self<span style="color:#555">.</span>x_max <span style="color:#555">-</span> self<span style="color:#555">.</span>x_min <span style="color:#555">+</span> <span style="color:#f60">1</span>),(self<span style="color:#555">.</span>m_max <span style="color:#555">-</span> self<span style="color:#555">.</span>m_min <span style="color:#555">+</span> <span style="color:#f60">1</span>),(self<span style="color:#555">.</span>a_max <span style="color:#555">-</span> self<span style="color:#555">.</span>a_min <span style="color:#555">+</span> <span style="color:#f60">1</span>),(self<span style="color:#555">.</span>s_max <span style="color:#555">-</span> self<span style="color:#555">.</span>s_min <span style="color:#555">+</span> <span style="color:#f60">1</span>)])
    
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">apply_flow</span>(self, flow: <span style="color:#366">str</span>) <span style="color:#555">-&gt;</span> Iterable[Self]:
        outgoing <span style="color:#555">=</span> []
        <span style="color:#069;font-weight:bold">for</span> rule <span style="color:#000;font-weight:bold">in</span> flow<span style="color:#555">.</span>split(<span style="color:#c30">&#34;,&#34;</span>):
            <span style="color:#069;font-weight:bold">if</span> rule <span style="color:#555">==</span> <span style="color:#c30">&#34;A&#34;</span>: 
                self<span style="color:#555">.</span>status <span style="color:#555">=</span> <span style="color:#c30">&#34;A&#34;</span>
                outgoing<span style="color:#555">.</span>append(self)
                <span style="color:#069;font-weight:bold">return</span> outgoing
            <span style="color:#069;font-weight:bold">if</span> rule <span style="color:#555">==</span> <span style="color:#c30">&#34;R&#34;</span>:
                self<span style="color:#555">.</span>status <span style="color:#555">=</span> <span style="color:#c30">&#34;R&#34;</span>
                <span style="color:#069;font-weight:bold">return</span> outgoing
        
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#366">any</span>(char <span style="color:#000;font-weight:bold">in</span> rule <span style="color:#069;font-weight:bold">for</span> char <span style="color:#000;font-weight:bold">in</span> (<span style="color:#c30">&#34;&lt;&#34;</span>, <span style="color:#c30">&#34;&gt;&#34;</span>)):
                self<span style="color:#555">.</span>rule <span style="color:#555">=</span> rule
                outgoing<span style="color:#555">.</span>append(self)
                <span style="color:#069;font-weight:bold">return</span> outgoing
            
            prep, new_rule <span style="color:#555">=</span> rule<span style="color:#555">.</span>split(<span style="color:#c30">&#34;:&#34;</span>)
            m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(self<span style="color:#555">.</span>pattern, prep)

            attr <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;attribute&#34;</span>)
            num <span style="color:#555">=</span> <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;num&#34;</span>))

            <span style="color:#069;font-weight:bold">if</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;op&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;&lt;&#34;</span>:
                <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">int</span>(<span style="color:#366">getattr</span>(self, attr<span style="color:#555">+</span><span style="color:#c30">&#34;_min&#34;</span>)) <span style="color:#555">&lt;=</span> num:
                    first_kwargs <span style="color:#555">=</span> {attr<span style="color:#555">+</span> <span style="color:#c30">&#34;_max&#34;</span>: num<span style="color:#555">-</span><span style="color:#f60">1</span>}
                    outgoing<span style="color:#555">.</span>append(self<span style="color:#555">.</span>fromPartRange(self, rule<span style="color:#555">=</span>new_rule, <span style="color:#555">**</span>first_kwargs))
                    <span style="color:#366">setattr</span>(self, attr<span style="color:#555">+</span><span style="color:#c30">&#34;_min&#34;</span>, num)
                    <span style="color:#069;font-weight:bold">continue</span>

            <span style="color:#069;font-weight:bold">elif</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;op&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;&gt;&#34;</span>:
                <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">int</span>(<span style="color:#366">getattr</span>(self, attr<span style="color:#555">+</span><span style="color:#c30">&#34;_max&#34;</span>)) <span style="color:#555">&gt;=</span> num:
                    first_kwargs <span style="color:#555">=</span> {attr<span style="color:#555">+</span> <span style="color:#c30">&#34;_min&#34;</span>: num<span style="color:#555">+</span><span style="color:#f60">1</span>}
                    outgoing<span style="color:#555">.</span>append(self<span style="color:#555">.</span>fromPartRange(self, rule<span style="color:#555">=</span>new_rule, <span style="color:#555">**</span>first_kwargs))
                    <span style="color:#366">setattr</span>(self, attr<span style="color:#555">+</span><span style="color:#c30">&#34;_max&#34;</span>, num)
                    <span style="color:#069;font-weight:bold">continue</span>

            <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Rule </span><span style="color:#a00">{</span>rule<span style="color:#a00">}</span><span style="color:#c30"> did not match anything&#34;</span>)                
      

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day19_2</span>(<span style="color:#555">*</span>args):
    raw_flows, raw_parts <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day19_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n\n</span><span style="color:#c30">&#34;</span>)

    flow_pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;name&gt;[a-z]+)\{(?P&lt;rest&gt;.+)\}&#34;</span>
    flows <span style="color:#555">=</span> {}
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> raw_flows<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>):
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(flow_pattern, line)
        flows[m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;name&#34;</span>)] <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;rest&#34;</span>)

    ranges <span style="color:#555">=</span> [PartRange(x_min<span style="color:#555">=</span><span style="color:#f60">1</span>, x_max<span style="color:#555">=</span><span style="color:#f60">4000</span>,m_min<span style="color:#555">=</span><span style="color:#f60">1</span>, m_max<span style="color:#555">=</span><span style="color:#f60">4000</span>,a_min<span style="color:#555">=</span><span style="color:#f60">1</span>, a_max<span style="color:#555">=</span><span style="color:#f60">4000</span>,s_min<span style="color:#555">=</span><span style="color:#f60">1</span>, s_max<span style="color:#555">=</span><span style="color:#f60">4000</span>)]

    accepted <span style="color:#555">=</span> []
    <span style="color:#069;font-weight:bold">while</span> ranges:
        r <span style="color:#555">=</span> ranges<span style="color:#555">.</span>pop()
        <span style="color:#069;font-weight:bold">if</span> r<span style="color:#555">.</span>status <span style="color:#555">==</span> <span style="color:#c30">&#34;A&#34;</span> <span style="color:#000;font-weight:bold">or</span> r<span style="color:#555">.</span>rule <span style="color:#555">==</span> <span style="color:#c30">&#34;A&#34;</span>:
            accepted<span style="color:#555">.</span>append(r)
        <span style="color:#069;font-weight:bold">elif</span> r<span style="color:#555">.</span>status <span style="color:#555">==</span> <span style="color:#c30">&#34;R&#34;</span> <span style="color:#000;font-weight:bold">or</span> r<span style="color:#555">.</span>rule <span style="color:#555">==</span> <span style="color:#c30">&#34;R&#34;</span>:
            <span style="color:#069;font-weight:bold">pass</span>
        <span style="color:#069;font-weight:bold">else</span>:
            ranges<span style="color:#555">.</span>extend(r<span style="color:#555">.</span>apply_flow(flows[r<span style="color:#555">.</span>rule]))

    <span style="color:#366">print</span>(<span style="color:#366">sum</span>(r<span style="color:#555">.</span>count() <span style="color:#069;font-weight:bold">for</span> r <span style="color:#000;font-weight:bold">in</span> accepted))

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day19_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day19_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday19_2 = document.querySelectorAll('[data-tab-target-day19_2]')
    const tabContentsday19_2 = document.querySelectorAll('[data-tab-content-day19_2]')

    tabsday19_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay19_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday19_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday19_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day20_1'>Day 20 (Part 1): Pulse Propagation</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day20_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day20_1-upload-input" name="day20_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day20_1-run-btn" py-click="main_day20_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day20_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day20_1-upload-input')
            </script>
            <script type="py" src="day20/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day20_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day20_1="#day20_1-code" class="active tab code-title">day20_1.py</li>
         
        
    </ul>

    <div id="day20_1-code" data-tab-content-day20_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">math</span> <span style="color:#069;font-weight:bold">import</span> prod
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">operator</span> <span style="color:#069;font-weight:bold">import</span> attrgetter
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable, Mapping    

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pulse</span> <span style="color:#069;font-weight:bold">import</span> pulse_list, Pulse, Level
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">module</span> <span style="color:#069;font-weight:bold">import</span> Broadcaster, FlipFlop, Conjunction, Dummy, Module

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">push_button</span>(modules: Mapping[<span style="color:#366">str</span>, Module]):
    <span style="color:#09f;font-style:italic">#button = Broadcaster([modules[&#39;broadcaster&#39;]])</span>
    pulse_list<span style="color:#555">.</span>append(Pulse(_from<span style="color:#555">=</span><span style="color:#c30">&#39;button&#39;</span>, to<span style="color:#555">=</span><span style="color:#c30">&#39;broadcaster&#39;</span>, level<span style="color:#555">=</span>Level<span style="color:#555">.</span>LO))
    
    <span style="color:#069;font-weight:bold">while</span>(pulse_list):
        p: Pulse <span style="color:#555">=</span> pulse_list<span style="color:#555">.</span>popleft()
        modules[p<span style="color:#555">.</span>to]<span style="color:#555">.</span>receive_pulse(p)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day20_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day20_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    modules: <span style="color:#366">dict</span>[<span style="color:#366">str</span>, Module] <span style="color:#555">=</span> {}
    pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;name&gt;((?P&lt;flag&gt;[%&amp;])(?P&lt;label&gt;[a-z]+))|broadcaster) -&gt; (?P&lt;destinations&gt;[a-z ,]+)&#34;</span>
    <span style="color:#09f;font-style:italic"># Build network</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(pattern, line)
        <span style="color:#09f;font-style:italic"># Handle case with dummy &#39;output&#39; destination</span>
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;output&#39;</span> <span style="color:#000;font-weight:bold">in</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;destinations&#34;</span>):
            modules[<span style="color:#c30">&#39;output&#39;</span>] <span style="color:#555">=</span> Broadcaster(label<span style="color:#555">=</span><span style="color:#c30">&#34;output&#34;</span>, destinations<span style="color:#555">=</span>[])

        <span style="color:#069;font-weight:bold">if</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;flag&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;%&#34;</span>:
            modules[m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>)] <span style="color:#555">=</span> FlipFlop(label<span style="color:#555">=</span>m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>))
        <span style="color:#069;font-weight:bold">elif</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;flag&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;&amp;&#34;</span>:
            modules[m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>)] <span style="color:#555">=</span> Conjunction(label<span style="color:#555">=</span>m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>))
        <span style="color:#069;font-weight:bold">elif</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;name&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;broadcaster&#34;</span>:
            modules[<span style="color:#c30">&#39;broadcaster&#39;</span>] <span style="color:#555">=</span> Broadcaster(label<span style="color:#555">=</span><span style="color:#c30">&#34;broadcaster&#34;</span>)
        <span style="color:#069;font-weight:bold">else</span>:
            <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Flag must be % or &amp; or name must be &#39;broadcaster&#39;; line was </span><span style="color:#a00">{</span>line<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
    
    <span style="color:#09f;font-style:italic"># Wire up modules</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(pattern, line)
        dests <span style="color:#555">=</span> [d<span style="color:#555">.</span>strip() <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;destinations&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;,&#34;</span>)]
        <span style="color:#069;font-weight:bold">if</span> (label<span style="color:#555">:=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>)): modules[label]<span style="color:#555">.</span>destinations <span style="color:#555">=</span> dests
        <span style="color:#069;font-weight:bold">elif</span> (name<span style="color:#555">:=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;name&#34;</span>)) <span style="color:#555">==</span> <span style="color:#c30">&#39;broadcaster&#39;</span>: modules[<span style="color:#c30">&#39;broadcaster&#39;</span>]<span style="color:#555">.</span>destinations <span style="color:#555">=</span> dests
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Line was not a valid label or &#39;broadcaster&#39;: </span><span style="color:#a00">{</span>line<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
        
        <span style="color:#09f;font-style:italic">#Set up conjunction module inputs</span>
        <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> dests:
            name <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>) <span style="color:#000;font-weight:bold">or</span> <span style="color:#c30">&#39;broadcaster&#39;</span>
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> d <span style="color:#000;font-weight:bold">in</span> modules: modules[d] <span style="color:#555">=</span> Dummy(label<span style="color:#555">=</span>name)
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">type</span>(modules[d]) <span style="color:#555">==</span> Conjunction: modules[d]<span style="color:#555">.</span>last_pulse[name] <span style="color:#555">=</span> Level<span style="color:#555">.</span>LO


    <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#f60">1000</span>):
        push_button(modules)

    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>pulse_list<span style="color:#555">.</span>count<span style="color:#a00">=}</span><span style="color:#c30">&#34;</span>)
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>prod(pulse_list<span style="color:#555">.</span>count<span style="color:#555">.</span>values())<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)

    

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day20_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day20_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday20_1 = document.querySelectorAll('[data-tab-target-day20_1]')
    const tabContentsday20_1 = document.querySelectorAll('[data-tab-content-day20_1]')

    tabsday20_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay20_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday20_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday20_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<!-- <h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day20_2'>Day 20 (Part 2): Pulse Propagation</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day20_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day20_2-upload-input" name="day20_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day20_2-run-btn" py-click="main_day20_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day20_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day20_2-upload-input')
            </script>
            <script type="py" src="day20/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day20_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day20_2="#day20_2-code" class="active tab code-title">day20_2.py</li>
         
        
    </ul>

    <div id="day20_2-code" data-tab-content-day20_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> count
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">math</span> <span style="color:#069;font-weight:bold">import</span> prod
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">operator</span> <span style="color:#069;font-weight:bold">import</span> attrgetter
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Iterable, Mapping    

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pulse</span> <span style="color:#069;font-weight:bold">import</span> pulse_list, Pulse, Level
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">module</span> <span style="color:#069;font-weight:bold">import</span> Broadcaster, FlipFlop, Conjunction, Dummy, Module, Counter

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">push_button_2</span>(modules: Mapping[<span style="color:#366">str</span>, Module]):
    <span style="color:#09f;font-style:italic">#button = Broadcaster([modules[&#39;broadcaster&#39;]])</span>
    pulse_list<span style="color:#555">.</span>append(Pulse(_from<span style="color:#555">=</span><span style="color:#c30">&#39;button&#39;</span>, to<span style="color:#555">=</span><span style="color:#c30">&#39;broadcaster&#39;</span>, level<span style="color:#555">=</span>Level<span style="color:#555">.</span>LO))
    
    <span style="color:#069;font-weight:bold">while</span>(pulse_list):
        p: Pulse <span style="color:#555">=</span> pulse_list<span style="color:#555">.</span>popleft()
        modules[p<span style="color:#555">.</span>to]<span style="color:#555">.</span>receive_pulse(p)


<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">hash_state</span>(modules: Mapping[<span style="color:#366">str</span>, Module]) <span style="color:#555">-&gt;</span> <span style="color:#366">str</span>:
    flops: Iterable[FlipFlop] <span style="color:#555">=</span> <span style="color:#366">sorted</span>((m <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> modules<span style="color:#555">.</span>values() <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">type</span>(m) <span style="color:#555">==</span> FlipFlop), key<span style="color:#555">=</span>attrgetter(<span style="color:#c30">&#39;label&#39;</span>))
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#c30">&#39;&#39;</span><span style="color:#555">.</span>join(f<span style="color:#555">.</span>label <span style="color:#555">+</span> (<span style="color:#c30">&#39;H&#39;</span> <span style="color:#069;font-weight:bold">if</span> f<span style="color:#555">.</span>state <span style="color:#555">==</span> Level<span style="color:#555">.</span>HI <span style="color:#069;font-weight:bold">else</span> <span style="color:#c30">&#39;L&#39;</span>) <span style="color:#069;font-weight:bold">for</span> f <span style="color:#000;font-weight:bold">in</span> flops)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">load_modules</span>(data: Iterable[<span style="color:#366">str</span>]) <span style="color:#555">-&gt;</span> <span style="color:#366">dict</span>[<span style="color:#366">str</span>, Module]:
    modules: <span style="color:#366">dict</span>[<span style="color:#366">str</span>, Module] <span style="color:#555">=</span> {}
    pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;(?P&lt;name&gt;((?P&lt;flag&gt;[%&amp;])(?P&lt;label&gt;[a-z]+))|broadcaster) -&gt; (?P&lt;destinations&gt;[a-z ,]+)&#34;</span>
    <span style="color:#09f;font-style:italic"># Build network</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(pattern, line)
        <span style="color:#09f;font-style:italic"># Handle case with dummy &#39;output&#39; destination</span>
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;output&#39;</span> <span style="color:#000;font-weight:bold">in</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;destinations&#34;</span>):
            modules[<span style="color:#c30">&#39;output&#39;</span>] <span style="color:#555">=</span> Broadcaster(label<span style="color:#555">=</span><span style="color:#c30">&#34;output&#34;</span>, destinations<span style="color:#555">=</span>[])

        <span style="color:#069;font-weight:bold">if</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;flag&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;%&#34;</span>:
            modules[m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>)] <span style="color:#555">=</span> FlipFlop(label<span style="color:#555">=</span>m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>))
        <span style="color:#069;font-weight:bold">elif</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;flag&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;&amp;&#34;</span>:
            modules[m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>)] <span style="color:#555">=</span> Conjunction(label<span style="color:#555">=</span>m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>))
        <span style="color:#069;font-weight:bold">elif</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;name&#34;</span>) <span style="color:#555">==</span> <span style="color:#c30">&#34;broadcaster&#34;</span>:
            modules[<span style="color:#c30">&#39;broadcaster&#39;</span>] <span style="color:#555">=</span> Broadcaster(label<span style="color:#555">=</span><span style="color:#c30">&#34;broadcaster&#34;</span>)
        <span style="color:#069;font-weight:bold">else</span>:
            <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Flag must be % or &amp; or name must be &#39;broadcaster&#39;; line was </span><span style="color:#a00">{</span>line<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
    
    <span style="color:#09f;font-style:italic"># Wire up modules</span>
    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(pattern, line)
        dests <span style="color:#555">=</span> [d<span style="color:#555">.</span>strip() <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;destinations&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;,&#34;</span>)]
        <span style="color:#069;font-weight:bold">if</span> (label<span style="color:#555">:=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>)): modules[label]<span style="color:#555">.</span>destinations <span style="color:#555">=</span> dests
        <span style="color:#069;font-weight:bold">elif</span> (name<span style="color:#555">:=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;name&#34;</span>)) <span style="color:#555">==</span> <span style="color:#c30">&#39;broadcaster&#39;</span>: modules[<span style="color:#c30">&#39;broadcaster&#39;</span>]<span style="color:#555">.</span>destinations <span style="color:#555">=</span> dests
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Line was not a valid label or &#39;broadcaster&#39;: </span><span style="color:#a00">{</span>line<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
         
        <span style="color:#09f;font-style:italic">#Set up conjunction module inputs</span>
        <span style="color:#069;font-weight:bold">for</span> d <span style="color:#000;font-weight:bold">in</span> dests:
            name <span style="color:#555">=</span> m<span style="color:#555">.</span>group(<span style="color:#c30">&#34;label&#34;</span>) <span style="color:#000;font-weight:bold">or</span> <span style="color:#c30">&#39;broadcaster&#39;</span>
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> d <span style="color:#000;font-weight:bold">in</span> modules: modules[d] <span style="color:#555">=</span> Counter(label<span style="color:#555">=</span>name)
            <span style="color:#069;font-weight:bold">if</span> <span style="color:#366">type</span>(modules[d]) <span style="color:#555">==</span> Conjunction: modules[d]<span style="color:#555">.</span>last_pulse[name] <span style="color:#555">=</span> Level<span style="color:#555">.</span>LO
        
    <span style="color:#069;font-weight:bold">return</span> modules

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day20_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day20_2&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    modules <span style="color:#555">=</span> load_modules(data)
    
    <span style="color:#069;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> count():
        push_button_2(modules)
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> i <span style="color:#555">%</span> <span style="color:#f60">10_000</span>: <span style="color:#366">print</span>(i)
        <span style="color:#069;font-weight:bold">if</span> modules[<span style="color:#c30">&#39;rx&#39;</span>]<span style="color:#555">.</span>count <span style="color:#555">==</span> <span style="color:#f60">1</span>:
            <span style="color:#069;font-weight:bold">break</span> 
        modules[<span style="color:#c30">&#39;rx&#39;</span>]<span style="color:#555">.</span>count <span style="color:#555">=</span> <span style="color:#f60">0</span>
        
    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>i<span style="color:#a00">=}</span><span style="color:#c30">&#34;</span>) 

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day20_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules <span style="color:#000;font-weight:bold">and</span> __name__ <span style="color:#555">==</span> <span style="color:#c30">&#34;__main__&#34;</span>:
    main_day20_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday20_2 = document.querySelectorAll('[data-tab-target-day20_2]')
    const tabContentsday20_2 = document.querySelectorAll('[data-tab-content-day20_2]')

    tabsday20_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay20_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday20_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday20_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script> -->

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day21_1'>Day 21 (Part 1): Step Counter</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day21_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day21_1-upload-input" name="day21_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day21_1-run-btn" py-click="main_day21_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day21_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day21_1-upload-input')
            </script>
            <script type="py" src="day21/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day21_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day21_1="#day21_1-code" class="active tab code-title">day21_1.py</li>
         
        
    </ul>

    <div id="day21_1-code" data-tab-content-day21_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day21_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day21_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    empties <span style="color:#555">=</span> <span style="color:#366">set</span>((line_index, char_index) <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">for</span> char_index, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line) <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#34;.&#34;</span> <span style="color:#000;font-weight:bold">or</span> char <span style="color:#555">==</span> <span style="color:#c30">&#34;S&#34;</span>)
    steps <span style="color:#555">=</span> <span style="color:#366">set</span>([(line_index, char_index) <span style="color:#069;font-weight:bold">for</span> line_index, line <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(data) <span style="color:#069;font-weight:bold">for</span> char_index, char <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(line) <span style="color:#069;font-weight:bold">if</span> char <span style="color:#555">==</span> <span style="color:#c30">&#39;S&#39;</span>])
    width <span style="color:#555">=</span> <span style="color:#366">len</span>(data[<span style="color:#f60">0</span>])
    height <span style="color:#555">=</span> <span style="color:#366">len</span>(data)
    
    <span style="color:#069;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(<span style="color:#f60">64</span>):
        new_steps <span style="color:#555">=</span> <span style="color:#366">set</span>()
        <span style="color:#069;font-weight:bold">for</span> step <span style="color:#000;font-weight:bold">in</span> steps:
            new_steps <span style="color:#555">|=</span> <span style="color:#366">set</span>([(step[<span style="color:#f60">0</span>]<span style="color:#555">+</span><span style="color:#f60">1</span>, step[<span style="color:#f60">1</span>]),
                             (step[<span style="color:#f60">0</span>]<span style="color:#555">-</span><span style="color:#f60">1</span>, step[<span style="color:#f60">1</span>]),
                             (step[<span style="color:#f60">0</span>], step[<span style="color:#f60">1</span>]<span style="color:#555">+</span><span style="color:#f60">1</span>), 
                             (step[<span style="color:#f60">0</span>], step[<span style="color:#f60">1</span>]<span style="color:#555">-</span><span style="color:#f60">1</span>)])
        steps <span style="color:#555">=</span> new_steps <span style="color:#555">&amp;</span>empties  

    <span style="color:#366">print</span>(steps)

    result <span style="color:#555">=</span> <span style="color:#366">len</span>(steps)

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day21_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day21_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday21_1 = document.querySelectorAll('[data-tab-target-day21_1]')
    const tabContentsday21_1 = document.querySelectorAll('[data-tab-content-day21_1]')

    tabsday21_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay21_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday21_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday21_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<!-- <h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day21_2'>Day 21 (Part 2): Step Counter</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day21_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day21_2-upload-input" name="day21_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day21_2-run-btn" py-click="main_day21_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day21_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day21_2-upload-input')
            </script>
            <script type="py" src="day21/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day21_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day21_2="#day21_2-code" class="active tab code-title">day21_2.py</li>
         
        
    </ul>

    <div id="day21_2-code" data-tab-content-day21_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input_test.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day21_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day21_2&#34;</span>)

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day21_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day21_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday21_2 = document.querySelectorAll('[data-tab-target-day21_2]')
    const tabContentsday21_2 = document.querySelectorAll('[data-tab-content-day21_2]')

    tabsday21_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay21_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday21_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday21_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script> -->

<!-- <h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day22_1'>Day 22 (Part 1): Sand Slabs</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day22_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day22_1-upload-input" name="day22_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day22_1-run-btn" py-click="main_day22_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day22_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day22_1-upload-input')
            </script>
            <script type="py" src="day22/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day22_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day22_1="#day22_1-code" class="active tab code-title">day22_1.py</li>
         
        
    </ul>

    <div id="day22_1-code" data-tab-content-day22_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input_test.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass, field
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">collections</span> <span style="color:#069;font-weight:bold">import</span> namedtuple
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> permutations
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">typing</span> <span style="color:#069;font-weight:bold">import</span> Self

Point <span style="color:#555">=</span> namedtuple(<span style="color:#c30">&#34;Point&#34;</span>, [<span style="color:#c30">&#39;x&#39;</span>, <span style="color:#c30">&#39;y&#39;</span>, <span style="color:#c30">&#39;z&#39;</span>])

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">point_under</span>(p: Point) <span style="color:#555">-&gt;</span> Point:
    <span style="color:#069;font-weight:bold">return</span> Point(p<span style="color:#555">.</span>x, p<span style="color:#555">.</span>y, p<span style="color:#555">.</span>z <span style="color:#555">-</span><span style="color:#f60">1</span>)

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">point_above</span>(p:Point) <span style="color:#555">-&gt;</span> Point:
    <span style="color:#069;font-weight:bold">return</span> Point(p<span style="color:#555">.</span>x, p<span style="color:#555">.</span>y, p<span style="color:#555">.</span>z<span style="color:#555">+</span><span style="color:#f60">1</span>)

<span style="color:#99f">@dataclass</span>(slots<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>)
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Brick</span>:
    cells: <span style="color:#366">set</span>[Point]
    vertical: <span style="color:#366">bool</span> <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
    supported_by: <span style="color:#366">list</span>[Self] <span style="color:#555">=</span> field(default_factory<span style="color:#555">=</span><span style="color:#366">list</span>)
    
    <span style="color:#99f">@property</span>
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">footprint</span>(self) <span style="color:#555">-&gt;</span> <span style="color:#366">set</span>[Point]:
        <span style="color:#069;font-weight:bold">if</span> self<span style="color:#555">.</span>vertical:
            cell <span style="color:#555">=</span> <span style="color:#366">next</span>(<span style="color:#366">iter</span>(self<span style="color:#555">.</span>cells))
            x <span style="color:#555">=</span> cell<span style="color:#555">.</span>x
            y <span style="color:#555">=</span> cell<span style="color:#555">.</span>y
            z <span style="color:#555">=</span> <span style="color:#366">min</span>(p<span style="color:#555">.</span>z <span style="color:#069;font-weight:bold">for</span> p <span style="color:#000;font-weight:bold">in</span> self<span style="color:#555">.</span>cells)
            <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">set</span>([Point(x, y, z)])
        <span style="color:#069;font-weight:bold">return</span> self<span style="color:#555">.</span>cells <span style="color:#09f;font-style:italic"># If not vertical, footprint is self</span>
    

bricks: <span style="color:#366">list</span>[Brick] <span style="color:#555">=</span> <span style="color:#366">list</span>()

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">brick_in</span>(loc: <span style="color:#366">tuple</span>[<span style="color:#366">int</span>, <span style="color:#366">int</span>, <span style="color:#366">int</span>], bricks: <span style="color:#366">set</span>[Brick]) <span style="color:#555">-&gt;</span> Brick <span style="color:#555">|</span> <span style="color:#069;font-weight:bold">None</span>:
    <span style="color:#069;font-weight:bold">if</span> (length<span style="color:#555">:=</span> <span style="color:#366">len</span>(matches<span style="color:#555">:=</span> [b <span style="color:#069;font-weight:bold">for</span> b <span style="color:#000;font-weight:bold">in</span> bricks <span style="color:#069;font-weight:bold">if</span> loc <span style="color:#000;font-weight:bold">in</span> b<span style="color:#555">.</span>cells])) <span style="color:#555">==</span> <span style="color:#f60">1</span>: <span style="color:#069;font-weight:bold">return</span> matches[<span style="color:#f60">0</span>]
    <span style="color:#069;font-weight:bold">if</span> length <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>: <span style="color:#069;font-weight:bold">raise</span> <span style="color:#c00;font-weight:bold">ValueError</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Detected more than one brick in cell </span><span style="color:#a00">{</span>loc<span style="color:#a00">}</span><span style="color:#c30">: </span><span style="color:#a00">{</span>matches<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#069;font-weight:bold">None</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day22_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day22_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data:
        m <span style="color:#555">=</span> re<span style="color:#555">.</span>match(<span style="color:#c30">r</span><span style="color:#c30">&#34;(\d+),(\d+),(\d+)~(\d+),(\d+),(\d+)&#34;</span>, line)
        x1, x2 <span style="color:#555">=</span> <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">1</span>)), <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">4</span>))
        x1, x2 <span style="color:#555">=</span> <span style="color:#366">min</span>(x1, x2), <span style="color:#366">max</span>(x1, x2)
        y1, y2 <span style="color:#555">=</span> <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">2</span>)), <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">5</span>))
        y1, y2 <span style="color:#555">=</span> <span style="color:#366">min</span>(y1, y2), <span style="color:#366">max</span>(y1, y2)
        z1, z2 <span style="color:#555">=</span> <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">3</span>)), <span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">6</span>))
        z1, z2 <span style="color:#555">=</span> <span style="color:#366">min</span>(z1, z2), <span style="color:#366">max</span>(z1, z2)
        <span style="color:#069;font-weight:bold">if</span> x1 <span style="color:#555">!=</span> x2: <span style="color:#09f;font-style:italic"># Along X direction</span>
            bricks<span style="color:#555">.</span>append(Brick(<span style="color:#366">set</span>(Point(x, y1, z1) <span style="color:#069;font-weight:bold">for</span> x <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(x1, x2<span style="color:#555">+</span><span style="color:#f60">1</span>))))
        <span style="color:#069;font-weight:bold">elif</span> m<span style="color:#555">.</span>group(<span style="color:#f60">2</span>) <span style="color:#555">!=</span> m<span style="color:#555">.</span>group(<span style="color:#f60">5</span>): <span style="color:#09f;font-style:italic"># Along y direction</span>
            bricks<span style="color:#555">.</span>append(Brick(<span style="color:#366">set</span>(Point(x1, y, z1) <span style="color:#069;font-weight:bold">for</span> y <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(y1, y2<span style="color:#555">+</span><span style="color:#f60">1</span>))))
        <span style="color:#069;font-weight:bold">elif</span> m<span style="color:#555">.</span>group(<span style="color:#f60">3</span>) <span style="color:#555">!=</span> m<span style="color:#555">.</span>group(<span style="color:#f60">6</span>): <span style="color:#09f;font-style:italic"># Along z direction</span>
            bricks<span style="color:#555">.</span>append(Brick(<span style="color:#366">set</span>(Point(x1, y1, z) <span style="color:#069;font-weight:bold">for</span> z <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">range</span>(z1, z2<span style="color:#555">+</span><span style="color:#f60">1</span>)), vertical<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>))
            
        <span style="color:#069;font-weight:bold">else</span>:
            bricks<span style="color:#555">.</span>append(Brick(<span style="color:#366">set</span>([Point(x1, y1, z1),])))

    <span style="color:#366">print</span>(<span style="color:#c30">&#34;Bricks created&#34;</span>)

    <span style="color:#09f;font-style:italic"># Let bricks fall down</span>
    anything_moved <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>
    <span style="color:#069;font-weight:bold">while</span> anything_moved:
        anything_moved <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
        <span style="color:#069;font-weight:bold">for</span> index, b <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(bricks):
            stationary <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
            <span style="color:#069;font-weight:bold">for</span> cell <span style="color:#000;font-weight:bold">in</span> b<span style="color:#555">.</span>footprint:
                <span style="color:#069;font-weight:bold">if</span> cell<span style="color:#555">.</span>z <span style="color:#555">==</span> <span style="color:#f60">1</span>: <span style="color:#09f;font-style:italic"># on ground</span>
                    stationary <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>; <span style="color:#069;font-weight:bold">break</span>
                <span style="color:#069;font-weight:bold">if</span> x<span style="color:#555">:=</span> brick_in(point_under(cell), bricks): <span style="color:#09f;font-style:italic"># space underneath is occupied</span>
                    stationary <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>; <span style="color:#069;font-weight:bold">break</span>

            <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> stationary:
                bricks[index] <span style="color:#555">=</span> Brick(<span style="color:#366">set</span>(Point(c<span style="color:#555">.</span>x, c<span style="color:#555">.</span>y, c<span style="color:#555">.</span>z<span style="color:#555">-</span><span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> b<span style="color:#555">.</span>cells), vertical<span style="color:#555">=</span>b<span style="color:#555">.</span>vertical)
                anything_moved <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>

    <span style="color:#366">print</span>(<span style="color:#c30">&#34;Bricks have fallen&#34;</span>)

    <span style="color:#09f;font-style:italic">#calculate supporting bricks for all bricks</span>
    <span style="color:#069;font-weight:bold">for</span> b <span style="color:#000;font-weight:bold">in</span> bricks:
        b<span style="color:#555">.</span>supported_by <span style="color:#555">=</span> [brick_in(point_under(c), bricks) <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> b<span style="color:#555">.</span>footprint <span style="color:#069;font-weight:bold">if</span> brick_in(point_under(c), bricks) <span style="color:#000;font-weight:bold">is</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#069;font-weight:bold">None</span>]

    <span style="color:#069;font-weight:bold">for</span> index, b <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(bricks):
        <span style="color:#069;font-weight:bold">if</span> b<span style="color:#555">.</span>supported_by:
            <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Brick </span><span style="color:#a00">{</span>index<span style="color:#a00">}</span><span style="color:#c30"> is supported by bricks </span><span style="color:#a00">{</span><span style="color:#c30">&#39;,&#39;</span><span style="color:#555">.</span>join(<span style="color:#366">str</span>(bricks<span style="color:#555">.</span>index(c)) <span style="color:#069;font-weight:bold">for</span> c <span style="color:#000;font-weight:bold">in</span> b<span style="color:#555">.</span>supported_by)<span style="color:#a00">}</span><span style="color:#c30">&#34;</span>)
        <span style="color:#069;font-weight:bold">else</span>: <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;Brick </span><span style="color:#a00">{</span>index<span style="color:#a00">}</span><span style="color:#c30"> is not supported by any other bricks&#34;</span>)
    

    removable_bricks <span style="color:#555">=</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">for</span> a_index, a <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">enumerate</span>(bricks):
        a_removable <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>
        <span style="color:#069;font-weight:bold">for</span> b <span style="color:#000;font-weight:bold">in</span> bricks:
            <span style="color:#069;font-weight:bold">if</span> a <span style="color:#555">==</span> b: <span style="color:#069;font-weight:bold">continue</span>
            <span style="color:#069;font-weight:bold">if</span> b<span style="color:#555">.</span>supported_by <span style="color:#000;font-weight:bold">and</span> a <span style="color:#000;font-weight:bold">in</span> b<span style="color:#555">.</span>supported_by <span style="color:#000;font-weight:bold">and</span> <span style="color:#366">len</span>(b<span style="color:#555">.</span>supported_by) <span style="color:#555">==</span> <span style="color:#f60">1</span>:
                a_removable <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
                <span style="color:#069;font-weight:bold">break</span>
        <span style="color:#069;font-weight:bold">if</span> a_removable: 
            removable_bricks <span style="color:#555">+=</span> <span style="color:#f60">1</span>

        

    <span style="color:#366">print</span>(<span style="color:#c30">f</span><span style="color:#c30">&#34;</span><span style="color:#a00">{</span>(removable_bricks)<span style="color:#a00">=}</span><span style="color:#c30">&#34;</span>)
    <span style="color:#09f;font-style:italic">#711 was too high</span>
        

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day22_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day22_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday22_1 = document.querySelectorAll('[data-tab-target-day22_1]')
    const tabContentsday22_1 = document.querySelectorAll('[data-tab-content-day22_1]')

    tabsday22_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay22_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday22_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday22_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day22_2'>Day 22 (Part 2): Sand Slabs</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day22_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day22_2-upload-input" name="day22_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day22_2-run-btn" py-click="main_day22_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day22_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day22_2-upload-input')
            </script>
            <script type="py" src="day22/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day22_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day22_2="#day22_2-code" class="active tab code-title">day22_2.py</li>
         
        
    </ul>

    <div id="day22_2-code" data-tab-content-day22_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input_test.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)
                
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day22_2</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day22_2&#34;</span>)

    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day22_2-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day22_2()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday22_2 = document.querySelectorAll('[data-tab-target-day22_2]')
    const tabContentsday22_2 = document.querySelectorAll('[data-tab-content-day22_2]')

    tabsday22_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay22_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday22_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday22_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script> -->

<h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day24_1'>Day 24 (Part 1): Never Tell Me The Odds</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day24_1-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day24_1-upload-input" name="day24_1-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day24_1-run-btn" py-click="main_day24_1">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day24_1-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day24_1-upload-input')
            </script>
            <script type="py" src="day24/main_1.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day24_1-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day24_1="#day24_1-code" class="active tab code-title">day24_1.py</li>
         
        
    </ul>

    <div id="day24_1-code" data-tab-content-day24_1 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">itertools</span> <span style="color:#069;font-weight:bold">import</span> combinations
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#99f">@dataclass</span>(frozen<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>, slots<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>)
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Stone</span>:
    x: <span style="color:#366">int</span>
    y: <span style="color:#366">int</span>
    z: <span style="color:#366">int</span>
    vx: <span style="color:#366">int</span>
    vy: <span style="color:#366">int</span>
    vz: <span style="color:#366">int</span>
    slope_2d:<span style="color:#366">int</span> <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">sign</span>(x):
    <span style="color:#069;font-weight:bold">if</span> x <span style="color:#555">==</span> <span style="color:#f60">0</span>: <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">abs</span>(x)<span style="color:#555">/</span>x

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day24_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day24_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;(-?\d+),\s+(-?\d+),\s+(-?\d+) @\s+(-?\d+),\s+(-?\d+),\s+(-?\d+)&#34;</span>

    stone_data <span style="color:#555">=</span> (re<span style="color:#555">.</span>match(pattern, line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data)
    stones <span style="color:#555">=</span> [Stone(x<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">1</span>)),
                    y<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">2</span>)),
                    z<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">3</span>)),
                    vx<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">4</span>)),
                    vy<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">5</span>)),
                    vz<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">6</span>)),
                    slope_2d<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">5</span>))<span style="color:#555">/</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">4</span>)))
                    <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> stone_data]
    
    count <span style="color:#555">=</span> <span style="color:#f60">0</span>
    bounds <span style="color:#555">=</span> (<span style="color:#f60">200000000000000</span>, <span style="color:#f60">400000000000000</span>)
    <span style="color:#069;font-weight:bold">for</span> a, b <span style="color:#000;font-weight:bold">in</span> combinations(stones, <span style="color:#f60">2</span>):
        <span style="color:#069;font-weight:bold">if</span> a<span style="color:#555">.</span>slope_2d <span style="color:#555">==</span> b<span style="color:#555">.</span>slope_2d: <span style="color:#069;font-weight:bold">continue</span> <span style="color:#09f;font-style:italic"># parallel</span>
        x_cross <span style="color:#555">=</span> (a<span style="color:#555">.</span>slope_2d <span style="color:#555">*</span> a<span style="color:#555">.</span>x <span style="color:#555">-</span> b<span style="color:#555">.</span>slope_2d <span style="color:#555">*</span> b<span style="color:#555">.</span>x <span style="color:#555">-</span> a<span style="color:#555">.</span>y <span style="color:#555">+</span> b<span style="color:#555">.</span>y) <span style="color:#555">/</span> (a<span style="color:#555">.</span>slope_2d <span style="color:#555">-</span> b<span style="color:#555">.</span>slope_2d)
        y_cross <span style="color:#555">=</span> a<span style="color:#555">.</span>slope_2d <span style="color:#555">*</span> (x_cross <span style="color:#555">-</span> a<span style="color:#555">.</span>x) <span style="color:#555">+</span> a<span style="color:#555">.</span>y
        <span style="color:#069;font-weight:bold">if</span> bounds[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> x_cross <span style="color:#555">&lt;=</span> bounds[<span style="color:#f60">1</span>] <span style="color:#000;font-weight:bold">and</span> bounds[<span style="color:#f60">0</span>] <span style="color:#555">&lt;=</span> y_cross <span style="color:#555">&lt;=</span> bounds[<span style="color:#f60">1</span>] <span style="color:#000;font-weight:bold">and</span> \
            sign(x_cross <span style="color:#555">-</span> a<span style="color:#555">.</span>x) <span style="color:#555">==</span> sign(a<span style="color:#555">.</span>vx) <span style="color:#000;font-weight:bold">and</span> sign(x_cross <span style="color:#555">-</span> b<span style="color:#555">.</span>x) <span style="color:#555">==</span> sign(b<span style="color:#555">.</span>vx):
            count <span style="color:#555">+=</span> <span style="color:#f60">1</span>

    display(count, target<span style="color:#555">=</span><span style="color:#c30">&#34;day24_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day24_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday24_1 = document.querySelectorAll('[data-tab-target-day24_1]')
    const tabContentsday24_1 = document.querySelectorAll('[data-tab-content-day24_1]')

    tabsday24_1.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay24_1
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday24_1.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday24_1.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script>

<!-- <h2 class="mt-12 mb-1 border-b-2 border-gray-200 post-h2" id='day24_2'>Day 24 (Part 2): Never Tell Me The Odds</h2>
<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-4">
    <div>
        
<p class="post-p"><span class="italic">A description for this part of the day's problem is coming soon.</span></p>

    </div>
    <div>
        <div class="load-pyscript"></div>
        <div class="hidden live-example">
            <div class="grid grid-cols-1 p-2 space-y-2 border-2 border-blue-200 rounded-xl">
                <div>
                    <p class="text-sm font-gray-700">Paste Input Here:</p>
                    <textarea class="w-full border-2 border-gray-500" id="day24_2-textinput"></textarea>
                </div>
                <div>
                    <p class="text-sm font-gray-700">Or upload file:</p>
                    <input class="w-full" type="file" id="day24_2-upload-input" name="day24_2-upload">
                </div>
                
                
                <div class="col-span-1"><button class="w-full py-2 run-pyscript-button" id="day24_2-run-btn" py-click="main_day24_2">RUN</button></div>
                
                <div class="font-mono bg-gray-200" id="day24_2-output"></div>
            </div>
            <script type="py">
                from utils import attach_upload_listener
                attach_upload_listener('day24_2-upload-input')
            </script>
            <script type="py" src="day24/main_2.py"></script> 
        </div>
    </div>
    <div class="w-full md:col-span-2"id="day24_2-viz"></div>

    
    
     
    <ul class="tabs md:col-span-2">
        <li data-tab-target-day24_2="#day24_2-code" class="active tab code-title">day24_2.py</li>
         
        
    </ul>

    <div id="day24_2-code" data-tab-content-day24_2 class="active tab-content md:col-span-2">
        <div class="overflow-y-scroll border-4 max-h-76"><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#069;font-weight:bold">try</span>:
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">pyscript</span> <span style="color:#069;font-weight:bold">import</span> document
    <span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">utils</span> <span style="color:#069;font-weight:bold">import</span> get_input
<span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">ImportError</span>:
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">get_input</span>(<span style="color:#555">*</span>args):
        <span style="color:#069;font-weight:bold">with</span> <span style="color:#366">open</span>(<span style="color:#c30">&#34;input.txt&#34;</span>) <span style="color:#069;font-weight:bold">as</span> f:
            <span style="color:#069;font-weight:bold">return</span> f<span style="color:#555">.</span>read()
        
    <span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">display</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs):
        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;target&#39;</span> <span style="color:#000;font-weight:bold">in</span> kwargs:
            kwargs<span style="color:#555">.</span>pop(<span style="color:#c30">&#39;target&#39;</span>)
        <span style="color:#366">print</span>(<span style="color:#555">*</span>args, <span style="color:#555">**</span>kwargs)

<span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">dataclasses</span> <span style="color:#069;font-weight:bold">import</span> dataclass
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">re</span>
<span style="color:#069;font-weight:bold">import</span> <span style="color:#0cf;font-weight:bold">sys</span>

<span style="color:#99f">@dataclass</span>(frozen<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>, slots<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>)
<span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Stone</span>:
    x: <span style="color:#366">int</span>
    y: <span style="color:#366">int</span>
    z: <span style="color:#366">int</span>
    vx: <span style="color:#366">int</span>
    vy: <span style="color:#366">int</span>
    vz: <span style="color:#366">int</span>
    slope_2d:<span style="color:#366">int</span> <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>

<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">sign</span>(x):
    <span style="color:#069;font-weight:bold">if</span> x <span style="color:#555">==</span> <span style="color:#f60">0</span>: <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>
    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">abs</span>(x)<span style="color:#555">/</span>x

pattern <span style="color:#555">=</span> <span style="color:#c30">r</span><span style="color:#c30">&#34;(-?\d+),\s+(-?\d+),\s+(-?\d+) @\s+(-?\d+),\s+(-?\d+),\s+(-?\d+)&#34;</span>
<span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">main_day24_1</span>(<span style="color:#555">*</span>args):
    data <span style="color:#555">=</span> get_input(<span style="color:#c30">&#34;day24_1&#34;</span>)<span style="color:#555">.</span>split(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>)

    stone_data <span style="color:#555">=</span> (re<span style="color:#555">.</span>match(pattern, line) <span style="color:#069;font-weight:bold">for</span> line <span style="color:#000;font-weight:bold">in</span> data)
    stones <span style="color:#555">=</span> [Stone(x<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">1</span>)),
                    y<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">2</span>)),
                    z<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">3</span>)),
                    vx<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">4</span>)),
                    vy<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">5</span>)),
                    vz<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">6</span>)),
                    slope_2d<span style="color:#555">=</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">5</span>))<span style="color:#555">/</span><span style="color:#366">int</span>(m<span style="color:#555">.</span>group(<span style="color:#f60">4</span>)))
                    <span style="color:#069;font-weight:bold">for</span> m <span style="color:#000;font-weight:bold">in</span> stone_data]
    
    <span style="color:#09f;font-style:italic"># If N is the number of hailstones, we will solve for N+6 Independent</span>
    <span style="color:#09f;font-style:italic"># Variables - x, y, z, vx, vy, vz for the thrown projectile, </span>
    <span style="color:#09f;font-style:italic"># and the N intercept times</span>

    

    
    result <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>

    display(result, target<span style="color:#555">=</span><span style="color:#c30">&#34;day24_1-output&#34;</span>)

<span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> <span style="color:#c30">&#39;js&#39;</span> <span style="color:#000;font-weight:bold">in</span> sys<span style="color:#555">.</span>modules:
    main_day24_1()
</code></pre></td></tr></table>
</div>
</div></div>
         <div class="text-sm post-img-caption">Scroll to see complete code</div> 
    </div>

     

    

    

</div>
<script>
    const tabsday24_2 = document.querySelectorAll('[data-tab-target-day24_2]')
    const tabContentsday24_2 = document.querySelectorAll('[data-tab-content-day24_2]')

    tabsday24_2.forEach(tab => {
        console.log(tab)
        tab.addEventListener('click', () => {
            let selector = tab.dataset.tabTargetDay24_2
            console.log(`Activating element with selector ${selector}`)
            const target = document.querySelector(selector)
            if (target !== null){
                tabContentsday24_2.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabsday24_2.forEach(tab => {
                    tab.classList.remove('active')
                })
                tab.classList.add('active')
                target.classList.add('active')
            }
            else {
                console.warn(`No element found with selector ${selector}`)
            }
        })
    })
</script> -->

<!--NEW_DAYS_ABOVE_THIS_LINE-->

<py-config style="display:none">
    packages=['rich']
    [js_modules.main]
    "https://cdn.jsdelivr.net/npm/xterm@5.3.0/+esm" = 'xterm'
    "https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" = 'xterm'
    [files] 
    "./utils.py" = "./utils.py"
</py-config>

<style>
    /* Code tags not in highlight blocks */
    code:not(.nocode):not(.language-python){
        --tw-text-opacity: 1; 
        color: rgba(5, 120, 85, var(--tw-text-opacity));
    }
</style>


<script>    
    //Create Load PyScript buttons:
    document.addEventListener('DOMContentLoaded', () => {
        btn_locations = document.getElementsByClassName('load-pyscript')
        Array.from(btn_locations).forEach(div => {
            div.classList.add('my-2', 'md:mx-4', 'border-2', 'border-blue-200', 'p-2', 'grid', 'grid-cols-1', 'rounded-xl', 'flex', 'flex-row', 'justify-center', 'w-auto', "py-1", 'h-auto', 'md:h-full')
            let p = document.createElement('p')
            p.classList.add('my-auto', 'mr-4', 'italic', 'want-to-run-text')
            p.innerHTML = "Want to run these examples live in your browser?"
            if (div.classList.contains("viz")){
                p.innerHTML += ' <p class="font-semibold text-green-600">This example includes a visualization.</p>'
            }
            div.appendChild(p)
            //button
            let btn = document.createElement('button')
            btn.innerText = "Load PyScript"
            btn.classList.add('load-pyscript-button', 'h-12')
            btn.onclick = loadPyScript
            div.appendChild(btn)
        });
    })

    /* Make Table of Contents */
    document.addEventListener('DOMContentLoaded', () => {
        headings = document.getElementsByClassName('post-h2')
        tocContents = document.getElementById('toc-contents')
        Array.from(headings).forEach(header => {
            //<p><a class = "text-gray-500" href="#day1">Day 1</a></p>
            const line = document.createElement('p')
            const link = document.createElement('a')
            link.href = `#${header.id}`
            link.innerText = header.innerText
            line.appendChild(link)
            if (document.getElementById(`${header.id}-viz-btn`) !== null){
                const viztag = document.createElement("span")
                viztag.innerText = " - Includes Visualization"
                line.appendChild(viztag)
            }
            tocContents.appendChild(line)
        })
    })

    function loadPyScript() {     
        delete loadPyScript //only run this function once

        load_buttons = document.getElementsByClassName('load-pyscript-button')
        Array.from(load_buttons).forEach(elem => {
            elem.innerHTML = "</span><span class='align-middle spinner'></span><span class='inline-block'>Loading..."
            elem.classList.add("load-pyscript-button-loading")
        })

        /* <div class="smooth spinner"></div> */

        /* texts = document.getElementsByClassName('want-to-run-text')
        Array.from(texts).forEach(elem => {
            elem.innerHTML = ""
        }) */

        //load css
        css_link = document.createElement("link")
        css_link.rel = "stylesheet"
        css_link.type = "text/css"
        css_link.href = "https://pyscript.net/releases/2023.12.1/core.css"
        //css_link.href = "http://127.0.0.1:5501/pyscriptjs/build/pyscript.css"
        document.getElementsByTagName('head')[0].appendChild(css_link)

        //load cs
        script_tag = document.createElement('script')
        script_tag.src = "https://pyscript.net/releases/2023.12.1/core.js"
        script_tag.type = "module"
        //script_tag.src = "http://127.0.0.1:5501/pyscriptjs/build/pyscript.js"
        document.body.append(script_tag)        
    }
    document.addEventListener('py:ready', () => {
        static = document.getElementsByClassName('static-example')
        live = document.getElementsByClassName('live-example')
        Array.from(static).forEach(div => {
            div.classList.add('hidden')
        })
        Array.from(live).forEach(div => {
            div.classList.remove('hidden')
        })
        load_buttons = document.getElementsByClassName('load-pyscript')
        Array.from(load_buttons).forEach(elem => {
            elem.classList.add('hidden')
        })
    })
</script>
<link rel="stylesheet" href="tabs.css">
				</div>
				
			</article>
			<footer>
    <div class = "pt-4 pb-6 text-center text-gray-500" id="Footer">
        <p class="">All contents © Jeff Glass 2022. All rights reserved.</p>
        <p>See <a href="../../cloud-resume-challenge" class="underline">how this site was built</a>.</p>
    </div>
</footer>
		</div>
	</main>


	
</body>
</html>
