<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Javascript Beginnings</title>
	<meta name="description" content="Electronics, Making, Software Development, and Amateur Radio from a Midwest Nerd">
	
	
	
	
	<link rel ="stylesheet" type="text/css" href="../../css/style.css">
	
	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Javascript Beginnings"/>
<meta name="twitter:description" content="I&#39;ve written very little Javascript up to this point, but now I&#39;ve found a use case for some."/>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css" />	
	<script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />

	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BZTF8S6M1E"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BZTF8S6M1E', { 'anonymize_ip': false });
}
</script>


	<link rel="icon" href="../../favicon.ico?v=2"> 
	
</head>
<body>
	
	<main>
		<header>

<div class="fixed z-20 flex flex-row items-end w-full p-2 bg-green-800 t-0">
    
    <div class="flex-none hidden lg:flex">
        <div class="flex-none px-2">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
        <div class="flex-none menu-item-green ">
            <a href="../../#Introduction" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Home
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../project" class="z-30 clickable-link-box no-style-link"><span></span></a>
            Projects
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../post" class="z-30 clickable-link-box no-style-link"><span></span></a> Blog  
        </div>
        <div class="flex-none menu-item-green">
            <a href="../../oneoff" class="z-30 clickable-link-box no-style-link"><span></span></a>
            One-Offs
        </div>
    </div>
    
    <div class="flex justify-start flex-1 w-auto lg:hidden align-left large-menu">
        <div class="flex-none menu-item-green mobile-menu-button">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </div>
        <div class="flex-none">
            <span class="px-4 text-3xl font-bold text-green-200 transition duration-500 transform hover:text-green-50">
                <a href='../../' class= "no-style-link">Jeff Glass</a>
            </span>
        </div>
    </div>
    
    
    <div class="hidden text-green-200 transition mobile-menu">
            <div class="w-auto m-auto"><a href="../../"         class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Home</a></div>
            <div class="w-auto m-auto"><a href="../../project"  class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Projects</a></div>
            <div class="w-auto m-auto"><a href="../../post"     class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">Blog</a></div>
            <div class="w-auto m-auto"><a href="../../oneoff"   class="block w-auto px-2 py-2 m-auto text-2xl transition duration-300 no-style-link hover:bg-green-500">One-Offs</a></div>
    </div>
    
    <div class="justify-end flex-1 hidden w-auto h-auto align-top md:flex social-buttons">
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.youtube.com/channel/UCjgmTMVx2B5_DOB3bCZBq7A" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg class = "z-0" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5 7H19C19.5523 7 20 7.44771 20 8V16C20 16.5523 19.5523 17 19 17H5C4.44772 17 4 16.5523 4 16V8C4 7.44772 4.44772 7 5 7ZM2 8C2 6.34315 3.34315 5 5 5H19C20.6569 5 22 6.34315 22 8V16C22 17.6569 20.6569 19 19 19H5C3.34315 19 2 17.6569 2 16V8ZM10 9L14 12L10 15V9Z" fill="currentColor"/>
            </svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.twitter.com/jeffersglass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" class="ionicon" viewBox="0 0 512 512"><path d="M496 109.5a201.8 201.8 0 01-56.55 15.3 97.51 97.51 0 0043.33-53.6 197.74 197.74 0 01-62.56 23.5A99.14 99.14 0 00348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 002.54 22.1 280.7 280.7 0 01-203-101.3A95.69 95.69 0 0036 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0135.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 01-25.94 3.4 94.38 94.38 0 01-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0139.5 405.6a203 203 0 01-23.5-1.4A278.68 278.68 0 00166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 00496 109.5z" fill="currentColor"/></svg>
        </div>
        <div class="flex-none menu-item-green social-buttons">
            <a href="https://www.linkedin.com/in/jeffrey-r-glass" class="z-30 clickable-link-box no-style-link" target="_blank"><span></span></a>
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 512 512"><path d="M444.17,32H70.28C49.85,32,32,46.7,32,66.89V441.61C32,461.91,49.85,480,70.28,480H444.06C464.6,480,480,461.79,480,441.61V66.89C480.12,46.7,464.6,32,444.17,32ZM170.87,405.43H106.69V205.88h64.18ZM141,175.54h-.46c-20.54,0-33.84-15.29-33.84-34.43,0-19.49,13.65-34.42,34.65-34.42s33.85,14.82,34.31,34.42C175.65,160.25,162.35,175.54,141,175.54ZM405.43,405.43H341.25V296.32c0-26.14-9.34-44-32.56-44-17.74,0-28.24,12-32.91,23.69-1.75,4.2-2.22,9.92-2.22,15.76V405.43H209.38V205.88h64.18v27.77c9.34-13.3,23.93-32.44,57.88-32.44,42.13,0,74,27.77,74,87.64Z" fill="currentColor"/></svg>
        </div>
    </div>
</div>
</header>
<script>
    const btn = document.querySelector("div.mobile-menu-button")
    const mobileMenu = document.querySelector(".mobile-menu")
    const largeMenu = document.querySelector(".large-menu")
    const socialButtons = document.querySelector(".social-buttons")

    btn.addEventListener("click", () =>{
        openMenu();
    })

    function openMenu() {
        mobileMenu.classList.toggle("hidden");
        largeMenu.classList.toggle("hidden");
        socialButtons.classList.add("hidden");
    }

    
    const smSize = 640;
    const mdSize = 768;
    const largeSize = 1024;
    window.addEventListener('resize', function(event) {
        if (event.target.screen.width > smSize ){
            mobileMenu.classList.add("hidden");
            largeMenu.classList.remove("hidden");
        }
    }, true);
</script>

		<div class="w-full bg-green-800 bg-opacity-10">
			<div class="pt-16"></div>
			<article class="w-full px-16 pt-4 pb-4 m-auto lg:w-11/12 bg-gray-50">
				<h1 class="pb-2 text-4xl">Javascript Beginnings</h1>
				<p>Published November 4, 2021</p>
				
				<div>
					<span>Tags:</span>
					
					<a href="../../tags/cloud-resume">Cloud-Resume</a>
					
				</div>
				
				
				<hr>
				<div>
					<p class="post-p">I've written very little Javascript up to this point, but now I've found a use case for some. The One-Off project cards I've added to the homepage would be improved by a filtering system. Let's say by default the page shows the last 10 added One-Offs, but there are some buttons the user can flick to filter the cards by specific categories (tags?). Maybe Radio, Theatrical, Electronics, etc. Not sure if this list will be hard-coded or auto-generated - hard coded to start, for sure, and then we can look into generation.</p>
<p class="post-p">Since this is going to be a hardcoded example to start, I'll embed a script tag right inside my Index.html template for now. I'm also going to take the "first 5" limiter out of the range function that displays the cards - I'll want all the cards to load (probably), then constrain which ones are actually visible with Javascript.</p>
<p class="post-p">Alright, well let's see about getting a little JQuery going. I'll add</p>
<p class="post-p"><span class="tagnamecolor"><span class="tagcolor">&lt;</span>script<span class="attributecolor"> src<span class="attributevaluecolor">="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"</span></span><span class="tagcolor">&gt;</span></span><span class="tagnamecolor"><span class="tagcolor">&lt;</span>/script<span class="tagcolor">&gt;</span></span></p>
<p class="post-p">To the head tag in my baseof.html template to include it. Then, in my index template, I'll use a little script tag:</p>
<p class="post-p"><div></div></p>
<p class="post-p"><div>    &lt;script&gt;</div></p>
<p class="post-p"><div>        $(document).ready(function() {</div></p>
<p class="post-p"><div>            console.log("Hello, world");</div></p>
<p class="post-p"><div>        })</div></p>
<p class="post-p"><div>    &lt;/script&gt;</div></p>
<p class="post-p"></p>
<p class="post-p"><div> </div></p>
<p class="post-p"><div>And voila, a console log:</div></p>
<p class="post-p"><div><img alt="" class="size-full wp-image-3980 aligncenter post-img" height="162" src="hellolog.png" width="234"/></div></p>
<p class="post-p">Let's see about finding all the cards on the page. <a href="https://stackoverflow.com/questions/55521589/how-to-filter-bootstrap-cards-based-on-search-box">This Stack Overflow answer</a> suggests doing something like this with data-roles, which seem like an easy way of grabbing DOM elements. And since I'm generating an article per one-off, I can add the data-role="small-card" param to each card by adding it to the summary.html template for the one-offs. I think. Let's try something like:</p>
<p class="post-p"><div></div></p>
<p class="post-p"><div>        $(document).ready(function() {</div></p>
<p class="post-p"><div>            console.log($('article[data-role="small-card"]'));</div></p>
<p class="post-p"><div>        })</div></p>
<p class="post-p"></p>
<p class="post-p"><div> </div></p>
<p class="post-p"><div>And indeed I can see we've selected 7 articles, corresponding to the 7 One-Offs generated on the page.</div></p>
<p class="post-p"><div><img alt="" class="size-full wp-image-3981 aligncenter post-img" height="292" src="articlesJquery.png" width="240"/></div></p>
<p class="post-p">With the help of the <a href="https://api.jquery.com/">JQuery Documentation</a> and the <a href="https://www.w3schools.com/jquERy/default.asp">W3 Schools JQuery reference</a>, I can use a JQuery selector to grab, for example, all the articles whose content contains the word "Meter" (since I happen to have two of them) and hide them like so:</p>
<p class="post-p"><img alt="" class="aligncenter wp-image-3982 size-full post-img" height="156" src="hide.png" width="559"/></p>
<p class="post-p">And, it hides those two cards! Progress! (<em>Although I note that the list page "Smalls" is also included in there...</em>)</p>
<p class="post-p"><img alt="" class="size-medium wp-image-3986 aligncenter post-img" height="217" src="5cards-300x217.png" width="300"/></p>
<p class="post-p">So, now we need some buttons that dynamically do the same thing based on... something. So let's start by adding an "All" button that makes everything visible. I'll throw a couple of addition buttons next to it for now, just for formatting's sake</p>
<p class="post-p"><img alt="" class="aligncenter size-full wp-image-3987 post-img" height="229" src="demobuttons.png" width="359"/></p>
<p class="post-p">So, let's get that All button to do a thing. I started by creating a couple of hard-coded classes that would do the filtering I wanted - one specifically for the "All" button (show everything) and one that would contain only the cards that contained the word "Meter". </p>
<p class="post-p"><img alt="" class="aligncenter size-full wp-image-3992 post-img" height="281" src="functions.png" width="685"/></p>
<p class="post-p">Then I refactored that code into a single function that looks at the ID of when the button was clicked, and filters the one-off cards based on that:</p>
<p class="post-p"><img alt="" class="aligncenter wp-image-3989 post-img" height="299" src="filter-gifs.gif" width="400"/></p>
<p class="post-p">(<em>This is also the point when I discovered <a href="http://blog.bahraniapps.com/gifcam/">GifCam</a> - to enable Gif representations of my progress as things get more interactive.)</em></p>
<p class="post-p">So now... how to dynamically generate this list of tags?</p>
<p class="post-p">Let's start with some light theft. <a href="https://discourse.gohugo.io/t/list-all-tags-categories/17765/2">This post from the Hugo discord</a> has a solution for just generating a list of all the tags with their number of tagged items.</p>
<p class="post-p"><img alt="" class="size-full wp-image-3994 aligncenter post-img" height="189" src="taglistcode.png" width="901"/><img alt="" class="size-full wp-image-3993 aligncenter post-img" height="133" src="taglistresult.png" width="143"/></p>
<p class="post-p">So, how to turn this into buttons? Well, first I can take out the parts that use the Count variable (though maybe I'll want to add that back in later). And we'll turn that href into a button and remove the div, like so:</p>
<p class="post-p"><div></div></p>
<p class="post-p"><div></div></p>
<p class="post-p"><div><img alt="" class="aligncenter size-full wp-image-3995 post-img" height="97" src="buttonautos.png" width="1145"/></div></p>
<p class="post-p"></p>
<p class="post-p"></p>
<p class="post-p">And that generates the buttons, at least.</p>
<p class="post-p"><img alt="" class="aligncenter size-full wp-image-3996 post-img" height="69" src="tagbuttons.png" width="563"/></p>
<p class="post-p">And because our earlier script applies to any button on the page, it's already filtering on the cards based on these tags! Sadly, the cards don't have that tag information yet, so all of those buttons blow away all the cards. But I'll bet we can fix that by editing the summary.html renderer for those cards. </p>
<p class="post-p">After a bit of trouble because Hugo (Go?) templating interprets single-quotes as instructions to translate characters into their Ascii (Unicode?) equivalents, and some funking around with<a href="https://stackoverflow.com/questions/4547363/jquery-filter-by-an-attribute-value"> how the Jquery interacts</a> with the (invented) data-tags attribute, and the <a href="https://stackoverflow.com/questions/1318076/jquery-hasattr-checking-to-see-if-there-is-an-attribute-on-an-element">unfortunate behavior of the .attr() function</a> to return undefined if the block doesn't have that attribute, I came up with:</p>
<p class="post-p"><img alt="" class="aligncenter size-full wp-image-3999 post-img" height="109" src="autoButtons.png" width="957"/></p>
<p class="post-p"><img alt="" class="aligncenter size-full wp-image-4000 post-img" height="387" src="buttonClick.png" width="735"/></p>
<p class="post-p">This does mean that all the tags I use in my frontmatter have to have the same cannonical form as Hugo's tag pages, ie all lowercase, no spaces (hyphens ok). But that's fine for now, I can figure out how to style the text later.</p>
<p class="post-p"><img alt="" class="aligncenter size-full wp-image-4002 post-img" height="337" src="filteringauto.gif" width="1130"/></p>
<p class="post-p">Interestingly, the "Smalls" list page is included in all of the current filters, which isn't desirable. But I can fix this by just not rendering that card in the first place, by wrapping the  {{ .Render "summary" }} statement that actually renders the small cards in a <a href="https://gohugo.io/variables/page/#page-variables">{{ if .IsPage }}</a>.</p>
<p class="post-p">There's still some slightly funky things happening with the spacing of the small cards, but I'll figure that out at some point. </p>
<p class="post-p">asdsadsa</p>
<p class="post-p"></p>

				</div>
				
			</article>
			<footer>
    <div class = "pt-4 pb-6 text-center text-gray-500" id="Footer">
        <p class="">All contents © Jeff Glass 2022. All rights reserved.</p>
        <p>See <a href="../../cloud-resume-challenge" class="underline">how this site was built</a>.</p>
    </div>
</footer>
		</div>
	</main>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
	<script>
		lightbox.option({
			'fadeDuration': 200,
			'resizeDuration': 200
		})
	</script>
</body>
</html>
