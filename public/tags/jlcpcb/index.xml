<?xml version="1.0" encoding="utf-8" standalone="yes"?>

<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>jlcpcb on Jeff Glass</title>
    <link>https://jeff.glass/tags/jlcpcb/</link>
    <description>Recent content in jlcpcb on Jeff Glass</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 22 Sep 2020 17:52:04 -0500</lastBuildDate><atom:link href="https://jeff.glass/tags/jlcpcb/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Demilight-version 0.9.1</title>
      <link>https://jeff.glass/backup-post/demilight-v-0-9-1/</link>
      <pubDate>Tue, 22 Sep 2020 17:52:04 -0500</pubDate>
      
      <guid>https://jeff.glass/backup-post/demilight-v-0-9-1/</guid>
      <description>&lt;p class=&#34;post-paragraph&#34;&gt;The Demilight (miniature moving light) project has been slowed down in the past few months, mostly by good things. Namely, my return to my fulltime job and other interesting technical nerdery. But the project soldiers on!&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;I made a video detailing the trials and tribulations of getting version 0.9.1 built, which you can watch below (embedded) or &lt;a href=&#34;https://www.youtube.com/watch?v=P-ZiBg6NIeI&#34;&gt;over on YouTube&lt;/a&gt;.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/P-ZiBg6NIeI&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/p&gt;
</description>
      &lt;
    </item>
    
    <item>
      <title>Demilight-version 0.9.1</title>
      <link>https://jeff.glass/post/demilight-v-0-9-1/</link>
      <pubDate>Tue, 22 Sep 2020 17:52:04 -0500</pubDate>
      
      <guid>https://jeff.glass/post/demilight-v-0-9-1/</guid>
      <description>&lt;p class=&#34;post-p&#34;&gt;The Demilight (miniature moving light) project has been slowed down in the past few months, mostly by good things. Namely, my return to my fulltime job and other interesting technical nerdery. But the project soldiers on!&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;I made a video detailing the trials and tribulations of getting version 0.9.1 built, which you can watch below (embedded) or &lt;a href=&#34;https://www.youtube.com/watch?v=P-ZiBg6NIeI&#34;&gt;over on YouTube&lt;/a&gt;.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/P-ZiBg6NIeI&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/p&gt;
</description>
      &lt;
    </item>
    
    <item>
      <title>Demilight Version 0.8.1</title>
      <link>https://jeff.glass/backup-post/demilight-version-0-8-1/</link>
      <pubDate>Thu, 16 Jul 2020 03:01:51 -0500</pubDate>
      
      <guid>https://jeff.glass/backup-post/demilight-version-0-8-1/</guid>
      <description>&lt;p class=&#34;post-paragraph&#34;&gt;The newest round of Demilight PCBs and 3D-Prints have taken shape as version 0.8.1. Here&#39;s a brief video overview of the current state of thing:&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;{{&amp;lt; youtube _Rrdo-xNau4 &amp;gt;}}&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;The biggest change, as I mention in the video, is that I tried out JLCPCB&#39;s surface mount parts assembly service for the firs time. Overall, I&#39;m very satisfied, and I&#39;m delighted to have such a useful shortcut for assembly of these PCBs. The version 0.7 and 0.8 prototype boards, which are essentially the same as 0.8 with their 0603 passives and tqfp ATmega, took between 60 and 90 minutes each to assemble. I wouldn&#39;t say they were an enormous challenge to assemble, they just took time and concentration.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;But now, with JLCPCB assembling the surface mount components, each of the 0.8.1 PCBs took just 3 minutes to finalize assembly, and it&#39;s all easy thru-hole parts. As I&#39;m considering making a little flock of these, or providing them to folks who aren&#39;t as practiced at soldering, finding ways to accelerate the assembly process is a huge boon.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;&lt;a href=&#34;https://jeff.glass/wp-content/uploads/2020/07/Assembly-11_1.13.1.png&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;aligncenter size-large wp-image-1228 post-img&#34; height=&#34;405&#34; src=&#34;Assembly-11_1.13.1-1024x576.png&#34; width=&#34;720&#34;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;Of course, there&#39;s some additional cost to getting the boards machine-assembled. And for ordering just two assembled boards, of course the unit-cost is going to be high. But it drops off quickly with any kind of scale. I just put in an order for some 0.9 PCBs, and getting 10 of them instead of 2 dropped the unit-cost by almost 70%. All the fixed costs - DHL shipping, extended-part-charges from JLCPCB - start to amortize real quick. Most of the components themselves have a 10- or 20-part minimum order, due to part-loss loading and unloading the pick-n-place machines, so the component cost didn&#39;t actually increase all that much except for the expensive IC&#39;s (ATmega, AL8860).&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;Looking forward to 0.9.0.&lt;/p&gt;
</description>
      &lt;
    </item>
    
    <item>
      <title>Demilight Version 0.8.1</title>
      <link>https://jeff.glass/post/demilight-version-0-8-1/</link>
      <pubDate>Thu, 16 Jul 2020 03:01:51 -0500</pubDate>
      
      <guid>https://jeff.glass/post/demilight-version-0-8-1/</guid>
      <description>&lt;p class=&#34;post-p&#34;&gt;The newest round of Demilight PCBs and 3D-Prints have taken shape as version 0.8.1. Here&#39;s a brief video overview of the current state of thing:&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;{{&amp;lt; youtube _Rrdo-xNau4 &amp;gt;}}&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;The biggest change, as I mention in the video, is that I tried out JLCPCB&#39;s surface mount parts assembly service for the firs time. Overall, I&#39;m very satisfied, and I&#39;m delighted to have such a useful shortcut for assembly of these PCBs. The version 0.7 and 0.8 prototype boards, which are essentially the same as 0.8 with their 0603 passives and tqfp ATmega, took between 60 and 90 minutes each to assemble. I wouldn&#39;t say they were an enormous challenge to assemble, they just took time and concentration.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;But now, with JLCPCB assembling the surface mount components, each of the 0.8.1 PCBs took just 3 minutes to finalize assembly, and it&#39;s all easy thru-hole parts. As I&#39;m considering making a little flock of these, or providing them to folks who aren&#39;t as practiced at soldering, finding ways to accelerate the assembly process is a huge boon.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;aligncenter size-large wp-image-1228 post-img&#34; height=&#34;405&#34; src=&#34;Assembly-11_1.13.1-1024x576.png&#34; width=&#34;720&#34;/&gt;&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;Of course, there&#39;s some additional cost to getting the boards machine-assembled. And for ordering just two assembled boards, of course the unit-cost is going to be high. But it drops off quickly with any kind of scale. I just put in an order for some 0.9 PCBs, and getting 10 of them instead of 2 dropped the unit-cost by almost 70%. All the fixed costs - DHL shipping, extended-part-charges from JLCPCB - start to amortize real quick. Most of the components themselves have a 10- or 20-part minimum order, due to part-loss loading and unloading the pick-n-place machines, so the component cost didn&#39;t actually increase all that much except for the expensive IC&#39;s (ATmega, AL8860).&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;Looking forward to 0.9.0.&lt;/p&gt;
</description>
      &lt;
    </item>
    
    <item>
      <title>DMX Mini Moving Light First Assembly - Live Stream</title>
      <link>https://jeff.glass/backup-post/dmx-mini-moving-light-first-assembly-live-stream/</link>
      <pubDate>Wed, 29 May 2019 01:47:48 -0500</pubDate>
      
      <guid>https://jeff.glass/backup-post/dmx-mini-moving-light-first-assembly-live-stream/</guid>
      <description>&lt;p class=&#34;post-paragraph&#34;&gt;With the shell 3D-printed and the PCB assembled, I went ahead and put together my first &#34;completed&#34; mini-moving light, live on camera:&lt;/p&gt;
&lt;figure class=&#34;wp-block-embed-youtube wp-block-embed is-type-video is-provider-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio&#34;&gt;&lt;div class=&#34;wp-block-embed__wrapper&#34;&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;{{&amp;lt; youtube lroMq1nJ0Ds &amp;gt;}}&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/figure&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;It went fairly well - everything mostly worked and nothing caught fire!&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;There are a few mechanical and electrical takeaways for the next version, including:&lt;/p&gt;
&lt;ul class=&#34;post-ul&#34;&gt;&lt;li&gt;Mechanical:&lt;ul class=&#34;post-ul&#34;&gt;&lt;li&gt;Ennlarge the hole for LED wires in the lower case&lt;/li&gt;&lt;li&gt;Make a brief instruction manual for myself of what needs to be assembled/installed/solder in what order&lt;/li&gt;&lt;li&gt;Hole for program/enable switch access&lt;/li&gt;&lt;li&gt;Fix tolerances on the tilt-servo/yoke interface&lt;/li&gt;&lt;li&gt;Lengthen the body to accommodate a heatsink for the LED star&lt;/li&gt;&lt;li&gt;Figure out mounting/hanging hardware&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Electrical:&lt;ul class=&#34;post-ul&#34;&gt;&lt;li&gt;Increase the spacing between Pan and Tilt Servo pads&lt;/li&gt;&lt;li&gt;Order higher-current 5V regulator (1.5A 7805)&lt;/li&gt;&lt;li&gt;Select a new inductor for up to 1A of current&lt;/li&gt;&lt;li&gt;Select a new schottky diode for up to 24V&lt;/li&gt;&lt;li&gt;Combine the transmit/receive control lines onto a single pin of the Arduino.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;But all in all, for a first assembly, even tripping over a couple of silly mistakes on my part, things went pretty well. Onward to V0.4.&lt;/p&gt;
</description>
      &lt;
    </item>
    
    <item>
      <title>DMX Mini Moving Light First Assembly - Live Stream</title>
      <link>https://jeff.glass/post/dmx-mini-moving-light-first-assembly-live-stream/</link>
      <pubDate>Wed, 29 May 2019 01:47:48 -0500</pubDate>
      
      <guid>https://jeff.glass/post/dmx-mini-moving-light-first-assembly-live-stream/</guid>
      <description>&lt;p class=&#34;post-p&#34;&gt;With the shell 3D-printed and the PCB assembled, I went ahead and put together my first &#34;completed&#34; mini-moving light, live on camera:&lt;/p&gt;
&lt;figure class=&#34;wp-block-embed-youtube wp-block-embed is-type-video is-provider-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio&#34;&gt;&lt;div class=&#34;wp-block-embed__wrapper&#34;&gt;
&lt;p class=&#34;post-p&#34;&gt;
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/lroMq1nJ0Ds&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/figure&gt;
&lt;p class=&#34;post-p&#34;&gt;It went fairly well - everything mostly worked and nothing caught fire!&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;There are a few mechanical and electrical takeaways for the next version, including:&lt;/p&gt;
&lt;ul class=&#34;post-ul&#34;&gt;&lt;li&gt;Mechanical:&lt;ul class=&#34;post-ul&#34;&gt;&lt;li&gt;Ennlarge the hole for LED wires in the lower case&lt;/li&gt;&lt;li&gt;Make a brief instruction manual for myself of what needs to be assembled/installed/solder in what order&lt;/li&gt;&lt;li&gt;Hole for program/enable switch access&lt;/li&gt;&lt;li&gt;Fix tolerances on the tilt-servo/yoke interface&lt;/li&gt;&lt;li&gt;Lengthen the body to accommodate a heatsink for the LED star&lt;/li&gt;&lt;li&gt;Figure out mounting/hanging hardware&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Electrical:&lt;ul class=&#34;post-ul&#34;&gt;&lt;li&gt;Increase the spacing between Pan and Tilt Servo pads&lt;/li&gt;&lt;li&gt;Order higher-current 5V regulator (1.5A 7805)&lt;/li&gt;&lt;li&gt;Select a new inductor for up to 1A of current&lt;/li&gt;&lt;li&gt;Select a new schottky diode for up to 24V&lt;/li&gt;&lt;li&gt;Combine the transmit/receive control lines onto a single pin of the Arduino.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;p class=&#34;post-p&#34;&gt;But all in all, for a first assembly, even tripping over a couple of silly mistakes on my part, things went pretty well. Onward to V0.4.&lt;/p&gt;
</description>
      &lt;
    </item>
    
    <item>
      <title>DMX Mini Moving Light Shield V0.3</title>
      <link>https://jeff.glass/backup-post/dmx-mini-moving-light-shield-v0.3/</link>
      <pubDate>Fri, 24 May 2019 03:23:46 -0500</pubDate>
      
      <guid>https://jeff.glass/backup-post/dmx-mini-moving-light-shield-v0.3/</guid>
      <description>&lt;p class=&#34;post-paragraph&#34;&gt;As I hinted to in my original post about the &lt;a href=&#34;https://jeff.glass/2019/05/20/arduino-pro-mini-dmx-shield/&#34;&gt;Arduino Pro Mini DMX Shield&lt;/a&gt;, and then talked some about in my &lt;a href=&#34;https://jeff.glass/2019/05/22/dmx-mini-mover-shield-pcb-assembly-stream/&#34;&gt;PCB Assembly Livestream&lt;/a&gt;, the latest version of my DMX shield is geared toward driving in miniature moving light. This means that, in addition to being able to receive DMX, the Arduino driving the device will need to be able to drive a couple of servos and dim a relatively high power LED. There are many way of skinning both of those cats, so let&#39;s look at the solutions that are present in V0.3 of the DMX shield.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;&lt;div class=&#34;wp-block-image&#34;&gt;&lt;figure class=&#34;aligncenter is-resized&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-397 post-img&#34; height=&#34;310&#34; src=&#34;IMG_7277-1024x768.jpg&#34; width=&#34;413&#34;/&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h4 class=&#34;post-h4&#34;&gt;Servo Control
&lt;p class=&#34;post-paragraph&#34;&gt;Of LED dimming and Servo control, the latter is the easier problem to solve. While there are &lt;a href=&#34;https://www.digikey.com/products/en/integrated-circuits-ics/pmic-motor-drivers-controllers/744?k=&amp;amp;pkeyword=&amp;amp;sv=0&amp;amp;pv1664=28&amp;amp;pv1664=10&amp;amp;pv1664=2&amp;amp;sf=0&amp;amp;FV=ffe002e8&amp;amp;quantity=&amp;amp;ColumnSort=0&amp;amp;page=1&amp;amp;stock=1&amp;amp;pageSize=25&#34;&gt;dedicated servo-driving IC&#39;s&lt;/a&gt;, and &lt;a href=&#34;https://www.digikey.com/products/en/motors-solenoids-driver-boards-modules/motor-driver-boards-modules/181?k=servo&amp;amp;k=&amp;amp;pkeyword=servo&amp;amp;sv=0&amp;amp;pv1987=9&amp;amp;sf=0&amp;amp;FV=ffe000b5&amp;amp;quantity=&amp;amp;ColumnSort=0&amp;amp;page=1&amp;amp;pageSize=25&#34;&gt;modules&lt;/a&gt;, almost any microcontroller, including the ATMEGA238/Arduino can control a hobby servo in a straightforward way using minimal additional hardware.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;A typical hobby servo needs only three wires running to it - +5 for power, Ground, and a control line. The control line carries the position data for the servo in the form of pulse width modulation. The servo expects to see a pulse every 20 milliseconds. A pulse of 1.5 ms corresponds to the center (90°) position of the servo. A 1 ms pulse rotates all the way in one direction (0°) and a 2 ms pulse rotates fully the other direction (180°). There is a standard&lt;a href=&#34;https://www.arduino.cc/en/Reference/Servo&#34;&gt; Arduino Servo Library&lt;/a&gt; that translates degrees inputted into the appropriate duration Servo pulses.&lt;/p&gt;
&lt;figure class=&#34;wp-block-image&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-409 post-img&#34; src=&#34;Sinais_controle_servomotor.jpg&#34;/&gt;&lt;/figure&gt;&lt;p class=&#34;post-img-caption&#34;&gt;Image Credit: Wikimedia Member Hforesti, CC-SA-4.0&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;The only additional hardware present on the V0.3 board for Servo control is, therefore, a bulkier &lt;a href=&#34;https://www.digikey.com/product-detail/en/stmicroelectronics/L7805CV/497-1443-5-ND/585964&#34;&gt;5V regulator&lt;/a&gt;. The 5V regulator on an Arduino Pro Mini isn&#39;t particularly stout to begin with, and I&#39;ve had issues on previous projects with &#34;off brand&#34; Pro Minis having even less 5V oomph than that. So there&#39;s a pair of DC input pads and a TO-220 packaged 7805 to provide a healthy amount of current for the servos.&lt;/p&gt;
&lt;h4 class=&#34;post-h4&#34;&gt;LED Dimming
&lt;p class=&#34;post-paragraph&#34;&gt;The LED dimming half of this project has a wider solution space than servo control. The typical solution is MOSFET dimming. A FET is switched on and off rapidly, with a variable duty cycle to control brightness. This is the solution that commercial &lt;a href=&#34;https://www.amazon.com/Channel-Controller-Smoother-Indicator-Function/dp/B00Q1N1NVK/ref=sr_1_1_sspa?keywords=led+decoder&amp;amp;qid=1558576077&amp;amp;s=gateway&amp;amp;sr=8-1-spons&amp;amp;psc=1&#34;&gt;DMX LED decoders&lt;/a&gt; use, with a bank of 3A-5A fets, one per driven channel. It&#39;s simple and inexpensive.&lt;/p&gt;
&lt;figure class=&#34;wp-block-image&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-410 post-img&#34; src=&#34;dmxled.png&#34;/&gt;&lt;/figure&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;The problem is heat. MOSFETS with super-low on-DC resistances are expensive, and those with higher DC resistances create more heat. There&#39;s always a balance being struck between cost and current carrying capacity. Which is why most commercial DMX led dimmers sit in &lt;a href=&#34;https://www.amazon.com/Channel-Controller-Smoother-Indicator-Function/dp/B01CCBG1SO/ref=sr_1_7?keywords=dmx+driver&amp;amp;qid=1558576476&amp;amp;s=gateway&amp;amp;sr=8-7&#34;&gt;a sweet spot between 3A and 5A&lt;/a&gt;. And all of them come in metal cases, sometimes mounted to large heatsinks, to help with heat dissipation. Less than ideal for what is ultimately meant to be a 3D-printed moving light made of thermoplastic.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;The other problem is overcurrent regulation. For typical, inexpensive 3A per channel DMX LED driver, there&#39;s nothing to protect the FETs if you load up a channel with, say, 5A of load, there&#39;s nothing in the drivers to prevent the FETs heating up to their failure point. Or worse. See, for example, this example from a local theater:&lt;/p&gt;
&lt;div class=&#34;grid grid-cols-2&#34;&gt;
&lt;img alt=&#34;&#34; class=&#34;w-auto wp-image-408 post-img&#34; data-id=&#34;408&#34; data-link=&#34;https://jeff.glass/?attachment_id=408#main&#34; src=&#34;IMG_5124-1024x768.jpeg&#34;/&gt;
&lt;img alt=&#34;&#34; class=&#34;w-auto wp-image-407 post-img&#34; data-id=&#34;407&#34; data-link=&#34;https://jeff.glass/?attachment_id=407#main&#34; src=&#34;IMG_7222-e1558576797290-1024x768.jpg&#34;/&gt;
&lt;/div&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;After some investigation, it turned out that there was a wiring error causing a dead-short across one of the channels. Which subsequently burst into flames. No kidding. The Stage Manager reported seeing a cloud of smoke roll out of the vom, which it turned out was discharge from the fire extinguisher the crew was using. Yikes!&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;With a controlled environment and a defined load, an overcurrent load is slightly less of a concern, but it seemed like there must be a more elegant solution to both the heat and overcurrent issues.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;The solution I&#39;m currently trying is the the &lt;a href=&#34;https://www.diodes.com/assets/Datasheets/AL8860.pdf&#34;&gt;AL8860 Buck LED Driver&lt;/a&gt;. It is essentially a DC-DC step-down converter which derives the average current through its load from a SET resistor between a couple of its pins. It has an input voltage from 4.5V to 40V, and in TSOT-25 form factor a maximum current of 1A. A TTL PWM signal applied to its CTRL pin brings the average current down from the maximum SET current to between 0 and 100% of maximum, depending on duty cycle.&lt;/p&gt;
&lt;figure class=&#34;wp-block-image&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-411 post-img&#34; src=&#34;AL8860_circuit.png&#34;/&gt;&lt;/figure&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;While the IC itself ultimately uses an NDMOS FET to do its switching with a relatively high on-state resistance (200 mOhm), its incorporation of current management and a step-down converter directly into the IC makes it an attractive option. And for the form factors I&#39;m looking at, I&#39;m not likely to be pushing more than 1A through an LED star anyway.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;The AL8860 requires a few external components as a buck converter would - an inductor and a schottky diode - as well as a bypass cap and the SET resistor(s). These altogether take up about as much PCB space as a decently sized FET switch would, let a long the voltage conversation IC&#39;s that would allow this to run on a variable voltage.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;&lt;div class=&#34;wp-block-image&#34;&gt;&lt;figure class=&#34;aligncenter&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-412 post-img&#34; src=&#34;PCB-layout-focus-dimming.png&#34;/&gt;&lt;/figure&gt;&lt;p class=&#34;post-img-caption&#34;&gt;The portion of the PCB directly responsibly for 1A LED dimming. Approximately 8mm x 8mm. The two large thru holes directly below this are points to solder leads from the LED star directly.&lt;/p&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h4 class=&#34;post-h4&#34;&gt;Testing&lt;/h4&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;I made the bold choice of testing this IC and hardware on a livestream recently. But not before an unscucessful attempt test attempt.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;In an attempt to validate this IC idea before committing to it, I purchased a handful of AL8860s, schottky diodes, 0.1 Ohm resistors, and inductors, and tried to piece together this idea on a piece of copper-clad. That did not, in short, go well. Without proper pads, I couldn&#39;t get the IC to stay in place well enough to solder magnet-wire to it. Even after I super-glued it down, the heat from my soldering iron weakened the super glue and caused it to come unstuck. And release superglue fumes. Fun!&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;So I pulled the trigger on ordering a batch of the V0.3 PCB&#39;s, this time from JLCPCB. But in my rush, I didn&#39;t run a final Design Rule Check, and the pads for my Pan and Tilt servos overlap. Ah well, this was mostly to validate the LED dimming circuit.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;And validate it did! Check out this gif from my testing session:&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;&lt;div class=&#34;wp-block-image&#34;&gt;&lt;figure class=&#34;aligncenter&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-415 post-img&#34; src=&#34;DimmingTestGif.gif&#34;/&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;Now that&#39;s some light! The arduino was just running a simple ramp-up/ramp-down for validation.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;The LEDs are from LEDSupply, a vendor on the east coast that I haven&#39;t used before, but stumbled upon while looking for LED options. They happen to be having a closeout sale on some &lt;a href=&#34;https://www.ledsupply.com/closeout/luxeon-r-triple-3-up-neutral-white-led-star&#34;&gt;Luxeon R 3-LED stars&lt;/a&gt;, which seemed like a good option for something I might smoke or blow up. The LEDs themselves are &lt;a href=&#34;https://www.lumileds.com/uploads/355/DS101-pdf&#34;&gt;Luxeon LXA7-PW40&lt;/a&gt;s. And with the appropriate &lt;a href=&#34;https://www.ledsupply.com/triple-carclo-led-optics&#34;&gt;Carclo optic&lt;/a&gt;, the beam width is fairly narrow. The heatsink is just something from the junk bin.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;At 1000mA forward current (which LEDSupply recommends as the maximum allowed current), they emit around 975 lumens total, around &lt;a href=&#34;https://www.1000bulbs.com/search?breadcrumbs%5B0%5D=light-bulbs&amp;amp;breadcrumbs%5B1%5D=halogen-light-bulbs&amp;amp;breadcrumbs%5B2%5D=halogen-par-lamps&amp;amp;facet.multiselect=true&amp;amp;page=1&amp;amp;q=%2A&amp;amp;rows=15&amp;amp;son=0&amp;amp;sort=price+asc&amp;amp;start=0&amp;amp;filter=(category:%225659%22)&amp;amp;filter=(a_bulb_shape_t_fq:%22PAR16%22)&#34;&gt;what a 75W PAR16 lamp emits.&lt;/a&gt; Even testing at 500mA as I was, it&#39;s a punchy little package!&lt;/p&gt;
&lt;h4 class=&#34;post-h4&#34;&gt;Next Steps
&lt;p class=&#34;post-paragraph&#34;&gt;There&#39;s some CAD time in my future. I&#39;ll need to whip up a case to hold the PCB and accommodate a pan servo. I think the arm and body components I will be able to mostly re-use from my previous design, possibly with a little extra room in the head for a proper heatsink.&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;&lt;div class=&#34;wp-block-image&#34;&gt;&lt;figure class=&#34;aligncenter is-resized&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-418 post-img&#34; height=&#34;376&#34; src=&#34;MovingLightTinySnip.png&#34; width=&#34;357&#34;/&gt;&lt;/figure&gt;&lt;p class=&#34;post-img-caption&#34;&gt;The previous tiny moving-light design&lt;/p&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p class=&#34;post-paragraph&#34;&gt;At some point, I&#39;ll have to re-order PCB&#39;s with the errors corrected, especially the overlapping servo-control pads. I may also want to rethink the mounting hole locations, and possibly bring the DC and DMX inputs out onto their own little tabs to solder connectors onto. But first, I think it will be satisfying to bring this version of the LED to life.&lt;/p&gt;
&lt;/h4&gt;&lt;/h4&gt;&lt;/h4&gt;</description>
      &lt;
    </item>
    
    <item>
      <title>DMX Mini Moving Light Shield V0.3</title>
      <link>https://jeff.glass/post/dmx-mini-moving-light-shield-v0.3/</link>
      <pubDate>Fri, 24 May 2019 03:23:46 -0500</pubDate>
      
      <guid>https://jeff.glass/post/dmx-mini-moving-light-shield-v0.3/</guid>
      <description>&lt;p class=&#34;post-p&#34;&gt;As I hinted to in my original post about the &lt;a href=&#34;https://jeff.glass/2019/05/20/arduino-pro-mini-dmx-shield/&#34;&gt;Arduino Pro Mini DMX Shield&lt;/a&gt;, and then talked some about in my &lt;a href=&#34;https://jeff.glass/2019/05/22/dmx-mini-mover-shield-pcb-assembly-stream/&#34;&gt;PCB Assembly Livestream&lt;/a&gt;, the latest version of my DMX shield is geared toward driving in miniature moving light. This means that, in addition to being able to receive DMX, the Arduino driving the device will need to be able to drive a couple of servos and dim a relatively high power LED. There are many way of skinning both of those cats, so let&#39;s look at the solutions that are present in V0.3 of the DMX shield.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;&lt;div class=&#34;wp-block-image&#34;&gt;&lt;figure class=&#34;aligncenter is-resized&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-397 post-img&#34; height=&#34;310&#34; src=&#34;IMG_7277-1024x768.jpg&#34; width=&#34;413&#34;/&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h4 class=&#34;post-h4&#34;&gt;Servo Control
&lt;p class=&#34;post-p&#34;&gt;Of LED dimming and Servo control, the latter is the easier problem to solve. While there are &lt;a href=&#34;https://www.digikey.com/products/en/integrated-circuits-ics/pmic-motor-drivers-controllers/744?k=&amp;amp;pkeyword=&amp;amp;sv=0&amp;amp;pv1664=28&amp;amp;pv1664=10&amp;amp;pv1664=2&amp;amp;sf=0&amp;amp;FV=ffe002e8&amp;amp;quantity=&amp;amp;ColumnSort=0&amp;amp;page=1&amp;amp;stock=1&amp;amp;pageSize=25&#34;&gt;dedicated servo-driving IC&#39;s&lt;/a&gt;, and &lt;a href=&#34;https://www.digikey.com/products/en/motors-solenoids-driver-boards-modules/motor-driver-boards-modules/181?k=servo&amp;amp;k=&amp;amp;pkeyword=servo&amp;amp;sv=0&amp;amp;pv1987=9&amp;amp;sf=0&amp;amp;FV=ffe000b5&amp;amp;quantity=&amp;amp;ColumnSort=0&amp;amp;page=1&amp;amp;pageSize=25&#34;&gt;modules&lt;/a&gt;, almost any microcontroller, including the ATMEGA238/Arduino can control a hobby servo in a straightforward way using minimal additional hardware.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;A typical hobby servo needs only three wires running to it - +5 for power, Ground, and a control line. The control line carries the position data for the servo in the form of pulse width modulation. The servo expects to see a pulse every 20 milliseconds. A pulse of 1.5 ms corresponds to the center (90°) position of the servo. A 1 ms pulse rotates all the way in one direction (0°) and a 2 ms pulse rotates fully the other direction (180°). There is a standard&lt;a href=&#34;https://www.arduino.cc/en/Reference/Servo&#34;&gt; Arduino Servo Library&lt;/a&gt; that translates degrees inputted into the appropriate duration Servo pulses.&lt;/p&gt;
&lt;figure class=&#34;wp-block-image&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-409 post-img&#34; src=&#34;Sinais_controle_servomotor.jpg&#34;/&gt;&lt;/figure&gt;&lt;p class=&#34;post-img-caption&#34;&gt;Image Credit: Wikimedia Member Hforesti, CC-SA-4.0&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;The only additional hardware present on the V0.3 board for Servo control is, therefore, a bulkier &lt;a href=&#34;https://www.digikey.com/product-detail/en/stmicroelectronics/L7805CV/497-1443-5-ND/585964&#34;&gt;5V regulator&lt;/a&gt;. The 5V regulator on an Arduino Pro Mini isn&#39;t particularly stout to begin with, and I&#39;ve had issues on previous projects with &#34;off brand&#34; Pro Minis having even less 5V oomph than that. So there&#39;s a pair of DC input pads and a TO-220 packaged 7805 to provide a healthy amount of current for the servos.&lt;/p&gt;
&lt;h4 class=&#34;post-h4&#34;&gt;LED Dimming
&lt;p class=&#34;post-p&#34;&gt;The LED dimming half of this project has a wider solution space than servo control. The typical solution is MOSFET dimming. A FET is switched on and off rapidly, with a variable duty cycle to control brightness. This is the solution that commercial &lt;a href=&#34;https://www.amazon.com/Channel-Controller-Smoother-Indicator-Function/dp/B00Q1N1NVK/ref=sr_1_1_sspa?keywords=led+decoder&amp;amp;qid=1558576077&amp;amp;s=gateway&amp;amp;sr=8-1-spons&amp;amp;psc=1&#34;&gt;DMX LED decoders&lt;/a&gt; use, with a bank of 3A-5A fets, one per driven channel. It&#39;s simple and inexpensive.&lt;/p&gt;
&lt;figure class=&#34;wp-block-image&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-410 post-img&#34; src=&#34;dmxled.png&#34;/&gt;&lt;/figure&gt;
&lt;p class=&#34;post-p&#34;&gt;The problem is heat. MOSFETS with super-low on-DC resistances are expensive, and those with higher DC resistances create more heat. There&#39;s always a balance being struck between cost and current carrying capacity. Which is why most commercial DMX led dimmers sit in &lt;a href=&#34;https://www.amazon.com/Channel-Controller-Smoother-Indicator-Function/dp/B01CCBG1SO/ref=sr_1_7?keywords=dmx+driver&amp;amp;qid=1558576476&amp;amp;s=gateway&amp;amp;sr=8-7&#34;&gt;a sweet spot between 3A and 5A&lt;/a&gt;. And all of them come in metal cases, sometimes mounted to large heatsinks, to help with heat dissipation. Less than ideal for what is ultimately meant to be a 3D-printed moving light made of thermoplastic.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;The other problem is overcurrent regulation. For typical, inexpensive 3A per channel DMX LED driver, there&#39;s nothing to protect the FETs if you load up a channel with, say, 5A of load, there&#39;s nothing in the drivers to prevent the FETs heating up to their failure point. Or worse. See, for example, this example from a local theater:&lt;/p&gt;
&lt;div class=&#34;grid grid-cols-2&#34;&gt;
&lt;img alt=&#34;&#34; class=&#34;w-auto wp-image-408 post-img&#34; data-id=&#34;408&#34; data-link=&#34;https://jeff.glass/?attachment_id=408#main&#34; src=&#34;IMG_5124-1024x768.jpeg&#34;/&gt;
&lt;img alt=&#34;&#34; class=&#34;w-auto wp-image-407 post-img&#34; data-id=&#34;407&#34; data-link=&#34;https://jeff.glass/?attachment_id=407#main&#34; src=&#34;IMG_7222-e1558576797290-1024x768.jpg&#34;/&gt;
&lt;/div&gt;
&lt;p class=&#34;post-p&#34;&gt;After some investigation, it turned out that there was a wiring error causing a dead-short across one of the channels. Which subsequently burst into flames. No kidding. The Stage Manager reported seeing a cloud of smoke roll out of the vom, which it turned out was discharge from the fire extinguisher the crew was using. Yikes!&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;With a controlled environment and a defined load, an overcurrent load is slightly less of a concern, but it seemed like there must be a more elegant solution to both the heat and overcurrent issues.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;The solution I&#39;m currently trying is the the &lt;a href=&#34;https://www.diodes.com/assets/Datasheets/AL8860.pdf&#34;&gt;AL8860 Buck LED Driver&lt;/a&gt;. It is essentially a DC-DC step-down converter which derives the average current through its load from a SET resistor between a couple of its pins. It has an input voltage from 4.5V to 40V, and in TSOT-25 form factor a maximum current of 1A. A TTL PWM signal applied to its CTRL pin brings the average current down from the maximum SET current to between 0 and 100% of maximum, depending on duty cycle.&lt;/p&gt;
&lt;figure class=&#34;wp-block-image&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-411 post-img&#34; src=&#34;AL8860_circuit.png&#34;/&gt;&lt;/figure&gt;
&lt;p class=&#34;post-p&#34;&gt;While the IC itself ultimately uses an NDMOS FET to do its switching with a relatively high on-state resistance (200 mOhm), its incorporation of current management and a step-down converter directly into the IC makes it an attractive option. And for the form factors I&#39;m looking at, I&#39;m not likely to be pushing more than 1A through an LED star anyway.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;The AL8860 requires a few external components as a buck converter would - an inductor and a schottky diode - as well as a bypass cap and the SET resistor(s). These altogether take up about as much PCB space as a decently sized FET switch would, let a long the voltage conversation IC&#39;s that would allow this to run on a variable voltage.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;&lt;div class=&#34;wp-block-image&#34;&gt;&lt;figure class=&#34;aligncenter&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-412 post-img&#34; src=&#34;PCB-layout-focus-dimming.png&#34;/&gt;&lt;/figure&gt;&lt;p class=&#34;post-img-caption&#34;&gt;The portion of the PCB directly responsibly for 1A LED dimming. Approximately 8mm x 8mm. The two large thru holes directly below this are points to solder leads from the LED star directly.&lt;/p&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h4 class=&#34;post-h4&#34;&gt;Testing&lt;/h4&gt;
&lt;p class=&#34;post-p&#34;&gt;I made the bold choice of testing this IC and hardware on a livestream recently. But not before an unscucessful attempt test attempt.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;In an attempt to validate this IC idea before committing to it, I purchased a handful of AL8860s, schottky diodes, 0.1 Ohm resistors, and inductors, and tried to piece together this idea on a piece of copper-clad. That did not, in short, go well. Without proper pads, I couldn&#39;t get the IC to stay in place well enough to solder magnet-wire to it. Even after I super-glued it down, the heat from my soldering iron weakened the super glue and caused it to come unstuck. And release superglue fumes. Fun!&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;So I pulled the trigger on ordering a batch of the V0.3 PCB&#39;s, this time from JLCPCB. But in my rush, I didn&#39;t run a final Design Rule Check, and the pads for my Pan and Tilt servos overlap. Ah well, this was mostly to validate the LED dimming circuit.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;And validate it did! Check out this gif from my testing session:&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;&lt;div class=&#34;wp-block-image&#34;&gt;&lt;figure class=&#34;aligncenter&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-415 post-img&#34; src=&#34;DimmingTestGif.gif&#34;/&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;Now that&#39;s some light! The arduino was just running a simple ramp-up/ramp-down for validation.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;The LEDs are from LEDSupply, a vendor on the east coast that I haven&#39;t used before, but stumbled upon while looking for LED options. They happen to be having a closeout sale on some &lt;a href=&#34;https://www.ledsupply.com/closeout/luxeon-r-triple-3-up-neutral-white-led-star&#34;&gt;Luxeon R 3-LED stars&lt;/a&gt;, which seemed like a good option for something I might smoke or blow up. The LEDs themselves are &lt;a href=&#34;https://www.lumileds.com/uploads/355/DS101-pdf&#34;&gt;Luxeon LXA7-PW40&lt;/a&gt;s. And with the appropriate &lt;a href=&#34;https://www.ledsupply.com/triple-carclo-led-optics&#34;&gt;Carclo optic&lt;/a&gt;, the beam width is fairly narrow. The heatsink is just something from the junk bin.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;At 1000mA forward current (which LEDSupply recommends as the maximum allowed current), they emit around 975 lumens total, around &lt;a href=&#34;https://www.1000bulbs.com/search?breadcrumbs%5B0%5D=light-bulbs&amp;amp;breadcrumbs%5B1%5D=halogen-light-bulbs&amp;amp;breadcrumbs%5B2%5D=halogen-par-lamps&amp;amp;facet.multiselect=true&amp;amp;page=1&amp;amp;q=%2A&amp;amp;rows=15&amp;amp;son=0&amp;amp;sort=price+asc&amp;amp;start=0&amp;amp;filter=(category:%225659%22)&amp;amp;filter=(a_bulb_shape_t_fq:%22PAR16%22)&#34;&gt;what a 75W PAR16 lamp emits.&lt;/a&gt; Even testing at 500mA as I was, it&#39;s a punchy little package!&lt;/p&gt;
&lt;h4 class=&#34;post-h4&#34;&gt;Next Steps
&lt;p class=&#34;post-p&#34;&gt;There&#39;s some CAD time in my future. I&#39;ll need to whip up a case to hold the PCB and accommodate a pan servo. I think the arm and body components I will be able to mostly re-use from my previous design, possibly with a little extra room in the head for a proper heatsink.&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;&lt;div class=&#34;wp-block-image&#34;&gt;&lt;figure class=&#34;aligncenter is-resized&#34;&gt;&lt;img alt=&#34;&#34; class=&#34;wp-image-418 post-img&#34; height=&#34;376&#34; src=&#34;MovingLightTinySnip.png&#34; width=&#34;357&#34;/&gt;&lt;/figure&gt;&lt;p class=&#34;post-img-caption&#34;&gt;The previous tiny moving-light design&lt;/p&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p class=&#34;post-p&#34;&gt;At some point, I&#39;ll have to re-order PCB&#39;s with the errors corrected, especially the overlapping servo-control pads. I may also want to rethink the mounting hole locations, and possibly bring the DC and DMX inputs out onto their own little tabs to solder connectors onto. But first, I think it will be satisfying to bring this version of the LED to life.&lt;/p&gt;
&lt;/h4&gt;&lt;/h4&gt;&lt;/h4&gt;</description>
      &lt;
    </item>
    
  </channel>
</rss>