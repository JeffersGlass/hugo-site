---
title: "Why Pyscript Can't Find Your Files"
date: 2023-04-06T9:43:07-05:00
draft: true
tags:
- python
- pyscript
- pyodide
description: Solving the mysterious "No Module Name..." and "Failed to Fetch" issues that plague new PyScript developers.
---
<h2 class="post-h2">The Most Common PyScript Error</h2>
<p class="post-p">Of all the error messages we have to explain to new PyScript users, this is by far the most common:</p>
<div  style="font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue',Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';line-height: 1.5;position: relative;padding: 0.5rem 1.5rem 0.5rem 0.5rem;margin: .25rem 1rem;background-color: #ffe9e8;border: solid;border-color: #f0625f;color: #9d041c;">(PY0001): PyScript: Access to local files (using "Paths:" in &lt;py-config&gt;) is not available when directly opening a HTML file; you must use a webserver to serve the additional files. See <a style="text-decoration: underline; color: #FF041c;" href="https://github.com/pyscript/pyscript/issues/257#issuecomment-1119595062">this reference</a> on starting a simple webserver with Python.</div>
<p class=post-p>You clone the <a href="https://github.com/pyscript/pyscript">PyScript GitHub repo</a>, double click on some of the html files in the examples folder... and while some work, others (notoriosly <a href="https://github.com/pyscript/pyscript/blob/main/examples/simple_clock.html">simple_clock.html</a>) fail with the error <code class="code">ModuleNotFoundError: No module named ...</code> and the error message above.
<p class="post-p">Or mabye you've been working on your own PyScript project, and you decide to move your Python code into its own <code class="code">.py</code> file. So you change your PyScript tag to <code class="code">&lt;py-script src=&quot;my_code.py&quot;&gt;&lt;/py-script&gt;</code>, but even with <code class="code">my_code.py</code> in the same folder as your html file, it refuses to load! You might see the same error as above, a <span class="font-bold">cors-error</span>, or both.</p>
<img src="corsfetcherror.jpg" alt="" class="p-4 post-img">
<p class="post-p">So the question we have to answer is, <span class="italic">Why can't PyScript find my python files/modules/packages, even though they're in the same folder as my <code class="not-italic code">.html</code> file?</span> What is the issue here - why aren't local files available to your PyScript code? What is a "simple web server", and why is it necessary?</p>
<p class="mt-4 post-h3">Where are my Files?</p>
<p class="post-p">The short answer - this isn't PyScript's issue. It's the browser's. And it's not a bug: it's a feature.</p>
<p class="post-p">For <a href="https://www.techradar.com/news/theres-another-huge-security-google-chrome-update-you-should-install-right-away">all</a> <a href="https://arstechnica.com/information-technology/2022/07/exploit-seller-used-chrome-exploit-and-2-other-0-days-to-infect-journalists/">their</a> <a href="https://www.androidcentral.com/apps-software/google-chrome-password-strength-indicator">faults</a>, modern web browsers do try to keep their users safe. One thing they definitely won't allow? Allowing websites arbitrary access to your harddrive. Imagine if Twitter could search your desktop for spreadsheets and upload them without you knowing. Or worse, you accidently type in <code class="code">gmial.com</code> and before you know it, any file  with "W2" or "Payroll" or "Deposit" in it is whisked away into the hands of dangerous internet thieves.</p>
<p class="post-p">For that reason, <span class="font-bold">broswers can't access abritrary files on your harddrive without explicit permission <sup><a href="#foot-1">[1]</a></sup></span> When you double-click on an <code class="code">.html</code> file? That's giving your browser explicit permission to open that file and<span class="italic"> only that file</span>. Same goes for using <code class="code">File > Open...</code> in the browser's menu.</p>
<p class="post-p">But when add an external <code class="code">.py</code> file in your PyScript (using <code class="code">src = ...</code> and <code class="code">&lt;py-config&gt; [[fetch]] &lt;/py-config&gt;</code>), PyScript uses the browser's built in <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a> to make a request to load that file from the hard disk. And as far as your browser is concerned,you haven't given explicity permission for <span class="italic">that page</span> to open <span class="italic">that file</span>, so it forbids access.</p>
<p class="post-p">The large red error that appears at the top of the screen in this case tries to make obvious to the new Pyscript user what's happening here. (I should know, <a href="https://github.com/pyscript/pyscript/commit/b767a78b052cfb6a8a7a6d6ef301250443461915#diff-93ffd8baa67686edae90dbe5aed373d8ad3e6a1164b87542c71612a48c6ed5ce">I wrote it</a>. The key advice it provides? <span class="italic">"You must use a webserver to serve the additional files."</span> So how might we do that?</p>
<h2 class="post-h2"></h2>
<hr>
<h3 class="post-h3">Footnotes</h2>
<p class="post-p font-italic" id="foot-1"><span class="font-semibold">[1]</span> The statement that browsers can't access files on your hard drive, while true in spirit, has, like anything to do with programming, lots of exceptions. For example, trying including a <code class="code">&lt;img src=&quot;...&quot;&gt;</code> tag in your html file with a local image source; if you open the html file in a browser, the image loads just fine.</p>


<!-- <h2 class="post-h2">The Desktop and the Network Are Different</h2>
<p class="post-p">PyScript allows you to write Python in your HTML. That's the pitch, right? Open a <code>&lt;py-script&gt;</code> tag in your HTML document and start writing Python for the web, <span class="italic">"just like you would on a Desktop"</span>.</p>
<p class="post-p">This is the awesomeness of PyScript (and, really, it's underlying runtimes <a href="https://pyodide.org/en/stable/">Pyodide</a> and (soon) <a href="https://github.com/pyscript/pyscript/pull/1392">Micropython-dide</a>). But easing the transition of writing the Python code hides the fact that one is no longer operating strictly in the word of local files, of hard-disks and persistent storage. When one is running code in the Browser, you're swimming in the sea of Networks and Servers, of URL's and server permissions and <a href="https://developer.mozilla.org/en-US/docs/Glossary/CORS">CORS</a>. Whether it's Python, JavaScript, <a href="https://www.rust-lang.org/what/wasm">Rust</a>, <a href="https://www.php.net/">PHP</a>, or something more exotic - you should be aware of how running within the web affects how you access resources.</p>
<p class="post-p">In this post, we'll look at </p> -->