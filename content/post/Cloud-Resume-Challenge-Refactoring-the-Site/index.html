---
title: "Refactoring the Site"
date: 2021-11-03T12:41:35-05:00
draft: true
static_slug: /img/cloudresumeslug.png
tags:
- Cloud-Resume
---
<p class="post-p">At this point, I transitioned between a couple of different computers; in fact, I'm likely to be bouncing back and forth between two and even 3 computers over the course of this project. Thankfully, git, Github, and npm have my back here. When I sat down at a new computer tonight (with VS Code and my plugins already installed), I used git to clone my remote repo to my local machine. Then <strong>npm install </strong>brings down all my necessary node modules. A quick <strong>npx hugo </strong>(<em>well, after making sure my file path had no spaces - a known error in POSTCSS) (and updating node to v 17.0.1 using npx) </em>and we have our site rebuilt on a new machine. Well, almost:</p>
<p class="post-p"><a href="https://jeff.glass/wp-content/uploads/2021/11/oneimage.png"><img alt="" class="aligncenter size-full wp-image-3964 post-img" height="463" src="oneimage.png" width="541"/></a></p>
<p class="post-p">Weirdly, only one of three project images appears on the main page. And the same "gooddogs.jpg" image is the only one that appears on the projects list-page. Curious... The gooddogs image is the one I'm currently using as a placeholder if the project content file doesn't specify a slug_image. If I change that standin, the standin images do appear in the projects page... and now two images appear on the main page! After using each image one-by-one as the standin slug_image, now all the images are appearing correctly... which implies to me that the images are not actually being correctly generated by Hugo, but instead are being cached between builds, leading to the appearance of correct behavior. Indeed, if I delete the public and resources folders are restart the server, we see a very similar issue with the image currently being used as the project standin:</p>
<p class="post-p"><a href="https://jeff.glass/wp-content/uploads/2021/11/newimage.png"><img alt="" class="aligncenter size-full wp-image-3965 post-img" height="373" src="newimage.png" width="423"/></a></p>
<p class="post-p">Ah, I see <a href="https://gohugo.io/hugo-pipes/introduction/">here in the documentation that</a> "assets will only be published if .Permalink or .RelPermalink is used." Which explains why I was only seeing the placeholder image - it was the only one reference via permalink in the summary.html renderer. Changing that image reference code to the following:</p>
<p class="post-p"><div></div></p>
<p class="post-p"><div> {{ if isset .Params "slug_image" }}</div></p>
<p class="post-p"><div>        {{ $img := resources.Get .Params.slug_image }}</div></p>
<p class="post-p"><div>        &lt;img src="{{ $img.RelPermalink }}" alt="" class="...</div></p>
<p class="post-p"></p>
<p class="post-p">Worked, since all the images are reference via Permalink.</p>
<p class="post-p">To help make things less confusing, I'm going to change the "image not found" image to something that's not an image I'm already using for something elsewhere - a nice SVG of a flash borrowed again from Heroicons.</p>
<p class="post-p"><a href="https://jeff.glass/wp-content/uploads/2021/11/flask.png"><img alt="" class="aligncenter size-full wp-image-3966 post-img" height="163" src="flask.png" width="369"/></a></p>
<p class="post-p">To accomplish this, I added the SVG to a new /static/svg folder, then used a simple <span style="color: initial;">&lt;img src="/svg/notfound.svg" .... tag (with proper tailwind formatting) to use it as the slug_image not present option.</span></p>
<p class="post-p"><hr/></p>
<p class="post-p">Ok, but actually on to refactoring the page now. I realize that what I've been creating is something between a resume page and a new actual homepage for my website, leaving it somewhat in limbo between the two. It's a bit odd to have job-history on the front page of a personal site, for example, but it should absolutely be on a resume page. So I'll create a new page that's strictly resume oriented, and refactor the index.html page into being a proper homepage.</p>
<p class="post-p">So, I'll create a new file in my content called "/resume/resume.md", as well as a new file in my layouts folder called resume.html.html... except I can tell by poking at the content of these two files that resume.md is being used as the content within the default single.html template. So let's try this another way around - I'll create a /layouts/resume/_index.md file with frontmatter for my new resume page, and a layouts/resume/list.html file. That way, the {{site}}/resume URL points to the "list page for resumes"... which will just be my resume page. It seems like perhaps there'd be a better way to do this, but this certainly works.</p>
<p class="post-p"><a href="https://jeff.glass/wp-content/uploads/2021/11/resumepage.png"><img alt="" class="aligncenter size-full wp-image-3970 post-img" height="343" src="resumepage.png" width="283"/></a></p>
<p class="post-p">I'll move the job history and skills list over from the main page to the resume page, and reformat the header to just link to the resume page. Since that header is included as a partial, it'll update <em>everywhere at once</em>. Oh and what the heck, I'll add a link to my twitter as well</p>
<p class="post-p"><a href="https://jeff.glass/wp-content/uploads/2021/11/fullnavbar.png"><img alt="" class="aligncenter size-full wp-image-3973 post-img" height="57" src="fullnavbar.png" width="921"/></a></p>
<p class="post-p">Well that took about two minutes, most of which was finding the Twitter logo SVG on Ionicons. Awesome!</p>
<p class="post-p"><hr/></p>
<p class="post-p">Much more tinkering occurred here, including a joyous crowdsourcing session to name the selection of small projects.</p>
<p class="post-p"><a href="https://jeff.glass/wp-content/uploads/2021/11/crowdsource.png"><img alt="" class="aligncenter size-full wp-image-3975 post-img" height="171" src="crowdsource.png" width="625"/></a></p>
<p class="post-p">I learned some (but not all) about {{ range }} operator used to list pages, and that the summary layout can be distinct to each type of content (as well as having a default or fallback format, which is handy). So I created a small summary format for small projects, and embedded a few sample ones on the homepage. By using the {{ .RelPermalink }} template, each card on the homepage links to the appropriate piece of content.</p>
<p class="post-p">lksdf</p>
