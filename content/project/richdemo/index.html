---
title: "Rich Demo"
date: 2022-09-10T13:50:24-05:00
draft: true
tags:
- project
- rich
- python
- pyscript
description: "Description Here"
aliases: 
    - /richdemo
    - /rich
---
<link rel="stylesheet" href="tooltips.css">
<script src="//unpkg.com/alpinejs" defer></script>
<script defer src="https://pyscript.net/releases/2022.06.1/pyscript.js"></script>
<link rel="stylesheet" href="https://pyscript.net/releases/2022.06.1/pyscript.css">
<py-env>
    - rich
    - faker
    - paths:
        - ./_richsetup.py
        - ./scripts/liverunner.py
</py-env>
<script>
    function createJSObject(object, variableName){
        //Bind a variable whose name is the string variableName
        // to the object called 'object'
        let execString = variableName + " = object"
        console.log("Running `" + execString + "`");
        eval(execString)
    }
</script>
<py-script src="_richsetup.py"></py-script>
<py-script src="livepatch.py"></py-script>
<py-script src="cancel_tasks.py"></py-script>
<py-script src="show_docstring.py"></py-script>
<py-script>
    #click Text button to start
    from js import document
    document.getElementById("button1").click()
</py-script>
<div id="mobile-intro" class = "block mb-1 text-sm">
    <p class="mb-1"><a href="https://rich.readthedocs.io/en/stable/introduction.html">Rich</a> is a Python library for writing rich text (with color and style) to the terminal, and for displaying advanced content such as tables, markdown, and syntax highlighted code. The page illustrates the core classes and concepts of the Rich library, runninng live in the browser via <a href="https://github.com/pyscript/pyscript">PyScript</a> (v2022.06.1). </p>
    <p>Select any of the classes below to load a live code sample using that class. Select any of the demos to see them run in realtime. See the accompanying blog post for notes on <a href="">How to use Rich in PyScript</a>.</p>
    <!-- <p>See the accompanying blog post for more info on how this site was built and how the Live examples differ from pure Rich syntax.</p> -->
</div>
<div class="grid grid-cols-1 gap-y-2 lg:flex lg:flex-row" x-data ="{ scripts: [
    {id:  1, name: 'Text'            , src: 'scripts/richtext.py'            , type: 'script', referenceImports: 'from rich.text import Text', referenceObject: 'Text', apiLink: 'https://rich.readthedocs.io/en/stable/text.html'},
    {id:  3, name: 'Logging'         , src: 'scripts/richlogging.py'         , type: 'script', referenceImports: 'from rich.logging import RichHandler', referenceObject: 'RichHandler', apiLink: 'https://rich.readthedocs.io/en/stable/logging.html'},
    {id:  4, name: 'Exception'       , src: 'scripts/richexception.py'       , type: 'script', referenceImports: 'from rich.console import Console', referenceObject: 'Console().print_exception'},
    {id:  5, name: 'Traceback'       , src: 'scripts/richtraceback.py'       , type: 'script', referenceImports: 'from rich.traceback import install', referenceObject: 'install'},
    {id:  6, name: 'Columns'         , src: 'scripts/richcolumns.py'         , type: 'script', referenceImports: 'from rich.columns import Columns', referenceObject: 'Columns'},
    {id:  8, name: 'Group'         , src: 'scripts/richgroup.py'             , type: 'script', referenceImports: 'from rich.console import Group', referenceObject: 'Group'},
    {id:  10, name: 'Markdown'         , src: 'scripts/richmarkdown.py'      , type: 'script', referenceImports: 'from rich.markdown import Markdown', referenceObject: 'Markdown'},
    {id:  11, name: 'Highlighter'      , src: 'scripts/richhighlighter.py'   , type: 'script', referenceImports: 'from rich.highlighter import RegexHighlighter', referenceObject: 'regexHighlighter', note: 'This demo is adapted from the highlighter.py demo included with Rich'},
    {id:  13, name: 'Panel'           , src: 'scripts/richpanel.py'          , type: 'script', referenceImports: 'from rich.panel import Panel', referenceObject: 'Panel'},
    {id:  14, name: 'Bar'             , src: 'scripts/richbar.py'            , type: 'script', referenceImports: 'from rich.bar import Bar', referenceObject: 'Bar'},
    {id: 16, name: 'Progress Bar'    , src: 'scripts/richprogressbar.py'     , type: 'script', referenceImports: 'from rich.progress_bar import ProgressBar', referenceObject: 'ProgressBar'},
    {id: 18, name: 'Syntax'          , src: 'scripts/richsyntax.py'          , type: 'script', referenceImports: 'from rich.syntax import Syntax', referenceObject: 'Syntax'},
    {id: 20, name: 'Tables'          , src: 'scripts/richtables.py'          , type: 'script', referenceImports: 'from rich.table import Table', referenceObject: 'Table'},
    {id: 22, name: 'Tree'            , src: 'scripts/richtree.py'            , type: 'script', referenceImports: 'from rich.tree import Tree', referenceObject: 'Tree', note: 'This code has been borrowed/adapted from the Rich documentation.'},
    {id: 24, name: 'Live'            , src: 'scripts/liverunner.py'          , type: 'script', referenceImports: '', referenceObject: ''},
    {id: 26, name: 'Layout'          , src: 'scripts/richlayout.py'          , type: 'script', referenceImports: 'from rich.layout import Layout', referenceObject: 'Layout'},
    {id: 28, name: 'Inspect'          , src: 'scripts/richinspect.py'        , type: 'script', referenceImports: 'from rich import inspect', referenceObject: 'inspect'},

    //{id:  30, name: 'Jobs'                         , src: 'scripts/jobs.py'  , type: 'demo', note: 'This demo is adapted from the jobs.py demo included with Rich'},
    {id:  31, name: 'Rainbow                '      , src: 'scripts/richrainbow.py'   , type: 'demo', note: 'This demo is adapted from the rainbow.py demo included with Rich'},
    {id:  32, name: 'print_calendar'                  , src: 'scripts/print_calendar.py'      , type: 'demo', note: 'This demo is adapted from the print_calendar.py demo included with Rich'},
    {id:  33, name: 'table_movie'                  , src: 'scripts/table_movie.py'      , type: 'demo', note: 'This demo is adapted from the table_movie.py demo included with Rich'},
    {id:  34, name: 'dynamic_progress'             , src: 'scripts/dynamic_progress.py' , type: 'demo', note: 'This demo is adapted from the dynamic_progress.py demo included with Rich'},
    {id:  50, name: 'PyScript`s Element.Write'     , src: 'scripts/element-write.py'    , type: 'demo'},
    ],
    current_id: 0} ">
    <div class="lg:hidden" id="mobile-controls">
        <div class="grid grid-cols-1 px-2 py-2 bg-blue-50" id="classes-panel">
            <div class="italic text-center text-blue-700">Classes</div>
            <div id="rich-element-buttons" class="flex flex-row flex-wrap justify-center w-auto gap-x-2 gap-y-1">
                <template x-for="my_script in scripts.filter(obj => {return obj.type === 'script'})" :key="my_script.id">
                    <button class="richbutton" :id="'button' + my_script.id" x-text="my_script.name" @click=" current_id = my_script.id; setReplCode(my_script.src); if (my_script.referenceObject != undefined) setInfo(my_script.referenceObject, my_script.referenceImports, my_script.apiLink)" :class="my_script.id === current_id && 'bg-blue-600 text-white font-semibold'"></p>
                </template>
            </div>
        </div>
        <div class="grid grid-cols-1 px-2 py-2 bg-green-50" id="demos-panel">
            <div class="italic text-center text-green-700">Demos</div>
            <div id="rich-demo-buttons" class="flex flex-row flex-wrap justify-center w-auto gap-x-2 gap-y-1">
                <template x-for="my_demo in scripts.filter(obj => {return obj.type === 'demo'})" :key="my_demo.id">
                    <button class="richbutton" :id="'demo' + my_demo.id" x-text="my_demo.name" @click="setReplCode(my_demo.src); current_id = my_demo.id;" :class="my_demo.id === current_id && 'bg-green-600 text-white font-semibold'"></p>
                </template>
            </div>
        </div>
    </div>
    <div id="desktop-controls" class="flex-none hidden pl-1 pr-3 mt-2 bg-gray-100 border-r-2 border-gray-600 lg:block">
        <p class="text-lg font-semibold text-gray-600">Rich Objects</p>
        <template x-for="my_script in scripts.filter(obj => {return obj.type === 'script'})" :key="my_script.id">
            <p><button :id="'scriptlink' + my_script.id" x-text="my_script.name" @click="current_id = my_script.id; setReplCode(my_script.src); if (my_script.referenceObject != undefined) setInfo(my_script.referenceObject, my_script.referenceImports, my_script.apiLink)" class="ml-2" :class="my_script.id === current_id && 'font-bold'"></p>
        </template>
        <p class="mt-6 text-lg font-semibold text-gray-600">Rich Demos</p>
        <template x-for="my_demo in scripts.filter(obj => {return obj.type === 'demo'})" :key="my_demo.id">
            <p><button :id="'demolink' + my_demo.id" x-text="my_demo.name" @click="setReplCode(my_demo.src); current_id = my_demo.id;" class="ml-2" :class="my_demo.id === current_id && 'font-bold'"></p>
        </template>
    </div>
    <div id="userpane" class="grid flex-auto grid-cols-1 ml-2 xl:grid-cols-2">
        <div class="hidden my-2 ml-8 text-gray-600 lg:block xl:col-span-2">
            <h2 class="">
                <span class="text-3xl font-semibold" x-text="scripts.find(obj => {return obj.id === current_id}).name">
                    Text
                </span><span id="api-link" class="ml-2"></span>
                <div id="docs" class="1">
                    <div>
                        <meta charset="UTF-8">
                        <style>
                        .r1 {color: #800080; text-decoration-color: #800080}
                        body {
                            color: #000000;
                            background-color: #ffffff;
                        }
                        </style>
                        <code>
                            <pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">Text with color <span class="r1">/</span> style.
                            </pre>
                        </code>                  
                    </div>
                </div>
            </h2>
        </div>
        <div class="px-4 py-2 mx-2 overflow-y-scroll bg-gray-200 xl:order-last max-h-160">
            <p class="italic text-center text-gray-600">Output</p>
            <div id="output-container"></div>
        </div>
        <div class="py-2" id="repl-box">
            <p class="italic text-center text-gray-600">REPL</p>
            <div id="repl-container" class="">
                <py-repl id="repl"></py-repl>
            </div>
            <div id="repl-note" x-show="scripts.find(obj => {return obj.id === current_id}) != undefined && scripts.find(obj => {return obj.id === current_id}).hasOwnProperty('note')" 
                x-text="(scripts.find(obj => {return obj.id === current_id}) != undefined && scripts.find(obj => {return obj.id === current_id}).hasOwnProperty('note')) ? scripts.find(obj => {return obj.id === current_id}).note : ''"
                class="italic text-center text-gray-600">
            </div>
        </div>
    </div>
</div>
<script>
    async function setReplCode(filename){
        if (typeof cancelTasks != "undefined"){
            console.log("Cancelling async tasks");
            cancelTasks();
        }

        console.log("Loading code from " + filename);
        const result = await fetch(filename)
        const code = await result.text()

        document.getElementById("repl").remove()
        const new_repl = document.createElement("py-repl")
        new_repl.textContent = code
        new_repl.id = "repl"
        new_repl.setAttribute("std-out", "output-container")

        document.getElementById("repl-container").appendChild(new_repl)
        document.getElementById("btnRun").click()
    }

    async function setInfo(object, imports, apiLink){
        console.warn(`setInfo on ${object}`)
        if (typeof get_object_info_html != "undefined" && object != undefined){
            get_object_info_html(object, imports, apiLink);
        }

        else {
            clear_object_info();
        }
    }

   /*  document.getElementById("docs-link").addEventListener('click', () => {
        let apiTooltip = document.getElementById("docs")
        if (apiTooltip.style.visibility == 'hidden'){
            apiTooltip.style.visibility = 'visible';
        }
        else {
            apiTooltip.style.visibility = 'hidden';
        }
    }); */
</script>